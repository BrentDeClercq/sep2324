/*! third party licenses: js/vendor.LICENSE.txt */
import{n as a,l as s,d as i,s as d,t as n,a as p}from"./modulepreload-polyfill-CZYm9XZS.mjs";import{V as o}from"./vendor-DFuGXkIP.mjs";import{N as l}from"./NcEmptyContent-CXZD4dur.mjs";import{o as c}from"./Submit-PS6lxYc-.mjs";import"./NcSettingsSection-Lgwm3w2e-Zv456Rc4.mjs";const f={name:"FormsSubmit",components:{NcContent:l,Submit:c},data(){return{form:s("forms","form"),isLoggedIn:s("forms","isLoggedIn"),isEmbedded:s("forms","isEmbedded",!1),shareHash:s("forms","shareHash")}},destroyed(){i("forms:last-updated:set",this.emitSubmitMessage)},mounted(){if(this.isEmbedded){d("forms:last-updated:set",this.emitSubmitMessage);const e=new ResizeObserver(t=>{this.emitResizeMessage(t[0].target)});this.$nextTick(()=>e.observe(document.querySelector(".app-forms-embedded form")))}},methods:{emitSubmitMessage(e){var t;(t=window.parent)==null||t.postMessage({type:"form-saved",payload:{id:e}},"*")},emitResizeMessage(e){var m;let t=e.getBoundingClientRect().top+e.scrollHeight,r=e.scrollWidth;t===0&&(e=document.querySelector(".app-forms-embedded main .empty-content"),t=e.getBoundingClientRect().top+e.scrollHeight,r=Math.max(e.scrollWidth,document.querySelector(".app-forms-embedded main header").scrollWidth)),(m=window.parent)==null||m.postMessage({type:"resize-iframe",payload:{width:r,height:t}},"*")}}};var h=function(){var e=this,t=e._self._c;return t("NcContent",{class:{"app-forms-embedded":e.isEmbedded},attrs:{"app-name":"forms"}},[t("Submit",{attrs:{form:e.form,"public-view":!0,"share-hash":e.shareHash,"is-logged-in":e.isLoggedIn}})],1)},u=[],g=a(f,h,u,!1,null,null,null,null);const b=g.exports;o.prototype.t=n,o.prototype.n=p,new o({el:"#content",name:"FormsSubmitRoot",render:e=>e(b)});
