/*! third party licenses: js/vendor.LICENSE.txt */
var ri=Object.defineProperty;var oi=(t,n,r)=>n in t?ri(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r;var oe=(t,n,r)=>(oi(t,typeof n!="symbol"?n+"":n,r),r);import{V as se,g as ie,d as It,r as ot,c as et,h as ii,o as Ht,q as si,w as _r,b as ai,n as li}from"./vendor-DFuGXkIP.mjs";import{v as Ke,i as ci,h as ui,m as pi,u as hi,N as Zt,O as Pt,Q as Ye,S as Cr,V as Xt,W as Gt,X as ue,Y as di,Z as Kt,$ as pe,a0 as fi,a1 as Qe,a2 as gi,a3 as mi,a4 as vi,a5 as bi,a6 as yi,a7 as Je,a8 as wi,a9 as Ar,aa as Or,ab as kr,ac as Sr,ad as Nr,ae as tn,af as xi,ag as _i,ah as Ci,ai as Ai,aj as Pr,ak as Oi,al as ki,am as Si,an as Ni,ao as Pi,ap as Ti,e as Yt,U as Tr,j as Wn,aq as Ei,g as Ii,p as Nt,ar as wt,C as ct,z as en,a as Er,_ as nn,o as Ir,G as ji}from"./NcSettingsSection-Lgwm3w2e-Zv456Rc4.mjs";import{v as rn,x as on,s as Li,d as Fi,ag as ae,J as jr,e as Ri,l as Lr,h as Bi,at as qn}from"./modulepreload-polyfill-CZYm9XZS.mjs";import{b as Di,f as $i,z as Mi,q as zi,y as Vi,r as Ui,s as Wi,t as qi,v as Hi}from"./Submit-PS6lxYc-.mjs";import{_ as Zi}from"./NcEmptyContent-CXZD4dur.mjs";const Xi={name:"NcBreadcrumb",components:{NcActions:Ke,ChevronRight:ci,NcButton:on},inheritAttrs:!1,props:{name:{type:String,required:!0},title:{type:String,default:null},to:{type:[String,Object],default:void 0},exact:{type:Boolean,default:!1},href:{type:String,default:void 0},icon:{type:String,default:""},forceIconText:{type:Boolean,default:!1},disableDrop:{type:Boolean,default:!1},forceMenu:{type:Boolean,default:!1},open:{type:Boolean,default:!1}},emits:["update:open","dropped"],data(){return{hovering:!1,crumbId:"crumb-id-".concat(ui())}},computed:{linkAttributes(){return this.to?{to:this.to,exact:this.exact,...this.$attrs}:this.href?{href:this.href,...this.$attrs}:this.$attrs}},methods:{onOpenChange(t){this.$emit("update:open",t)},dropped(t){return this.disableDrop||(this.$emit("dropped",t,this.to||this.href),this.$parent.$emit("dropped",t,this.to||this.href),this.hovering=!1),!1},dragEnter(t){this.disableDrop||(this.hovering=!0)},dragLeave(t){this.disableDrop||t.target.contains(t.relatedTarget)||this.$refs.crumb.contains(t.relatedTarget)||(this.hovering=!1)}}};var Gi=function(){var t=this,n=t._self._c;return n("li",t._b({ref:"crumb",staticClass:"vue-crumb",class:{"vue-crumb--hovered":t.hovering},attrs:{draggable:"false"},on:{dragstart:function(r){return r.preventDefault(),(()=>{}).apply(null,arguments)},drop:function(r){return r.preventDefault(),t.dropped.apply(null,arguments)},dragover:function(r){return r.preventDefault(),(()=>{}).apply(null,arguments)},dragenter:t.dragEnter,dragleave:t.dragLeave}},"li",t._d({},[t.crumbId,""])),[(t.name||t.icon||t.$slots.icon)&&!t.$slots.default?n("NcButton",t._g(t._b({attrs:{title:t.title,"aria-label":t.icon?t.name:void 0,type:"tertiary"},scopedSlots:t._u([t.$slots.icon||t.icon?{key:"icon",fn:function(){return[t._t("icon",function(){return[n("span",{staticClass:"icon",class:t.icon})]})]},proxy:!0}:null,!(t.$slots.icon||t.icon)||t.forceIconText?{key:"default",fn:function(){return[t._v(" "+t._s(t.name)+" ")]},proxy:!0}:null],null,!0)},"NcButton",t.linkAttributes,!1),t.$listeners)):t._e(),t.$slots.default?n("NcActions",{ref:"actions",attrs:{type:"tertiary","force-menu":t.forceMenu,open:t.open,"menu-name":t.name,title:t.title,"force-name":!0,container:".vue-crumb[".concat(t.crumbId,"]")},on:{"update:open":t.onOpenChange},scopedSlots:t._u([{key:"icon",fn:function(){return[t._t("menu-icon")]},proxy:!0}],null,!0)},[t._t("default")],2):t._e(),n("ChevronRight",{staticClass:"vue-crumb__separator",attrs:{size:20}})],1)},Ki=[],Yi=rn(Xi,Gi,Ki,!1,null,"fe4740ac",null,null);const Fr=Yi.exports;var he=Symbol(),Wt=Symbol(),Hn=Symbol(),Zn=Symbol(),sn=function(t){return"frag"in t},Qi={get:function(){return this[Wt]||this.parentElement},configurable:!0},qt=function(t,n){Wt in t||(t[Wt]=n,Object.defineProperty(t,"parentNode",Qi))},Ji={get:function(){var t=this.parentNode.childNodes,n=t.indexOf(this);return n>-1&&t[n+1]||null}},le=function(t){Hn in t||(t[Hn]=!0,Object.defineProperty(t,"nextSibling",Ji))},ts=function(t,n){for(;t.parentNode!==n;){var r=t,p=r.parentNode;p&&(t=p)}return t},je,Rr=function(t){if(!je){var n=Object.getOwnPropertyDescriptor(Node.prototype,"childNodes");je=n.get}var r=je.apply(t),p=Array.from(r).map(function(h){return ts(h,t)});return p.filter(function(h,m){return h!==p[m-1]})},es={get:function(){return this.frag||Rr(this)}},ns={get:function(){return this.childNodes[0]||null}};function rs(){return this.childNodes.length>0}var Xn=function(t){Zn in t||(t[Zn]=!0,Object.defineProperties(t,{childNodes:es,firstChild:ns}),t.hasChildNodes=rs)};function os(){var t;(t=this.frag[0]).before.apply(t,arguments)}function is(){var t=this.frag,n=t.splice(0,t.length);n.forEach(function(r){r.remove()})}var ss=function t(n){var r;return(r=Array.prototype).concat.apply(r,n.map(function(p){return sn(p)?t(p.frag):p}))},as=function(t,n){var r=t[he];n.before(r),qt(r,t),t.frag.unshift(r)};function Gn(t){if(sn(this)){var n=this.frag.indexOf(t);if(n>-1){var r=this.frag.splice(n,1),p=r[0];this.frag.length===0&&as(this,p),t.remove()}}else{var h=Rr(this),m=h.indexOf(t);m>-1&&t.remove()}return t}function Kn(t,n){var r=this,p=t.frag||[t];if(sn(this)){if(t[Wt]===this&&t.parentElement)return t;var h=this.frag;if(n){var m=h.indexOf(n);m>-1&&(h.splice.apply(h,[m,0].concat(p)),n.before.apply(n,p))}else{var x=h[h.length-1];h.push.apply(h,p),x.after.apply(x,p)}Br(this)}else n?this.childNodes.includes(n)&&n.before.apply(n,p):this.append.apply(this,p);p.forEach(function(w){qt(w,r)});var d=p[p.length-1];return le(d),t}function ls(t){if(t[Wt]===this&&t.parentElement)return t;var n=this.frag,r=n[n.length-1];return r.after(t),qt(t,this),Br(this),n.push(t),t}var Br=function(t){var n=t[he];t.frag[0]===n&&(t.frag.shift(),n.remove())},cs={set:function(t){var n=this;if(this.frag[0]!==this[he]&&this.frag.slice().forEach(function(p){return n.removeChild(p)}),t){var r=document.createElement("div");r.innerHTML=t,Array.from(r.childNodes).forEach(function(p){n.appendChild(p)})}},get:function(){return""}},us={inserted:function(t){var n=t.parentNode,r=t.nextSibling,p=t.previousSibling,h=Array.from(t.childNodes),m=document.createComment("");h.length===0&&h.push(m),t.frag=h,t[he]=m;var x=document.createDocumentFragment();x.append.apply(x,ss(h)),t.replaceWith(x),h.forEach(function(d){qt(d,t),le(d)}),Xn(t),Object.assign(t,{remove:is,appendChild:ls,insertBefore:Kn,removeChild:Gn,before:os}),Object.defineProperty(t,"innerHTML",cs),n&&(Object.assign(n,{removeChild:Gn,insertBefore:Kn}),qt(t,n),Xn(n)),r&&le(t),p&&le(p)},unbind:function(t){t.remove()}},Dr={name:"Fragment",directives:{frag:us},render:function(t){return t("div",{directives:[{name:"frag"}]},this.$slots.default)}};const Yn=(t,n,r)=>{if(t!==void 0)for(let p=t.length-1;p>=0;p--){const h=t[p],m=!h.componentOptions&&h.tag&&n.indexOf(h.tag)===-1,x=!!h.componentOptions&&typeof h.componentOptions.tag=="string",d=x&&n.indexOf(h.componentOptions.tag)===-1;(m||!x||d)&&((m||d)&&se.util.warn("".concat(m?h.tag:h.componentOptions.tag," is not allowed inside the ").concat(r.$options.name," component"),r),t.splice(p,1))}},ps={name:"FolderIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var hs=function(){var t=this,n=t._self._c;return n("span",t._b({staticClass:"material-design-icon folder-icon",attrs:{"aria-hidden":t.title?null:!0,"aria-label":t.title,role:"img"},on:{click:function(r){return t.$emit("click",r)}}},"span",t.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z"}},[t.title?n("title",[t._v(t._s(t.title))]):t._e()])])])},ds=[],fs=rn(ps,hs,ds,!1,null,null,null,null);const gs=fs.exports,vt="vue-crumb",ms={name:"NcBreadcrumbs",components:{NcActions:Ke,NcActionButton:Di,NcActionRouter:pi,NcActionLink:hi,NcBreadcrumb:Fr,IconFolder:gs},props:{rootIcon:{type:String,default:"icon-home"},ariaLabel:{type:String,default:null}},emits:["dropped"],data(){return{hiddenIndices:[],menuBreadcrumbProps:{name:"",forceMenu:!0,disableDrop:!0,open:!1},breadcrumbsRefs:{}}},beforeMount(){Yn(this.$slots.default,["NcBreadcrumb"],this)},beforeUpdate(){Yn(this.$slots.default,["NcBreadcrumb"],this)},created(){window.addEventListener("resize",$i(()=>{this.handleWindowResize()},100)),Li("navigation-toggled",this.delayedResize)},mounted(){this.handleWindowResize()},updated(){this.delayedResize(),this.$nextTick(()=>{this.hideCrumbs()})},beforeDestroy(){window.removeEventListener("resize",this.handleWindowResize),Fi("navigation-toggled",this.delayedResize)},methods:{closeActions(t){this.$refs.actionsBreadcrumb.$el.contains(t.relatedTarget)||(this.menuBreadcrumbProps.open=!1)},async delayedResize(){await this.$nextTick(),this.handleWindowResize()},handleWindowResize(){var t;if(!this.$refs.container)return;const n=Object.values(this.breadcrumbsRefs),r=n.length,p=[],h=this.$refs.container.offsetWidth;let m=this.getTotalWidth(n);this.$refs.breadcrumb__actions&&(m+=this.$refs.breadcrumb__actions.offsetWidth);let x=m-h;x+=x>0?64:0;let d=0;const w=Math.floor(r/2);for(;x>0&&d<r-2;){const c=w+(d%2?d+1:d)/2*Math.pow(-1,d+r%2);x-=this.getWidth((t=n[c])==null?void 0:t.elm,c===n.length-1),p.push(c),d++}this.arraysEqual(this.hiddenIndices,p.sort((c,s)=>c-s))||(this.hiddenIndices=p)},arraysEqual(t,n){if(t.length!==n.length)return!1;if(t===n)return!0;if(t===null||n===null)return!1;for(let r=0;r<t.length;++r)if(t[r]!==n[r])return!1;return!0},getTotalWidth(t){return t.reduce((n,r,p)=>n+this.getWidth(r==null?void 0:r.elm,p===t.length-1),0)},getWidth(t,n){if(!(t!=null&&t.classList))return 0;const r=t.classList.contains("".concat(vt,"--hidden"));t.style.minWidth="auto",n&&(t.style.maxWidth="210px"),t.classList.remove("".concat(vt,"--hidden"));const p=t.offsetWidth;return r&&t.classList.add("".concat(vt,"--hidden")),t.style.minWidth="",t.style.maxWidth="",p},preventDefault(t){return t.preventDefault&&t.preventDefault(),!1},dragStart(t){return this.preventDefault(t)},dropped(t,n,r){return r||this.$emit("dropped",t,n),this.menuBreadcrumbProps.open=!1,document.querySelectorAll(".".concat(vt)).forEach(p=>{p.classList.remove("".concat(vt,"--hovered"))}),this.preventDefault(t)},dragOver(t){return this.preventDefault(t)},dragEnter(t,n){if(!n&&t.target.closest){const r=t.target.closest(".".concat(vt));r.classList&&r.classList.contains(vt)&&(document.querySelectorAll(".".concat(vt)).forEach(p=>{p.classList.remove("".concat(vt,"--hovered"))}),r.classList.add("".concat(vt,"--hovered")))}},dragLeave(t,n){if(!n&&!t.target.contains(t.relatedTarget)&&t.target.closest){const r=t.target.closest(".".concat(vt));if(r.contains(t.relatedTarget))return;r.classList&&r.classList.contains(vt)&&r.classList.remove("".concat(vt,"--hovered"))}},hideCrumbs(){Object.values(this.breadcrumbsRefs).forEach((t,n)=>{var r;(r=t==null?void 0:t.elm)!=null&&r.classList&&(this.hiddenIndices.includes(n)?t.elm.classList.add("".concat(vt,"--hidden")):t.elm.classList.remove("".concat(vt,"--hidden")))})},isBreadcrumb(t){var n;return(((n=t==null?void 0:t.componentOptions)==null?void 0:n.tag)||(t==null?void 0:t.tag)||"").includes("NcBreadcrumb")}},render(t){const n=[];if(this.$slots.default.forEach(m=>{var x,d;if(this.isBreadcrumb(m)){n.push(m);return}(m==null?void 0:m.type)===Dr&&((d=(x=m==null?void 0:m.children)==null?void 0:x.forEach)==null||d.call(x,w=>{this.isBreadcrumb(w)&&n.push(w)}))}),n.length===0)return;se.set(n[0].componentOptions.propsData,"icon",this.rootIcon),se.set(n[0].componentOptions.propsData,"ref","breadcrumbs");const r={};n.forEach((m,x)=>{se.set(m,"ref","crumb-".concat(x)),r[x]=m});let p=[];if(!this.hiddenIndices.length)p=n;else{p=n.slice(0,Math.round(n.length/2)),p.push(t("NcBreadcrumb",{class:"dropdown",props:this.menuBreadcrumbProps,attrs:{"aria-hidden":!0},ref:"actionsBreadcrumb",key:"actions-breadcrumb-1",nativeOn:{dragstart:this.dragStart,dragenter:()=>{this.menuBreadcrumbProps.open=!0},dragleave:this.closeActions},on:{"update:open":x=>{this.menuBreadcrumbProps.open=x}}},this.hiddenIndices.filter(x=>x<=n.length-1).map(x=>{const d=n[x],w=d.componentOptions.propsData.to,c=d.componentOptions.propsData.href,s=d.componentOptions.propsData.disableDrop,f=d.componentOptions.propsData.title,l=d.componentOptions.propsData.name;let u="NcActionButton",v="";c&&(u="NcActionLink",v=c),w&&(u="NcActionRouter",v=w);const C=t("IconFolder",{props:{size:20},slot:"icon"});return t(u,{class:vt,props:{href:c||null,title:f,to:w||null},attrs:{draggable:!1},on:{...d.componentOptions.listeners},nativeOn:{dragstart:this.dragStart,drop:k=>this.dropped(k,v,s),dragover:this.dragOver,dragenter:k=>this.dragEnter(k,s),dragleave:k=>this.dragLeave(k,s)}},[C,l])})));const m=n.slice(Math.round(n.length/2));p=p.concat(m)}const h=[t("nav",{attrs:{"aria-label":this.ariaLabel}},[t("ul",{class:"breadcrumb__crumbs"},[p])])];return this.$slots.actions&&h.push(t("div",{class:"breadcrumb__actions",ref:"breadcrumb__actions"},this.$slots.actions)),this.breadcrumbsRefs=r,t("div",{class:["breadcrumb",{"breadcrumb--collapsed":this.hiddenIndices.length===n.length-2}],ref:"container"},h)}},vs=null,bs=null;var ys=rn(ms,vs,bs,!1,null,"959b70c1",null,null);const ws=ys.exports;var Dt={},xs=Pt,_s=Zt,Cs=Ye,As=_s("species"),an=function(t){return Cs>=51||!xs(function(){var n=[],r=n.constructor={};return r[As]=function(){return{foo:1}},n[t](Boolean).foo!==1})},Os=Xt,ks=Cr.map,Ss=an,Ns=Ss("map");Os({target:"Array",proto:!0,forced:!Ns},{map:function(t){return ks(this,t,arguments.length>1?arguments[1]:void 0)}});var Ps=Gt,Ts=function(){var t=Ps(this),n="";return t.hasIndices&&(n+="d"),t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.dotAll&&(n+="s"),t.unicode&&(n+="u"),t.unicodeSets&&(n+="v"),t.sticky&&(n+="y"),n},ln=Pt,Es=ue,cn=Es.RegExp,un=ln(function(){var t=cn("a","y");return t.lastIndex=2,t.exec("abcd")!==null}),Is=un||ln(function(){return!cn("a","y").sticky}),js=un||ln(function(){var t=cn("^r","gy");return t.lastIndex=2,t.exec("str")!==null}),$r={BROKEN_CARET:js,MISSED_STICKY:Is,UNSUPPORTED_Y:un},Ls=Pt,Fs=ue,Rs=Fs.RegExp,Bs=Ls(function(){var t=Rs(".","s");return!(t.dotAll&&t.test("\n")&&t.flags==="s")}),Ds=Pt,$s=ue,Ms=$s.RegExp,zs=Ds(function(){var t=Ms("(?<a>b)","g");return t.exec("b").groups.a!=="b"||"b".replace(t,"$<a>c")!=="bc"}),$t=Kt,de=pe,Vs=Qe,Us=Ts,Ws=$r,qs=fi,Hs=gi,Zs=di.get,Xs=Bs,Gs=zs,Ks=qs("native-string-replace",String.prototype.replace),ce=RegExp.prototype.exec,qe=ce,Ys=de("".charAt),Qs=de("".indexOf),Js=de("".replace),Le=de("".slice),He=function(){var t=/a/,n=/b*/g;return $t(ce,t,"a"),$t(ce,n,"a"),t.lastIndex!==0||n.lastIndex!==0}(),Mr=Ws.BROKEN_CARET,Ze=/()??/.exec("")[1]!==void 0,ta=He||Ze||Mr||Xs||Gs;ta&&(qe=function(t){var n=this,r=Zs(n),p=Vs(t),h=r.raw,m,x,d,w,c,s,f;if(h)return h.lastIndex=n.lastIndex,m=$t(qe,h,p),n.lastIndex=h.lastIndex,m;var l=r.groups,u=Mr&&n.sticky,v=$t(Us,n),C=n.source,k=0,L=p;if(u&&(v=Js(v,"y",""),Qs(v,"g")===-1&&(v+="g"),L=Le(p,n.lastIndex),n.lastIndex>0&&(!n.multiline||n.multiline&&Ys(p,n.lastIndex-1)!=="\n")&&(C="(?: "+C+")",L=" "+L,k++),x=new RegExp("^(?:"+C+")",v)),Ze&&(x=new RegExp("^"+C+"$(?!\\s)",v)),He&&(d=n.lastIndex),w=$t(ce,u?x:n,L),u?w?(w.input=Le(w.input,k),w[0]=Le(w[0],k),w.index=n.lastIndex,n.lastIndex+=w[0].length):n.lastIndex=0:He&&w&&(n.lastIndex=n.global?w.index+w[0].length:d),Ze&&w&&w.length>1&&$t(Ks,w[0],x,function(){for(c=1;c<arguments.length-2;c++)arguments[c]===void 0&&(w[c]=void 0)}),w&&l)for(w.groups=s=Hs(null),c=0;c<l.length;c++)f=l[c],s[f[0]]=w[f[1]];return w});var pn=qe,ea=Xt,Qn=pn;ea({target:"RegExp",proto:!0,forced:/./.exec!==Qn},{exec:Qn});var Jn=Kt,tr=mi,na=pn,er=Pt,zr=Zt,ra=vi,oa=zr("species"),Fe=RegExp.prototype,Vr=function(t,n,r,p){var h=zr(t),m=!er(function(){var c={};return c[h]=function(){return 7},""[t](c)!==7}),x=m&&!er(function(){var c=!1,s=/a/;return t==="split"&&(s={},s.constructor={},s.constructor[oa]=function(){return s},s.flags="",s[h]=/./[h]),s.exec=function(){return c=!0,null},s[h](""),!c});if(!m||!x||r){var d=/./[h],w=n(h,""[t],function(c,s,f,l,u){var v=s.exec;return v===na||v===Fe.exec?m&&!u?{done:!0,value:Jn(d,s,f,l)}:{done:!0,value:Jn(c,f,s,l)}:{done:!1}});tr(String.prototype,t,w[0]),tr(Fe,h,w[1])}p&&ra(Fe[h],"sham",!0)},ia=bi,sa=yi,aa=TypeError,la=function(t){if(ia(t))return t;throw new aa(sa(t)+" is not a constructor")},nr=Gt,ca=la,ua=Je,pa=Zt,ha=pa("species"),da=function(t,n){var r=nr(t).constructor,p;return r===void 0||ua(p=nr(r)[ha])?n:ca(p)},fa=wi.charAt,Ur=function(t,n,r){return n+(r?fa(t,n).length:1)},rr=Kt,ga=Gt,ma=Ar,va=Or,ba=pn,ya=TypeError,Wr=function(t,n){var r=t.exec;if(ma(r)){var p=rr(r,t,n);return p!==null&&ga(p),p}if(va(t)==="RegExp")return rr(ba,t,n);throw new ya("RegExp#exec called on incompatible receiver")},Re=Kt,qr=pe,wa=Vr,xa=Gt,_a=Je,Ca=kr,Aa=da,Oa=Ur,ka=Sr,or=Qe,Sa=Nr,ir=Wr,Na=$r,Pa=Pt,Rt=Na.UNSUPPORTED_Y,Ta=4294967295,Ea=Math.min,Be=qr([].push),De=qr("".slice),Ia=!Pa(function(){var t=/(?:)/,n=t.exec;t.exec=function(){return n.apply(this,arguments)};var r="ab".split(t);return r.length!==2||r[0]!=="a"||r[1]!=="b"}),sr="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;wa("split",function(t,n,r){var p="0".split(void 0,0).length?function(h,m){return h===void 0&&m===0?[]:Re(n,this,h,m)}:n;return[function(h,m){var x=Ca(this),d=_a(h)?void 0:Sa(h,t);return d?Re(d,h,x,m):Re(p,or(x),h,m)},function(h,m){var x=xa(this),d=or(h);if(!sr){var w=r(p,x,d,m,p!==n);if(w.done)return w.value}var c=Aa(x,RegExp),s=x.unicode,f=(x.ignoreCase?"i":"")+(x.multiline?"m":"")+(x.unicode?"u":"")+(Rt?"g":"y"),l=new c(Rt?"^(?:"+x.source+")":x,f),u=m===void 0?Ta:m>>>0;if(u===0)return[];if(d.length===0)return ir(l,d)===null?[d]:[];for(var v=0,C=0,k=[];C<d.length;){l.lastIndex=Rt?0:C;var L=ir(l,Rt?De(d,C):d),y;if(L===null||(y=Ea(ka(l.lastIndex+(Rt?C:0)),d.length))===v)C=Oa(d,C,s);else{if(Be(k,De(d,v,C)),k.length===u)return k;for(var A=1;A<=L.length-1;A++)if(Be(k,L[A]),k.length===u)return k;C=v=y}}return Be(k,De(d,v)),k}]},sr||!Ia,Rt);var hn=pe,ja=tn,La=Math.floor,$e=hn("".charAt),Fa=hn("".replace),Me=hn("".slice),Ra=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Ba=/\$([$&'`]|\d{1,2})/g,Da=function(t,n,r,p,h,m){var x=r+t.length,d=p.length,w=Ba;return h!==void 0&&(h=ja(h),w=Ra),Fa(m,w,function(c,s){var f;switch($e(s,0)){case"$":return"$";case"&":return t;case"`":return Me(n,0,r);case"'":return Me(n,x);case"<":f=h[Me(s,1,-1)];break;default:var l=+s;if(l===0)return c;if(l>d){var u=La(l/10);return u===0?c:u<=d?p[u-1]===void 0?$e(s,1):p[u-1]+$e(s,1):c}f=p[l-1]}return f===void 0?"":f})},$a=xi,ar=Kt,fe=pe,Ma=Vr,za=Pt,Va=Gt,Ua=Ar,Wa=Je,qa=_i,Ha=Sr,Bt=Qe,Za=kr,Xa=Ur,Ga=Nr,Ka=Da,Ya=Wr,Qa=Zt,Xe=Qa("replace"),Ja=Math.max,tl=Math.min,el=fe([].concat),ze=fe([].push),lr=fe("".indexOf),cr=fe("".slice),nl=function(t){return t===void 0?t:String(t)},rl=function(){return"a".replace(/./,"$0")==="$0"}(),ur=function(){return/./[Xe]?/./[Xe]("a","$0")==="":!1}(),ol=!za(function(){var t=/./;return t.exec=function(){var n=[];return n.groups={a:"7"},n},"".replace(t,"$<a>")!=="7"});Ma("replace",function(t,n,r){var p=ur?"$":"$0";return[function(h,m){var x=Za(this),d=Wa(h)?void 0:Ga(h,Xe);return d?ar(d,h,x,m):ar(n,Bt(x),h,m)},function(h,m){var x=Va(this),d=Bt(h);if(typeof m=="string"&&lr(m,p)===-1&&lr(m,"$<")===-1){var w=r(n,x,d,m);if(w.done)return w.value}var c=Ua(m);c||(m=Bt(m));var s=x.global,f;s&&(f=x.unicode,x.lastIndex=0);for(var l=[],u;u=Ya(x,d),!(u===null||(ze(l,u),!s));){var v=Bt(u[0]);v===""&&(x.lastIndex=Xa(d,Ha(x.lastIndex),f))}for(var C="",k=0,L=0;L<l.length;L++){u=l[L];for(var y=Bt(u[0]),A=Ja(tl(qa(u.index),d.length),0),S=[],_,E=1;E<u.length;E++)ze(S,nl(u[E]));var T=u.groups;if(c){var N=el([y],S,A,d);T!==void 0&&ze(N,T),_=Bt($a(m,void 0,N))}else _=Ka(y,d,A,S,T,m);A>=k&&(C+=cr(d,k,A)+_,k=A+y.length)}return C+cr(d,k)}]},!ol||!rl||ur);var il=Xt,sl=Cr.filter,al=an,ll=al("filter");il({target:"Array",proto:!0,forced:!ll},{filter:function(t){return sl(this,t,arguments.length>1?arguments[1]:void 0)}});var cl=Ci,ul=tn,pl=Ai,hl=Pr,pr=TypeError,hr="Reduce of empty array with no initial value",dr=function(t){return function(n,r,p,h){var m=ul(n),x=pl(m),d=hl(m);if(cl(r),d===0&&p<2)throw new pr(hr);var w=t?d-1:0,c=t?-1:1;if(p<2)for(;;){if(w in x){h=x[w],w+=c;break}if(w+=c,t?w<0:d<=w)throw new pr(hr)}for(;t?w>=0:d>w;w+=c)w in x&&(h=r(h,x[w],w,m));return h}},dl={left:dr(!1),right:dr(!0)},fl=Pt,gl=function(t,n){var r=[][t];return!!r&&fl(function(){r.call(null,n||function(){return 1},1)})},ml=ue,vl=Or,bl=vl(ml.process)==="process",yl=Xt,wl=dl.left,xl=gl,fr=Ye,_l=bl,Cl=!_l&&fr>79&&fr<83,Al=Cl||!xl("reduce");yl({target:"Array",proto:!0,forced:Al},{reduce:function(t){var n=arguments.length;return wl(this,t,n,n>1?arguments[1]:void 0)}});var Ol=TypeError,kl=9007199254740991,Sl=function(t){if(t>kl)throw Ol("Maximum allowed index exceeded");return t},Nl=Oi,Pl=ki,Tl=Si,El=function(t,n,r){Nl?Pl.f(t,n,Tl(0,r)):t[n]=r},Il=Xt,jl=Pt,Ll=Pi,Fl=Ti,Rl=tn,Bl=Pr,gr=Sl,mr=El,Dl=Ni,$l=an,Ml=Zt,zl=Ye,Hr=Ml("isConcatSpreadable"),Vl=zl>=51||!jl(function(){var t=[];return t[Hr]=!1,t.concat()[0]!==t}),Ul=function(t){if(!Fl(t))return!1;var n=t[Hr];return n!==void 0?!!n:Ll(t)},Wl=!Vl||!$l("concat");Il({target:"Array",proto:!0,arity:1,forced:Wl},{concat:function(t){var n=Rl(this),r=Dl(n,0),p=0,h,m,x,d,w;for(h=-1,x=arguments.length;h<x;h++)if(w=h===-1?n:arguments[h],Ul(w))for(d=Bl(w),gr(p+d),m=0;m<d;m++,p++)m in w&&mr(r,p,w[m]);else gr(p+1),mr(r,p++,w);return r.length=p,r}}),Object.defineProperty(Dt,"__esModule",{value:!0});var ql=Dt.encodePath=Hl;Dt.basename=Zl,Dt.dirname=Xl,Dt.joinPaths=Ge,Dt.isSamePath=Gl;function Hl(t){return t&&t.split("/").map(encodeURIComponent).join("/")}function Zl(t){return t.replace(/\\/g,"/").replace(/.*\//,"")}function Xl(t){return t.replace(/\\/g,"/").replace(/\/[^\/]*$/,"")}function Ge(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(arguments.length<1)return"";var p=n.filter(function(s){return s.length>0});if(p.length<1)return"";var h=p[p.length-1],m=p[0].charAt(0)==="/",x=h.charAt(h.length-1)==="/",d=p.reduce(function(s,f){return s.concat(f.split("/"))},[]),w=!m,c=d.reduce(function(s,f){return f===""?s:w?(w=!1,s+f):s+"/"+f},"");return x?c+"/":c}function Gl(t,n){var r=(t||"").split("/").filter(function(h){return h!=="."}),p=(n||"").split("/").filter(function(h){return h!=="."});return t=Ge.apply(void 0,r),n=Ge.apply(void 0,p),t===n}var Ve={},Kl={2:t=>{function n(h,m,x){h instanceof RegExp&&(h=r(h,x)),m instanceof RegExp&&(m=r(m,x));var d=p(h,m,x);return d&&{start:d[0],end:d[1],pre:x.slice(0,d[0]),body:x.slice(d[0]+h.length,d[1]),post:x.slice(d[1]+m.length)}}function r(h,m){var x=m.match(h);return x?x[0]:null}function p(h,m,x){var d,w,c,s,f,l=x.indexOf(h),u=x.indexOf(m,l+1),v=l;if(l>=0&&u>0){for(d=[],c=x.length;v>=0&&!f;)v==l?(d.push(v),l=x.indexOf(h,v+1)):d.length==1?f=[d.pop(),u]:((w=d.pop())<c&&(c=w,s=u),u=x.indexOf(m,v+1)),v=l<u&&l>=0?l:u;d.length&&(f=[c,s])}return f}t.exports=n,n.range=p},101:function(t,n,r){var p;t=r.nmd(t),function(h){var m=(t&&t.exports,typeof ie=="object"&&ie);m.global!==m&&m.window;var x=function(f){this.message=f};(x.prototype=new Error).name="InvalidCharacterError";var d=function(f){throw new x(f)},w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=/[\t\n\f\r ]/g,s={encode:function(f){f=String(f),/[^\0-\xFF]/.test(f)&&d("The string to be encoded contains characters outside of the Latin1 range.");for(var l,u,v,C,k=f.length%3,L="",y=-1,A=f.length-k;++y<A;)l=f.charCodeAt(y)<<16,u=f.charCodeAt(++y)<<8,v=f.charCodeAt(++y),L+=w.charAt((C=l+u+v)>>18&63)+w.charAt(C>>12&63)+w.charAt(C>>6&63)+w.charAt(63&C);return k==2?(l=f.charCodeAt(y)<<8,u=f.charCodeAt(++y),L+=w.charAt((C=l+u)>>10)+w.charAt(C>>4&63)+w.charAt(C<<2&63)+"="):k==1&&(C=f.charCodeAt(y),L+=w.charAt(C>>2)+w.charAt(C<<4&63)+"=="),L},decode:function(f){var l=(f=String(f).replace(c,"")).length;l%4==0&&(l=(f=f.replace(/==?$/,"")).length),(l%4==1||/[^+a-zA-Z0-9/]/.test(f))&&d("Invalid character: the string to be decoded is not correctly encoded.");for(var u,v,C=0,k="",L=-1;++L<l;)v=w.indexOf(f.charAt(L)),u=C%4?64*u+v:v,C++%4&&(k+=String.fromCharCode(255&u>>(-2*C&6)));return k},version:"1.0.0"};(p=(function(){return s}).call(n,r,n,t))===void 0||(t.exports=p)}()},172:(t,n)=>{n.d=function(r){if(!r)return 0;for(var p=(r=r.toString()).length,h=r.length;h--;){var m=r.charCodeAt(h);56320<=m&&m<=57343&&h--,127<m&&m<=2047?p++:2047<m&&m<=65535&&(p+=2)}return p}},526:t=>{var n={utf8:{stringToBytes:function(r){return n.bin.stringToBytes(unescape(encodeURIComponent(r)))},bytesToString:function(r){return decodeURIComponent(escape(n.bin.bytesToString(r)))}},bin:{stringToBytes:function(r){for(var p=[],h=0;h<r.length;h++)p.push(255&r.charCodeAt(h));return p},bytesToString:function(r){for(var p=[],h=0;h<r.length;h++)p.push(String.fromCharCode(r[h]));return p.join("")}}};t.exports=n},298:t=>{var n,r;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(p,h){return p<<h|p>>>32-h},rotr:function(p,h){return p<<32-h|p>>>h},endian:function(p){if(p.constructor==Number)return 16711935&r.rotl(p,8)|4278255360&r.rotl(p,24);for(var h=0;h<p.length;h++)p[h]=r.endian(p[h]);return p},randomBytes:function(p){for(var h=[];p>0;p--)h.push(Math.floor(256*Math.random()));return h},bytesToWords:function(p){for(var h=[],m=0,x=0;m<p.length;m++,x+=8)h[x>>>5]|=p[m]<<24-x%32;return h},wordsToBytes:function(p){for(var h=[],m=0;m<32*p.length;m+=8)h.push(p[m>>>5]>>>24-m%32&255);return h},bytesToHex:function(p){for(var h=[],m=0;m<p.length;m++)h.push((p[m]>>>4).toString(16)),h.push((15&p[m]).toString(16));return h.join("")},hexToBytes:function(p){for(var h=[],m=0;m<p.length;m+=2)h.push(parseInt(p.substr(m,2),16));return h},bytesToBase64:function(p){for(var h=[],m=0;m<p.length;m+=3)for(var x=p[m]<<16|p[m+1]<<8|p[m+2],d=0;d<4;d++)8*m+6*d<=8*p.length?h.push(n.charAt(x>>>6*(3-d)&63)):h.push("=");return h.join("")},base64ToBytes:function(p){p=p.replace(/[^A-Z0-9+\/]/gi,"");for(var h=[],m=0,x=0;m<p.length;x=++m%4)x!=0&&h.push((n.indexOf(p.charAt(m-1))&Math.pow(2,-2*x+8)-1)<<2*x|n.indexOf(p.charAt(m))>>>6-2*x);return h}},t.exports=r},635:(t,n,r)=>{const p=r(31),h=r(338),m=r(221);t.exports={XMLParser:h,XMLValidator:p,XMLBuilder:m}},705:(t,n)=>{const r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",p="["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",h=new RegExp("^"+p+"$");n.isExist=function(m){return m!==void 0},n.isEmptyObject=function(m){return Object.keys(m).length===0},n.merge=function(m,x,d){if(x){const w=Object.keys(x),c=w.length;for(let s=0;s<c;s++)m[w[s]]=d==="strict"?[x[w[s]]]:x[w[s]]}},n.getValue=function(m){return n.isExist(m)?m:""},n.isName=function(m){return h.exec(m)!=null},n.getAllMatches=function(m,x){const d=[];let w=x.exec(m);for(;w;){const c=[];c.startIndex=x.lastIndex-w[0].length;const s=w.length;for(let f=0;f<s;f++)c.push(w[f]);d.push(c),w=x.exec(m)}return d},n.nameRegexp=p},31:(t,n,r)=>{const p=r(705),h={allowBooleanAttributes:!1,unpairedTags:[]};function m(y){return y===" "||y==="	"||y==="\n"||y==="\r"}function x(y,A){const S=A;for(;A<y.length;A++)if(!(y[A]!="?"&&y[A]!=" ")){const _=y.substr(S,A-S);if(A>5&&_==="xml")return v("InvalidXml","XML declaration allowed only at the start of the document.",k(y,A));if(y[A]=="?"&&y[A+1]==">"){A++;break}}return A}function d(y,A){if(y.length>A+5&&y[A+1]==="-"&&y[A+2]==="-"){for(A+=3;A<y.length;A++)if(y[A]==="-"&&y[A+1]==="-"&&y[A+2]===">"){A+=2;break}}else if(y.length>A+8&&y[A+1]==="D"&&y[A+2]==="O"&&y[A+3]==="C"&&y[A+4]==="T"&&y[A+5]==="Y"&&y[A+6]==="P"&&y[A+7]==="E"){let S=1;for(A+=8;A<y.length;A++)if(y[A]==="<")S++;else if(y[A]===">"&&(S--,S===0))break}else if(y.length>A+9&&y[A+1]==="["&&y[A+2]==="C"&&y[A+3]==="D"&&y[A+4]==="A"&&y[A+5]==="T"&&y[A+6]==="A"&&y[A+7]==="["){for(A+=8;A<y.length;A++)if(y[A]==="]"&&y[A+1]==="]"&&y[A+2]===">"){A+=2;break}}return A}n.validate=function(y,A){A=Object.assign({},h,A);const S=[];let _=!1,E=!1;y[0]==="\uFEFF"&&(y=y.substr(1));for(let N=0;N<y.length;N++)if(y[N]==="<"&&y[N+1]==="?"){if(N+=2,N=x(y,N),N.err)return N}else{if(y[N]!=="<"){if(m(y[N]))continue;return v("InvalidChar","char '"+y[N]+"' is not expected.",k(y,N))}{let I=N;if(N++,y[N]==="!"){N=d(y,N);continue}{let M=!1;y[N]==="/"&&(M=!0,N++);let D="";for(;N<y.length&&y[N]!==">"&&y[N]!==" "&&y[N]!=="	"&&y[N]!=="\n"&&y[N]!=="\r";N++)D+=y[N];if(D=D.trim(),D[D.length-1]==="/"&&(D=D.substring(0,D.length-1),N--),T=D,!p.isName(T)){let W;return W=D.trim().length===0?"Invalid space after '<'.":"Tag '"+D+"' is an invalid name.",v("InvalidTag",W,k(y,N))}const $=s(y,N);if($===!1)return v("InvalidAttr","Attributes for '"+D+"' have open quote.",k(y,N));let F=$.value;if(N=$.index,F[F.length-1]==="/"){const W=N-F.length;F=F.substring(0,F.length-1);const tt=l(F,A);if(tt!==!0)return v(tt.err.code,tt.err.msg,k(y,W+tt.err.line));_=!0}else if(M){if(!$.tagClosed)return v("InvalidTag","Closing tag '"+D+"' doesn't have proper closing.",k(y,N));if(F.trim().length>0)return v("InvalidTag","Closing tag '"+D+"' can't have attributes or invalid starting.",k(y,I));{const W=S.pop();if(D!==W.tagName){let tt=k(y,W.tagStartPos);return v("InvalidTag","Expected closing tag '"+W.tagName+"' (opened in line "+tt.line+", col "+tt.col+") instead of closing tag '"+D+"'.",k(y,I))}S.length==0&&(E=!0)}}else{const W=l(F,A);if(W!==!0)return v(W.err.code,W.err.msg,k(y,N-F.length+W.err.line));if(E===!0)return v("InvalidXml","Multiple possible root nodes found.",k(y,N));A.unpairedTags.indexOf(D)!==-1||S.push({tagName:D,tagStartPos:I}),_=!0}for(N++;N<y.length;N++)if(y[N]==="<"){if(y[N+1]==="!"){N++,N=d(y,N);continue}if(y[N+1]!=="?")break;if(N=x(y,++N),N.err)return N}else if(y[N]==="&"){const W=u(y,N);if(W==-1)return v("InvalidChar","char '&' is not expected.",k(y,N));N=W}else if(E===!0&&!m(y[N]))return v("InvalidXml","Extra text at the end",k(y,N));y[N]==="<"&&N--}}}var T;return _?S.length==1?v("InvalidTag","Unclosed tag '"+S[0].tagName+"'.",k(y,S[0].tagStartPos)):!(S.length>0)||v("InvalidXml","Invalid '"+JSON.stringify(S.map(N=>N.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):v("InvalidXml","Start tag expected.",1)};const w='"',c="'";function s(y,A){let S="",_="",E=!1;for(;A<y.length;A++){if(y[A]===w||y[A]===c)_===""?_=y[A]:_!==y[A]||(_="");else if(y[A]===">"&&_===""){E=!0;break}S+=y[A]}return _===""&&{value:S,index:A,tagClosed:E}}const f=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function l(y,A){const S=p.getAllMatches(y,f),_={};for(let E=0;E<S.length;E++){if(S[E][1].length===0)return v("InvalidAttr","Attribute '"+S[E][2]+"' has no space in starting.",L(S[E]));if(S[E][3]!==void 0&&S[E][4]===void 0)return v("InvalidAttr","Attribute '"+S[E][2]+"' is without value.",L(S[E]));if(S[E][3]===void 0&&!A.allowBooleanAttributes)return v("InvalidAttr","boolean attribute '"+S[E][2]+"' is not allowed.",L(S[E]));const T=S[E][2];if(!C(T))return v("InvalidAttr","Attribute '"+T+"' is an invalid name.",L(S[E]));if(_.hasOwnProperty(T))return v("InvalidAttr","Attribute '"+T+"' is repeated.",L(S[E]));_[T]=1}return!0}function u(y,A){if(y[++A]===";")return-1;if(y[A]==="#")return function(_,E){let T=/\d/;for(_[E]==="x"&&(E++,T=/[\da-fA-F]/);E<_.length;E++){if(_[E]===";")return E;if(!_[E].match(T))break}return-1}(y,++A);let S=0;for(;A<y.length;A++,S++)if(!(y[A].match(/\w/)&&S<20)){if(y[A]===";")break;return-1}return A}function v(y,A,S){return{err:{code:y,msg:A,line:S.line||S,col:S.col}}}function C(y){return p.isName(y)}function k(y,A){const S=y.substring(0,A).split(/\r?\n/);return{line:S.length,col:S[S.length-1].length+1}}function L(y){return y.startIndex+y[1].length}},221:(t,n,r)=>{const p=r(87),h={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(c,s){return s},attributeValueProcessor:function(c,s){return s},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function m(c){this.options=Object.assign({},h,c),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=w),this.processTextOrObjNode=x,this.options.format?(this.indentate=d,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function x(c,s,f){const l=this.j2x(c,f+1);return c[this.options.textNodeName]!==void 0&&Object.keys(c).length===1?this.buildTextValNode(c[this.options.textNodeName],s,l.attrStr,f):this.buildObjectNode(l.val,s,l.attrStr,f)}function d(c){return this.options.indentBy.repeat(c)}function w(c){return!(!c.startsWith(this.options.attributeNamePrefix)||c===this.options.textNodeName)&&c.substr(this.attrPrefixLen)}m.prototype.build=function(c){return this.options.preserveOrder?p(c,this.options):(Array.isArray(c)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(c={[this.options.arrayNodeName]:c}),this.j2x(c,0).val)},m.prototype.j2x=function(c,s){let f="",l="";for(let u in c)if(c[u]===void 0)this.isAttribute(u)&&(l+="");else if(c[u]===null)this.isAttribute(u)?l+="":u[0]==="?"?l+=this.indentate(s)+"<"+u+"?"+this.tagEndChar:l+=this.indentate(s)+"<"+u+"/"+this.tagEndChar;else if(c[u]instanceof Date)l+=this.buildTextValNode(c[u],u,"",s);else if(typeof c[u]!="object"){const v=this.isAttribute(u);if(v)f+=this.buildAttrPairStr(v,""+c[u]);else if(u===this.options.textNodeName){let C=this.options.tagValueProcessor(u,""+c[u]);l+=this.replaceEntitiesValue(C)}else l+=this.buildTextValNode(c[u],u,"",s)}else if(Array.isArray(c[u])){const v=c[u].length;let C="";for(let k=0;k<v;k++){const L=c[u][k];L===void 0||(L===null?u[0]==="?"?l+=this.indentate(s)+"<"+u+"?"+this.tagEndChar:l+=this.indentate(s)+"<"+u+"/"+this.tagEndChar:typeof L=="object"?this.options.oneListGroup?C+=this.j2x(L,s+1).val:C+=this.processTextOrObjNode(L,u,s):C+=this.buildTextValNode(L,u,"",s))}this.options.oneListGroup&&(C=this.buildObjectNode(C,u,"",s)),l+=C}else if(this.options.attributesGroupName&&u===this.options.attributesGroupName){const v=Object.keys(c[u]),C=v.length;for(let k=0;k<C;k++)f+=this.buildAttrPairStr(v[k],""+c[u][v[k]])}else l+=this.processTextOrObjNode(c[u],u,s);return{attrStr:f,val:l}},m.prototype.buildAttrPairStr=function(c,s){return s=this.options.attributeValueProcessor(c,""+s),s=this.replaceEntitiesValue(s),this.options.suppressBooleanAttributes&&s==="true"?" "+c:" "+c+'="'+s+'"'},m.prototype.buildObjectNode=function(c,s,f,l){if(c==="")return s[0]==="?"?this.indentate(l)+"<"+s+f+"?"+this.tagEndChar:this.indentate(l)+"<"+s+f+this.closeTag(s)+this.tagEndChar;{let u="</"+s+this.tagEndChar,v="";return s[0]==="?"&&(v="?",u=""),!f&&f!==""||c.indexOf("<")!==-1?this.options.commentPropName!==!1&&s===this.options.commentPropName&&v.length===0?this.indentate(l)+"<!--".concat(c,"-->")+this.newLine:this.indentate(l)+"<"+s+f+v+this.tagEndChar+c+this.indentate(l)+u:this.indentate(l)+"<"+s+f+v+">"+c+u}},m.prototype.closeTag=function(c){let s="";return this.options.unpairedTags.indexOf(c)!==-1?this.options.suppressUnpairedNode||(s="/"):s=this.options.suppressEmptyNode?"/":"></".concat(c),s},m.prototype.buildTextValNode=function(c,s,f,l){if(this.options.cdataPropName!==!1&&s===this.options.cdataPropName)return this.indentate(l)+"<![CDATA[".concat(c,"]]>")+this.newLine;if(this.options.commentPropName!==!1&&s===this.options.commentPropName)return this.indentate(l)+"<!--".concat(c,"-->")+this.newLine;if(s[0]==="?")return this.indentate(l)+"<"+s+f+"?"+this.tagEndChar;{let u=this.options.tagValueProcessor(s,c);return u=this.replaceEntitiesValue(u),u===""?this.indentate(l)+"<"+s+f+this.closeTag(s)+this.tagEndChar:this.indentate(l)+"<"+s+f+">"+u+"</"+s+this.tagEndChar}},m.prototype.replaceEntitiesValue=function(c){if(c&&c.length>0&&this.options.processEntities)for(let s=0;s<this.options.entities.length;s++){const f=this.options.entities[s];c=c.replace(f.regex,f.val)}return c},t.exports=m},87:t=>{function n(x,d,w,c){let s="",f=!1;for(let l=0;l<x.length;l++){const u=x[l],v=r(u);let C="";if(C=w.length===0?v:"".concat(w,".").concat(v),v===d.textNodeName){let S=u[v];h(C,d)||(S=d.tagValueProcessor(v,S),S=m(S,d)),f&&(s+=c),s+=S,f=!1;continue}if(v===d.cdataPropName){f&&(s+=c),s+="<![CDATA[".concat(u[v][0][d.textNodeName],"]]>"),f=!1;continue}if(v===d.commentPropName){s+=c+"<!--".concat(u[v][0][d.textNodeName],"-->"),f=!0;continue}if(v[0]==="?"){const S=p(u[":@"],d),_=v==="?xml"?"":c;let E=u[v][0][d.textNodeName];E=E.length!==0?" "+E:"",s+=_+"<".concat(v).concat(E).concat(S,"?>"),f=!0;continue}let k=c;k!==""&&(k+=d.indentBy);const L=p(u[":@"],d),y=c+"<".concat(v).concat(L),A=n(u[v],d,C,k);d.unpairedTags.indexOf(v)!==-1?d.suppressUnpairedNode?s+=y+">":s+=y+"/>":A&&A.length!==0||!d.suppressEmptyNode?A&&A.endsWith(">")?s+=y+">".concat(A).concat(c,"</").concat(v,">"):(s+=y+">",A&&c!==""&&(A.includes("/>")||A.includes("</"))?s+=c+d.indentBy+A+c:s+=A,s+="</".concat(v,">")):s+=y+"/>",f=!0}return s}function r(x){const d=Object.keys(x);for(let w=0;w<d.length;w++){const c=d[w];if(c!==":@")return c}}function p(x,d){let w="";if(x&&!d.ignoreAttributes)for(let c in x){let s=d.attributeValueProcessor(c,x[c]);s=m(s,d),s===!0&&d.suppressBooleanAttributes?w+=" ".concat(c.substr(d.attributeNamePrefix.length)):w+=" ".concat(c.substr(d.attributeNamePrefix.length),'="').concat(s,'"')}return w}function h(x,d){let w=(x=x.substr(0,x.length-d.textNodeName.length-1)).substr(x.lastIndexOf(".")+1);for(let c in d.stopNodes)if(d.stopNodes[c]===x||d.stopNodes[c]==="*."+w)return!0;return!1}function m(x,d){if(x&&x.length>0&&d.processEntities)for(let w=0;w<d.entities.length;w++){const c=d.entities[w];x=x.replace(c.regex,c.val)}return x}t.exports=function(x,d){let w="";return d.format&&d.indentBy.length>0&&(w="\n"),n(x,d,"",w)}},193:(t,n,r)=>{const p=r(705);function h(f,l){let u="";for(;l<f.length&&f[l]!=="'"&&f[l]!=='"';l++)u+=f[l];if(u=u.trim(),u.indexOf(" ")!==-1)throw new Error("External entites are not supported");const v=f[l++];let C="";for(;l<f.length&&f[l]!==v;l++)C+=f[l];return[u,C,l]}function m(f,l){return f[l+1]==="!"&&f[l+2]==="-"&&f[l+3]==="-"}function x(f,l){return f[l+1]==="!"&&f[l+2]==="E"&&f[l+3]==="N"&&f[l+4]==="T"&&f[l+5]==="I"&&f[l+6]==="T"&&f[l+7]==="Y"}function d(f,l){return f[l+1]==="!"&&f[l+2]==="E"&&f[l+3]==="L"&&f[l+4]==="E"&&f[l+5]==="M"&&f[l+6]==="E"&&f[l+7]==="N"&&f[l+8]==="T"}function w(f,l){return f[l+1]==="!"&&f[l+2]==="A"&&f[l+3]==="T"&&f[l+4]==="T"&&f[l+5]==="L"&&f[l+6]==="I"&&f[l+7]==="S"&&f[l+8]==="T"}function c(f,l){return f[l+1]==="!"&&f[l+2]==="N"&&f[l+3]==="O"&&f[l+4]==="T"&&f[l+5]==="A"&&f[l+6]==="T"&&f[l+7]==="I"&&f[l+8]==="O"&&f[l+9]==="N"}function s(f){if(p.isName(f))return f;throw new Error("Invalid entity name ".concat(f))}t.exports=function(f,l){const u={};if(f[l+3]!=="O"||f[l+4]!=="C"||f[l+5]!=="T"||f[l+6]!=="Y"||f[l+7]!=="P"||f[l+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{l+=9;let v=1,C=!1,k=!1,L="";for(;l<f.length;l++)if(f[l]!=="<"||k)if(f[l]===">"){if(k?f[l-1]==="-"&&f[l-2]==="-"&&(k=!1,v--):v--,v===0)break}else f[l]==="["?C=!0:L+=f[l];else{if(C&&x(f,l))l+=7,[entityName,val,l]=h(f,l+1),val.indexOf("&")===-1&&(u[s(entityName)]={regx:RegExp("&".concat(entityName,";"),"g"),val});else if(C&&d(f,l))l+=8;else if(C&&w(f,l))l+=8;else if(C&&c(f,l))l+=9;else{if(!m)throw new Error("Invalid DOCTYPE");k=!0}v++,L=""}if(v!==0)throw new Error("Unclosed DOCTYPE")}return{entities:u,i:l}}},63:(t,n)=>{const r={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(p,h){return h},attributeValueProcessor:function(p,h){return h},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(p,h,m){return p}};n.buildOptions=function(p){return Object.assign({},r,p)},n.defaultOptions=r},299:(t,n,r)=>{const p=r(705),h=r(365),m=r(193),x=r(494);function d(_){const E=Object.keys(_);for(let T=0;T<E.length;T++){const N=E[T];this.lastEntities[N]={regex:new RegExp("&"+N+";","g"),val:_[N]}}}function w(_,E,T,N,I,M,D){if(_!==void 0&&(this.options.trimValues&&!N&&(_=_.trim()),_.length>0)){D||(_=this.replaceEntitiesValue(_));const $=this.options.tagValueProcessor(E,_,T,I,M);return $==null?_:typeof $!=typeof _||$!==_?$:this.options.trimValues||_.trim()===_?S(_,this.options.parseTagValue,this.options.numberParseOptions):_}}function c(_){if(this.options.removeNSPrefix){const E=_.split(":"),T=_.charAt(0)==="/"?"/":"";if(E[0]==="xmlns")return"";E.length===2&&(_=T+E[1])}return _}"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,p.nameRegexp);const s=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function f(_,E,T){if(!this.options.ignoreAttributes&&typeof _=="string"){const N=p.getAllMatches(_,s),I=N.length,M={};for(let D=0;D<I;D++){const $=this.resolveNameSpace(N[D][1]);let F=N[D][4],W=this.options.attributeNamePrefix+$;if($.length)if(this.options.transformAttributeName&&(W=this.options.transformAttributeName(W)),W==="__proto__"&&(W="#__proto__"),F!==void 0){this.options.trimValues&&(F=F.trim()),F=this.replaceEntitiesValue(F);const tt=this.options.attributeValueProcessor($,F,E);M[W]=tt==null?F:typeof tt!=typeof F||tt!==F?tt:S(F,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(M[W]=!0)}if(!Object.keys(M).length)return;if(this.options.attributesGroupName){const D={};return D[this.options.attributesGroupName]=M,D}return M}}const l=function(_){_=_.replace(/\r\n?/g,"\n");const E=new h("!xml");let T=E,N="",I="";for(let M=0;M<_.length;M++)if(_[M]==="<")if(_[M+1]==="/"){const D=L(_,">",M,"Closing Tag is not closed.");let $=_.substring(M+2,D).trim();if(this.options.removeNSPrefix){const tt=$.indexOf(":");tt!==-1&&($=$.substr(tt+1))}this.options.transformTagName&&($=this.options.transformTagName($)),T&&(N=this.saveTextToParentTag(N,T,I));const F=I.substring(I.lastIndexOf(".")+1);if($&&this.options.unpairedTags.indexOf($)!==-1)throw new Error("Unpaired tag can not be used as closing tag: </".concat($,">"));let W=0;F&&this.options.unpairedTags.indexOf(F)!==-1?(W=I.lastIndexOf(".",I.lastIndexOf(".")-1),this.tagsNodeStack.pop()):W=I.lastIndexOf("."),I=I.substring(0,W),T=this.tagsNodeStack.pop(),N="",M=D}else if(_[M+1]==="?"){let D=y(_,M,!1,"?>");if(!D)throw new Error("Pi Tag is not closed.");if(N=this.saveTextToParentTag(N,T,I),!(this.options.ignoreDeclaration&&D.tagName==="?xml"||this.options.ignorePiTags)){const $=new h(D.tagName);$.add(this.options.textNodeName,""),D.tagName!==D.tagExp&&D.attrExpPresent&&($[":@"]=this.buildAttributesMap(D.tagExp,I,D.tagName)),this.addChild(T,$,I)}M=D.closeIndex+1}else if(_.substr(M+1,3)==="!--"){const D=L(_,"-->",M+4,"Comment is not closed.");if(this.options.commentPropName){const $=_.substring(M+4,D-2);N=this.saveTextToParentTag(N,T,I),T.add(this.options.commentPropName,[{[this.options.textNodeName]:$}])}M=D}else if(_.substr(M+1,2)==="!D"){const D=m(_,M);this.docTypeEntities=D.entities,M=D.i}else if(_.substr(M+1,2)==="!["){const D=L(_,"]]>",M,"CDATA is not closed.")-2,$=_.substring(M+9,D);if(N=this.saveTextToParentTag(N,T,I),this.options.cdataPropName)T.add(this.options.cdataPropName,[{[this.options.textNodeName]:$}]);else{let F=this.parseTextData($,T.tagname,I,!0,!1,!0);F==null&&(F=""),T.add(this.options.textNodeName,F)}M=D+2}else{let D=y(_,M,this.options.removeNSPrefix),$=D.tagName,F=D.tagExp,W=D.attrExpPresent,tt=D.closeIndex;this.options.transformTagName&&($=this.options.transformTagName($)),T&&N&&T.tagname!=="!xml"&&(N=this.saveTextToParentTag(N,T,I,!1));const at=T;if(at&&this.options.unpairedTags.indexOf(at.tagname)!==-1&&(T=this.tagsNodeStack.pop(),I=I.substring(0,I.lastIndexOf("."))),$!==E.tagname&&(I+=I?"."+$:$),this.isItStopNode(this.options.stopNodes,I,$)){let Y="";if(F.length>0&&F.lastIndexOf("/")===F.length-1)M=D.closeIndex;else if(this.options.unpairedTags.indexOf($)!==-1)M=D.closeIndex;else{const it=this.readStopNodeData(_,$,tt+1);if(!it)throw new Error("Unexpected end of ".concat($));M=it.i,Y=it.tagContent}const nt=new h($);$!==F&&W&&(nt[":@"]=this.buildAttributesMap(F,I,$)),Y&&(Y=this.parseTextData(Y,$,I,!0,W,!0,!0)),I=I.substr(0,I.lastIndexOf(".")),nt.add(this.options.textNodeName,Y),this.addChild(T,nt,I)}else{if(F.length>0&&F.lastIndexOf("/")===F.length-1){$[$.length-1]==="/"?($=$.substr(0,$.length-1),I=I.substr(0,I.length-1),F=$):F=F.substr(0,F.length-1),this.options.transformTagName&&($=this.options.transformTagName($));const Y=new h($);$!==F&&W&&(Y[":@"]=this.buildAttributesMap(F,I,$)),this.addChild(T,Y,I),I=I.substr(0,I.lastIndexOf("."))}else{const Y=new h($);this.tagsNodeStack.push(T),$!==F&&W&&(Y[":@"]=this.buildAttributesMap(F,I,$)),this.addChild(T,Y,I),T=Y}N="",M=tt}}else N+=_[M];return E.child};function u(_,E,T){const N=this.options.updateTag(E.tagname,T,E[":@"]);N===!1||(typeof N=="string"&&(E.tagname=N),_.addChild(E))}const v=function(_){if(this.options.processEntities){for(let E in this.docTypeEntities){const T=this.docTypeEntities[E];_=_.replace(T.regx,T.val)}for(let E in this.lastEntities){const T=this.lastEntities[E];_=_.replace(T.regex,T.val)}if(this.options.htmlEntities)for(let E in this.htmlEntities){const T=this.htmlEntities[E];_=_.replace(T.regex,T.val)}_=_.replace(this.ampEntity.regex,this.ampEntity.val)}return _};function C(_,E,T,N){return _&&(N===void 0&&(N=Object.keys(E.child).length===0),(_=this.parseTextData(_,E.tagname,T,!1,!!E[":@"]&&Object.keys(E[":@"]).length!==0,N))!==void 0&&_!==""&&E.add(this.options.textNodeName,_),_=""),_}function k(_,E,T){const N="*."+T;for(const I in _){const M=_[I];if(N===M||E===M)return!0}return!1}function L(_,E,T,N){const I=_.indexOf(E,T);if(I===-1)throw new Error(N);return I+E.length-1}function y(_,E,T){const N=function(W,tt){let at,Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:">",nt="";for(let it=tt;it<W.length;it++){let st=W[it];if(at)st===at&&(at="");else if(st==='"'||st==="'")at=st;else if(st===Y[0]){if(!Y[1])return{data:nt,index:it};if(W[it+1]===Y[1])return{data:nt,index:it}}else st==="	"&&(st=" ");nt+=st}}(_,E+1,arguments.length>3&&arguments[3]!==void 0?arguments[3]:">");if(!N)return;let I=N.data;const M=N.index,D=I.search(/\s/);let $=I,F=!0;if(D!==-1&&($=I.substr(0,D).replace(/\s\s*$/,""),I=I.substr(D+1)),T){const W=$.indexOf(":");W!==-1&&($=$.substr(W+1),F=$!==N.data.substr(W+1))}return{tagName:$,tagExp:I,closeIndex:M,attrExpPresent:F}}function A(_,E,T){const N=T;let I=1;for(;T<_.length;T++)if(_[T]==="<")if(_[T+1]==="/"){const M=L(_,">",T,"".concat(E," is not closed"));if(_.substring(T+2,M).trim()===E&&(I--,I===0))return{tagContent:_.substring(N,T),i:M};T=M}else if(_[T+1]==="?")T=L(_,"?>",T+1,"StopNode is not closed.");else if(_.substr(T+1,3)==="!--")T=L(_,"-->",T+3,"StopNode is not closed.");else if(_.substr(T+1,2)==="![")T=L(_,"]]>",T,"StopNode is not closed.")-2;else{const M=y(_,T,">");M&&((M&&M.tagName)===E&&M.tagExp[M.tagExp.length-1]!=="/"&&I++,T=M.closeIndex)}}function S(_,E,T){if(E&&typeof _=="string"){const N=_.trim();return N==="true"||N!=="false"&&x(_,T)}return p.isExist(_)?_:""}t.exports=class{constructor(_){this.options=_,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=d,this.parseXml=l,this.parseTextData=w,this.resolveNameSpace=c,this.buildAttributesMap=f,this.isItStopNode=k,this.replaceEntitiesValue=v,this.readStopNodeData=A,this.saveTextToParentTag=C,this.addChild=u}}},338:(t,n,r)=>{const{buildOptions:p}=r(63),h=r(299),{prettify:m}=r(728),x=r(31);t.exports=class{constructor(d){this.externalEntities={},this.options=p(d)}parse(d,w){if(typeof d!="string"){if(!d.toString)throw new Error("XML data is accepted in String or Bytes[] form.");d=d.toString()}if(w){w===!0&&(w={});const f=x.validate(d,w);if(f!==!0)throw Error("".concat(f.err.msg,":").concat(f.err.line,":").concat(f.err.col))}const c=new h(this.options);c.addExternalEntities(this.externalEntities);const s=c.parseXml(d);return this.options.preserveOrder||s===void 0?s:m(s,this.options)}addEntity(d,w){if(w.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(d.indexOf("&")!==-1||d.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(w==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[d]=w}}},728:(t,n)=>{function r(x,d,w){let c;const s={};for(let f=0;f<x.length;f++){const l=x[f],u=p(l);let v="";if(v=w===void 0?u:w+"."+u,u===d.textNodeName)c===void 0?c=l[u]:c+=""+l[u];else{if(u===void 0)continue;if(l[u]){let C=r(l[u],d,v);const k=m(C,d);l[":@"]?h(C,l[":@"],v,d):Object.keys(C).length!==1||C[d.textNodeName]===void 0||d.alwaysCreateTextNode?Object.keys(C).length===0&&(d.alwaysCreateTextNode?C[d.textNodeName]="":C=""):C=C[d.textNodeName],s[u]!==void 0&&s.hasOwnProperty(u)?(Array.isArray(s[u])||(s[u]=[s[u]]),s[u].push(C)):d.isArray(u,v,k)?s[u]=[C]:s[u]=C}}}return typeof c=="string"?c.length>0&&(s[d.textNodeName]=c):c!==void 0&&(s[d.textNodeName]=c),s}function p(x){const d=Object.keys(x);for(let w=0;w<d.length;w++){const c=d[w];if(c!==":@")return c}}function h(x,d,w,c){if(d){const s=Object.keys(d),f=s.length;for(let l=0;l<f;l++){const u=s[l];c.isArray(u,w+"."+u,!0,!0)?x[u]=[d[u]]:x[u]=d[u]}}}function m(x,d){const{textNodeName:w}=d,c=Object.keys(x).length;return c===0||!(c!==1||!x[w]&&typeof x[w]!="boolean"&&x[w]!==0)}n.prettify=function(x,d){return r(x,d)}},365:t=>{t.exports=class{constructor(n){this.tagname=n,this.child=[],this[":@"]={}}add(n,r){n==="__proto__"&&(n="#__proto__"),this.child.push({[n]:r})}addChild(n){n.tagname==="__proto__"&&(n.tagname="#__proto__"),n[":@"]&&Object.keys(n[":@"]).length>0?this.child.push({[n.tagname]:n.child,":@":n[":@"]}):this.child.push({[n.tagname]:n.child})}}},135:t=>{function n(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}t.exports=function(r){return r!=null&&(n(r)||function(p){return typeof p.readFloatLE=="function"&&typeof p.slice=="function"&&n(p.slice(0,0))}(r)||!!r._isBuffer)}},542:(t,n,r)=>{var p,h,m,x,d;p=r(298),h=r(526).utf8,m=r(135),x=r(526).bin,(d=function(w,c){w.constructor==String?w=c&&c.encoding==="binary"?x.stringToBytes(w):h.stringToBytes(w):m(w)?w=Array.prototype.slice.call(w,0):Array.isArray(w)||w.constructor===Uint8Array||(w=w.toString());for(var s=p.bytesToWords(w),f=8*w.length,l=1732584193,u=-271733879,v=-1732584194,C=271733878,k=0;k<s.length;k++)s[k]=16711935&(s[k]<<8|s[k]>>>24)|4278255360&(s[k]<<24|s[k]>>>8);s[f>>>5]|=128<<f%32,s[14+(f+64>>>9<<4)]=f;var L=d._ff,y=d._gg,A=d._hh,S=d._ii;for(k=0;k<s.length;k+=16){var _=l,E=u,T=v,N=C;l=L(l,u,v,C,s[k+0],7,-680876936),C=L(C,l,u,v,s[k+1],12,-389564586),v=L(v,C,l,u,s[k+2],17,606105819),u=L(u,v,C,l,s[k+3],22,-1044525330),l=L(l,u,v,C,s[k+4],7,-176418897),C=L(C,l,u,v,s[k+5],12,1200080426),v=L(v,C,l,u,s[k+6],17,-1473231341),u=L(u,v,C,l,s[k+7],22,-45705983),l=L(l,u,v,C,s[k+8],7,1770035416),C=L(C,l,u,v,s[k+9],12,-1958414417),v=L(v,C,l,u,s[k+10],17,-42063),u=L(u,v,C,l,s[k+11],22,-1990404162),l=L(l,u,v,C,s[k+12],7,1804603682),C=L(C,l,u,v,s[k+13],12,-40341101),v=L(v,C,l,u,s[k+14],17,-1502002290),l=y(l,u=L(u,v,C,l,s[k+15],22,1236535329),v,C,s[k+1],5,-165796510),C=y(C,l,u,v,s[k+6],9,-1069501632),v=y(v,C,l,u,s[k+11],14,643717713),u=y(u,v,C,l,s[k+0],20,-373897302),l=y(l,u,v,C,s[k+5],5,-701558691),C=y(C,l,u,v,s[k+10],9,38016083),v=y(v,C,l,u,s[k+15],14,-660478335),u=y(u,v,C,l,s[k+4],20,-405537848),l=y(l,u,v,C,s[k+9],5,568446438),C=y(C,l,u,v,s[k+14],9,-1019803690),v=y(v,C,l,u,s[k+3],14,-187363961),u=y(u,v,C,l,s[k+8],20,1163531501),l=y(l,u,v,C,s[k+13],5,-1444681467),C=y(C,l,u,v,s[k+2],9,-51403784),v=y(v,C,l,u,s[k+7],14,1735328473),l=A(l,u=y(u,v,C,l,s[k+12],20,-1926607734),v,C,s[k+5],4,-378558),C=A(C,l,u,v,s[k+8],11,-2022574463),v=A(v,C,l,u,s[k+11],16,1839030562),u=A(u,v,C,l,s[k+14],23,-35309556),l=A(l,u,v,C,s[k+1],4,-1530992060),C=A(C,l,u,v,s[k+4],11,1272893353),v=A(v,C,l,u,s[k+7],16,-155497632),u=A(u,v,C,l,s[k+10],23,-1094730640),l=A(l,u,v,C,s[k+13],4,681279174),C=A(C,l,u,v,s[k+0],11,-358537222),v=A(v,C,l,u,s[k+3],16,-722521979),u=A(u,v,C,l,s[k+6],23,76029189),l=A(l,u,v,C,s[k+9],4,-640364487),C=A(C,l,u,v,s[k+12],11,-421815835),v=A(v,C,l,u,s[k+15],16,530742520),l=S(l,u=A(u,v,C,l,s[k+2],23,-995338651),v,C,s[k+0],6,-198630844),C=S(C,l,u,v,s[k+7],10,1126891415),v=S(v,C,l,u,s[k+14],15,-1416354905),u=S(u,v,C,l,s[k+5],21,-57434055),l=S(l,u,v,C,s[k+12],6,1700485571),C=S(C,l,u,v,s[k+3],10,-1894986606),v=S(v,C,l,u,s[k+10],15,-1051523),u=S(u,v,C,l,s[k+1],21,-2054922799),l=S(l,u,v,C,s[k+8],6,1873313359),C=S(C,l,u,v,s[k+15],10,-30611744),v=S(v,C,l,u,s[k+6],15,-1560198380),u=S(u,v,C,l,s[k+13],21,1309151649),l=S(l,u,v,C,s[k+4],6,-145523070),C=S(C,l,u,v,s[k+11],10,-1120210379),v=S(v,C,l,u,s[k+2],15,718787259),u=S(u,v,C,l,s[k+9],21,-343485551),l=l+_>>>0,u=u+E>>>0,v=v+T>>>0,C=C+N>>>0}return p.endian([l,u,v,C])})._ff=function(w,c,s,f,l,u,v){var C=w+(c&s|~c&f)+(l>>>0)+v;return(C<<u|C>>>32-u)+c},d._gg=function(w,c,s,f,l,u,v){var C=w+(c&f|s&~f)+(l>>>0)+v;return(C<<u|C>>>32-u)+c},d._hh=function(w,c,s,f,l,u,v){var C=w+(c^s^f)+(l>>>0)+v;return(C<<u|C>>>32-u)+c},d._ii=function(w,c,s,f,l,u,v){var C=w+(s^(c|~f))+(l>>>0)+v;return(C<<u|C>>>32-u)+c},d._blocksize=16,d._digestsize=16,t.exports=function(w,c){if(w==null)throw new Error("Illegal argument "+w);var s=p.wordsToBytes(d(w,c));return c&&c.asBytes?s:c&&c.asString?x.bytesToString(s):p.bytesToHex(s)}},285:(t,n,r)=>{var p=r(2);t.exports=function(L){return L?(L.substr(0,2)==="{}"&&(L="\\{\\}"+L.substr(2)),k(function(y){return y.split("\\\\").join(h).split("\\{").join(m).split("\\}").join(x).split("\\,").join(d).split("\\.").join(w)}(L),!0).map(s)):[]};var h="\0SLASH"+Math.random()+"\0",m="\0OPEN"+Math.random()+"\0",x="\0CLOSE"+Math.random()+"\0",d="\0COMMA"+Math.random()+"\0",w="\0PERIOD"+Math.random()+"\0";function c(L){return parseInt(L,10)==L?parseInt(L,10):L.charCodeAt(0)}function s(L){return L.split(h).join("\\").split(m).join("{").split(x).join("}").split(d).join(",").split(w).join(".")}function f(L){if(!L)return[""];var y=[],A=p("{","}",L);if(!A)return L.split(",");var S=A.pre,_=A.body,E=A.post,T=S.split(",");T[T.length-1]+="{"+_+"}";var N=f(E);return E.length&&(T[T.length-1]+=N.shift(),T.push.apply(T,N)),y.push.apply(y,T),y}function l(L){return"{"+L+"}"}function u(L){return/^-?0\d/.test(L)}function v(L,y){return L<=y}function C(L,y){return L>=y}function k(L,y){var A=[],S=p("{","}",L);if(!S)return[L];var _=S.pre,E=S.post.length?k(S.post,!1):[""];if(/\$$/.test(S.pre))for(var T=0;T<E.length;T++){var N=_+"{"+S.body+"}"+E[T];A.push(N)}else{var I,M,D=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(S.body),$=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(S.body),F=D||$,W=S.body.indexOf(",")>=0;if(!F&&!W)return S.post.match(/,.*\}/)?k(L=S.pre+"{"+S.body+x+S.post):[L];if(F)I=S.body.split(/\.\./);else if((I=f(S.body)).length===1&&(I=k(I[0],!1).map(l)).length===1)return E.map(function(ge){return S.pre+I[0]+ge});if(F){var tt=c(I[0]),at=c(I[1]),Y=Math.max(I[0].length,I[1].length),nt=I.length==3?Math.abs(c(I[2])):1,it=v;at<tt&&(nt*=-1,it=C);var st=I.some(u);M=[];for(var Q=tt;it(Q,at);Q+=nt){var _t;if($)(_t=String.fromCharCode(Q))==="\\"&&(_t="");else if(_t=String(Q),st){var Qt=Y-_t.length;if(Qt>0){var jt=new Array(Qt+1).join("0");_t=Q<0?"-"+jt+_t.slice(1):jt+_t}}M.push(_t)}}else{M=[];for(var kt=0;kt<I.length;kt++)M.push.apply(M,k(I[kt],!1))}for(kt=0;kt<M.length;kt++)for(T=0;T<E.length;T++)N=_+M[kt]+E[T],(!y||F||N)&&A.push(N)}return A}},829:t=>{function n(c){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},n(c)}function r(c){var s=typeof Map=="function"?new Map:void 0;return r=function(f){if(f===null||(l=f,Function.toString.call(l).indexOf("[native code]")===-1))return f;var l;if(typeof f!="function")throw new TypeError("Super expression must either be null or a function");if(s!==void 0){if(s.has(f))return s.get(f);s.set(f,u)}function u(){return p(f,arguments,m(this).constructor)}return u.prototype=Object.create(f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),h(u,f)},r(c)}function p(c,s,f){return p=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(l,u,v){var C=[null];C.push.apply(C,u);var k=new(Function.bind.apply(l,C));return v&&h(k,v.prototype),k},p.apply(null,arguments)}function h(c,s){return h=Object.setPrototypeOf||function(f,l){return f.__proto__=l,f},h(c,s)}function m(c){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)},m(c)}var x=function(c){function s(f){var l;return function(u,v){if(!(u instanceof v))throw new TypeError("Cannot call a class as a function")}(this,s),(l=function(u,v){return!v||n(v)!=="object"&&typeof v!="function"?function(C){if(C===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C}(u):v}(this,m(s).call(this,f))).name="ObjectPrototypeMutationError",l}return function(f,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(l&&l.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),l&&h(f,l)}(s,c),s}(r(Error));function d(c,s){for(var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},l=s.split("."),u=l.length,v=function(L){var y=l[L];if(!c)return{v:void 0};if(y==="+"){if(Array.isArray(c))return{v:c.map(function(S,_){var E=l.slice(L+1);return E.length>0?d(S,E.join("."),f):f(c,_,l,L)})};var A=l.slice(0,L).join(".");throw new Error("Object at wildcard (".concat(A,") is not an array"))}c=f(c,y,l,L)},C=0;C<u;C++){var k=v(C);if(n(k)==="object")return k.v}return c}function w(c,s){return c.length===s+1}t.exports={set:function(c,s,f){if(n(c)!="object"||c===null||s===void 0)return c;if(typeof s=="number")return c[s]=f,c[s];try{return d(c,s,function(l,u,v,C){if(l===Reflect.getPrototypeOf({}))throw new x("Attempting to mutate Object.prototype");if(!l[u]){var k=Number.isInteger(Number(v[C+1])),L=v[C+1]==="+";l[u]=k||L?[]:{}}return w(v,C)&&(l[u]=f),l[u]})}catch(l){if(l instanceof x)throw l;return c}},get:function(c,s){if(n(c)!="object"||c===null||s===void 0)return c;if(typeof s=="number")return c[s];try{return d(c,s,function(f,l){return f[l]})}catch{return c}},has:function(c,s){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n(c)!="object"||c===null||s===void 0)return!1;if(typeof s=="number")return s in c;try{var l=!1;return d(c,s,function(u,v,C,k){if(!w(C,k))return u&&u[v];l=f.own?u.hasOwnProperty(v):v in u}),l}catch{return!1}},hasOwn:function(c,s,f){return this.has(c,s,f||{own:!0})},isIn:function(c,s,f){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(n(c)!="object"||c===null||s===void 0)return!1;try{var u=!1,v=!1;return d(c,s,function(C,k,L,y){return u=u||C===f||!!C&&C[k]===f,v=w(L,y)&&n(C)==="object"&&k in C,C&&C[k]}),l.validPath?u&&v:u}catch{return!1}},ObjectPrototypeMutationError:x}},47:(t,n,r)=>{var p=r(410),h=function(c){return typeof c=="string"};function m(c,s){for(var f=[],l=0;l<c.length;l++){var u=c[l];u&&u!=="."&&(u===".."?f.length&&f[f.length-1]!==".."?f.pop():s&&f.push(".."):f.push(u))}return f}var x=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,d={};function w(c){return x.exec(c).slice(1)}d.resolve=function(){for(var c="",s=!1,f=arguments.length-1;f>=-1&&!s;f--){var l=f>=0?arguments[f]:ae.cwd();if(!h(l))throw new TypeError("Arguments to path.resolve must be strings");l&&(c=l+"/"+c,s=l.charAt(0)==="/")}return(s?"/":"")+(c=m(c.split("/"),!s).join("/"))||"."},d.normalize=function(c){var s=d.isAbsolute(c),f=c.substr(-1)==="/";return(c=m(c.split("/"),!s).join("/"))||s||(c="."),c&&f&&(c+="/"),(s?"/":"")+c},d.isAbsolute=function(c){return c.charAt(0)==="/"},d.join=function(){for(var c="",s=0;s<arguments.length;s++){var f=arguments[s];if(!h(f))throw new TypeError("Arguments to path.join must be strings");f&&(c+=c?"/"+f:f)}return d.normalize(c)},d.relative=function(c,s){function f(y){for(var A=0;A<y.length&&y[A]==="";A++);for(var S=y.length-1;S>=0&&y[S]==="";S--);return A>S?[]:y.slice(A,S+1)}c=d.resolve(c).substr(1),s=d.resolve(s).substr(1);for(var l=f(c.split("/")),u=f(s.split("/")),v=Math.min(l.length,u.length),C=v,k=0;k<v;k++)if(l[k]!==u[k]){C=k;break}var L=[];for(k=C;k<l.length;k++)L.push("..");return(L=L.concat(u.slice(C))).join("/")},d._makeLong=function(c){return c},d.dirname=function(c){var s=w(c),f=s[0],l=s[1];return f||l?(l&&(l=l.substr(0,l.length-1)),f+l):"."},d.basename=function(c,s){var f=w(c)[2];return s&&f.substr(-1*s.length)===s&&(f=f.substr(0,f.length-s.length)),f},d.extname=function(c){return w(c)[3]},d.format=function(c){if(!p.isObject(c))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof c);var s=c.root||"";if(!h(s))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof c.root);return(c.dir?c.dir+d.sep:"")+(c.base||"")},d.parse=function(c){if(!h(c))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof c);var s=w(c);if(!s||s.length!==4)throw new TypeError("Invalid path '"+c+"'");return s[1]=s[1]||"",s[2]=s[2]||"",s[3]=s[3]||"",{root:s[0],dir:s[0]+s[1].slice(0,s[1].length-1),base:s[2],ext:s[3],name:s[2].slice(0,s[2].length-s[3].length)}},d.sep="/",d.delimiter=":",t.exports=d},647:(t,n)=>{var r=Object.prototype.hasOwnProperty;function p(m){try{return decodeURIComponent(m.replace(/\+/g," "))}catch{return null}}function h(m){try{return encodeURIComponent(m)}catch{return null}}n.stringify=function(m,x){x=x||"";var d,w,c=[];for(w in typeof x!="string"&&(x="?"),m)if(r.call(m,w)){if((d=m[w])||d!=null&&!isNaN(d)||(d=""),w=h(w),d=h(d),w===null||d===null)continue;c.push(w+"="+d)}return c.length?x+c.join("&"):""},n.parse=function(m){for(var x,d=/([^=?#&]+)=?([^&]*)/g,w={};x=d.exec(m);){var c=p(x[1]),s=p(x[2]);c===null||s===null||c in w||(w[c]=s)}return w}},670:t=>{t.exports=function(n,r){if(r=r.split(":")[0],!(n=+n))return!1;switch(r){case"http":case"ws":return n!==80;case"https":case"wss":return n!==443;case"ftp":return n!==21;case"gopher":return n!==70;case"file":return!1}return n!==0}},494:t=>{const n=/^[-+]?0x[a-fA-F0-9]+$/,r=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const p={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};t.exports=function(h){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(m=Object.assign({},p,m),!h||typeof h!="string")return h;let x=h.trim();if(m.skipLike!==void 0&&m.skipLike.test(x))return h;if(m.hex&&n.test(x))return Number.parseInt(x,16);{const w=r.exec(x);if(w){const c=w[1],s=w[2];let f=((d=w[3])&&d.indexOf(".")!==-1&&((d=d.replace(/0+$/,""))==="."?d="0":d[0]==="."?d="0"+d:d[d.length-1]==="."&&(d=d.substr(0,d.length-1))),d);const l=w[4]||w[6];if(!m.leadingZeros&&s.length>0&&c&&x[2]!=="."||!m.leadingZeros&&s.length>0&&!c&&x[1]!==".")return h;{const u=Number(x),v=""+u;return v.search(/[eE]/)!==-1||l?m.eNotation?u:h:x.indexOf(".")!==-1?v==="0"&&f===""||v===f||c&&v==="-"+f?u:h:s?f===v||c+f===v?u:h:x===v||x===c+v?u:h}}return h}var d}},737:(t,n,r)=>{var p=r(670),h=r(647),m=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,x=/[\n\r\t]/g,d=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,w=/:\d+$/,c=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,s=/^[a-zA-Z]:/;function f(y){return(y||"").toString().replace(m,"")}var l=[["#","hash"],["?","query"],function(y,A){return C(A.protocol)?y.replace(/\\/g,"/"):y},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],u={hash:1,query:1};function v(y){var A,S=(typeof window<"u"?window:typeof ie<"u"?ie:typeof self<"u"?self:{}).location||{},_={},E=typeof(y=y||S);if(y.protocol==="blob:")_=new L(unescape(y.pathname),{});else if(E==="string")for(A in _=new L(y,{}),u)delete _[A];else if(E==="object"){for(A in y)A in u||(_[A]=y[A]);_.slashes===void 0&&(_.slashes=d.test(y.href))}return _}function C(y){return y==="file:"||y==="ftp:"||y==="http:"||y==="https:"||y==="ws:"||y==="wss:"}function k(y,A){y=(y=f(y)).replace(x,""),A=A||{};var S,_=c.exec(y),E=_[1]?_[1].toLowerCase():"",T=!!_[2],N=!!_[3],I=0;return T?N?(S=_[2]+_[3]+_[4],I=_[2].length+_[3].length):(S=_[2]+_[4],I=_[2].length):N?(S=_[3]+_[4],I=_[3].length):S=_[4],E==="file:"?I>=2&&(S=S.slice(2)):C(E)?S=_[4]:E?T&&(S=S.slice(2)):I>=2&&C(A.protocol)&&(S=_[4]),{protocol:E,slashes:T||C(E),slashesCount:I,rest:S}}function L(y,A,S){if(y=(y=f(y)).replace(x,""),!(this instanceof L))return new L(y,A,S);var _,E,T,N,I,M,D=l.slice(),$=typeof A,F=this,W=0;for($!=="object"&&$!=="string"&&(S=A,A=null),S&&typeof S!="function"&&(S=h.parse),_=!(E=k(y||"",A=v(A))).protocol&&!E.slashes,F.slashes=E.slashes||_&&A.slashes,F.protocol=E.protocol||A.protocol||"",y=E.rest,(E.protocol==="file:"&&(E.slashesCount!==2||s.test(y))||!E.slashes&&(E.protocol||E.slashesCount<2||!C(F.protocol)))&&(D[3]=[/(.*)/,"pathname"]);W<D.length;W++)typeof(N=D[W])!="function"?(T=N[0],M=N[1],T!=T?F[M]=y:typeof T=="string"?~(I=T==="@"?y.lastIndexOf(T):y.indexOf(T))&&(typeof N[2]=="number"?(F[M]=y.slice(0,I),y=y.slice(I+N[2])):(F[M]=y.slice(I),y=y.slice(0,I))):(I=T.exec(y))&&(F[M]=I[1],y=y.slice(0,I.index)),F[M]=F[M]||_&&N[3]&&A[M]||"",N[4]&&(F[M]=F[M].toLowerCase())):y=N(y,F);S&&(F.query=S(F.query)),_&&A.slashes&&F.pathname.charAt(0)!=="/"&&(F.pathname!==""||A.pathname!=="")&&(F.pathname=function(tt,at){if(tt==="")return at;for(var Y=(at||"/").split("/").slice(0,-1).concat(tt.split("/")),nt=Y.length,it=Y[nt-1],st=!1,Q=0;nt--;)Y[nt]==="."?Y.splice(nt,1):Y[nt]===".."?(Y.splice(nt,1),Q++):Q&&(nt===0&&(st=!0),Y.splice(nt,1),Q--);return st&&Y.unshift(""),it!=="."&&it!==".."||Y.push(""),Y.join("/")}(F.pathname,A.pathname)),F.pathname.charAt(0)!=="/"&&C(F.protocol)&&(F.pathname="/"+F.pathname),p(F.port,F.protocol)||(F.host=F.hostname,F.port=""),F.username=F.password="",F.auth&&(~(I=F.auth.indexOf(":"))?(F.username=F.auth.slice(0,I),F.username=encodeURIComponent(decodeURIComponent(F.username)),F.password=F.auth.slice(I+1),F.password=encodeURIComponent(decodeURIComponent(F.password))):F.username=encodeURIComponent(decodeURIComponent(F.auth)),F.auth=F.password?F.username+":"+F.password:F.username),F.origin=F.protocol!=="file:"&&C(F.protocol)&&F.host?F.protocol+"//"+F.host:"null",F.href=F.toString()}L.prototype={set:function(y,A,S){var _=this;switch(y){case"query":typeof A=="string"&&A.length&&(A=(S||h.parse)(A)),_[y]=A;break;case"port":_[y]=A,p(A,_.protocol)?A&&(_.host=_.hostname+":"+A):(_.host=_.hostname,_[y]="");break;case"hostname":_[y]=A,_.port&&(A+=":"+_.port),_.host=A;break;case"host":_[y]=A,w.test(A)?(A=A.split(":"),_.port=A.pop(),_.hostname=A.join(":")):(_.hostname=A,_.port="");break;case"protocol":_.protocol=A.toLowerCase(),_.slashes=!S;break;case"pathname":case"hash":if(A){var E=y==="pathname"?"/":"#";_[y]=A.charAt(0)!==E?E+A:A}else _[y]=A;break;case"username":case"password":_[y]=encodeURIComponent(A);break;case"auth":var T=A.indexOf(":");~T?(_.username=A.slice(0,T),_.username=encodeURIComponent(decodeURIComponent(_.username)),_.password=A.slice(T+1),_.password=encodeURIComponent(decodeURIComponent(_.password))):_.username=encodeURIComponent(decodeURIComponent(A))}for(var N=0;N<l.length;N++){var I=l[N];I[4]&&(_[I[1]]=_[I[1]].toLowerCase())}return _.auth=_.password?_.username+":"+_.password:_.username,_.origin=_.protocol!=="file:"&&C(_.protocol)&&_.host?_.protocol+"//"+_.host:"null",_.href=_.toString(),_},toString:function(y){y&&typeof y=="function"||(y=h.stringify);var A,S=this,_=S.host,E=S.protocol;E&&E.charAt(E.length-1)!==":"&&(E+=":");var T=E+(S.protocol&&S.slashes||C(S.protocol)?"//":"");return S.username?(T+=S.username,S.password&&(T+=":"+S.password),T+="@"):S.password?(T+=":"+S.password,T+="@"):S.protocol!=="file:"&&C(S.protocol)&&!_&&S.pathname!=="/"&&(T+="@"),(_[_.length-1]===":"||w.test(S.hostname)&&!S.port)&&(_+=":"),T+=_+S.pathname,(A=typeof S.query=="object"?y(S.query):S.query)&&(T+=A.charAt(0)!=="?"?"?"+A:A),S.hash&&(T+=S.hash),T}},L.extractProtocol=k,L.location=v,L.trimLeft=f,L.qs=h,t.exports=L},410:()=>{},388:()=>{},805:()=>{},800:()=>{}},vr={};function rt(t){var n=vr[t];if(n!==void 0)return n.exports;var r=vr[t]={id:t,loaded:!1,exports:{}};return Kl[t].call(r.exports,r,r.exports,rt),r.loaded=!0,r.exports}rt.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return rt.d(n,{a:n}),n},rt.d=(t,n)=>{for(var r in n)rt.o(n,r)&&!rt.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},rt.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),rt.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var At={};(()=>{rt.d(At,{hT:()=>D,O4:()=>$,Kd:()=>I,YK:()=>M,UU:()=>ei,Gu:()=>it,ky:()=>En,h4:()=>zt,hq:()=>Et,i5:()=>In});var t=rt(737),n=rt.n(t);function r(o){if(!p(o))throw new Error("Parameter was not an error")}function p(o){return e=o,Object.prototype.toString.call(e)==="[object Error]"||o instanceof Error;var e}class h extends Error{constructor(e,i){const a=[...arguments],{options:b,shortMessage:g}=function(P){let j,R="";if(P.length===0)j={};else if(p(P[0]))j={cause:P[0]},R=P.slice(1).join(" ")||"";else if(P[0]&&typeof P[0]=="object")j=Object.assign({},P[0]),R=P.slice(1).join(" ")||"";else{if(typeof P[0]!="string")throw new Error("Invalid arguments passed to Layerr");j={},R=R=P.join(" ")||""}return{options:j,shortMessage:R}}(a);let O=g;if(b.cause&&(O="".concat(O,": ").concat(b.cause.message)),super(O),this.message=O,b.name&&typeof b.name=="string"?this.name=b.name:this.name="Layerr",b.cause&&Object.defineProperty(this,"_cause",{value:b.cause}),Object.defineProperty(this,"_info",{value:{}}),b.info&&typeof b.info=="object"&&Object.assign(this._info,b.info),Error.captureStackTrace){const P=b.constructorOpt||this.constructor;Error.captureStackTrace(this,P)}}static cause(e){return r(e),e._cause&&p(e._cause)?e._cause:null}static fullStack(e){r(e);const i=h.cause(e);return i?"".concat(e.stack,"\ncaused by: ").concat(h.fullStack(i)):e.stack}static info(e){r(e);const i={},a=h.cause(e);return a&&Object.assign(i,h.info(a)),e._info&&Object.assign(i,e._info),i}cause(){return h.cause(this)}toString(){let e=this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(e="".concat(e,": ").concat(this.message)),e}}var m=rt(47),x=rt.n(m);const d="__PATH_SEPARATOR_POSIX__",w="__PATH_SEPARATOR_WINDOWS__";function c(o){try{const e=o.replace(/\//g,d).replace(/\\\\/g,w);return encodeURIComponent(e).split(w).join("\\\\").split(d).join("/")}catch(e){throw new h(e,"Failed encoding path")}}function s(o){return o.startsWith("/")?o:"/"+o}function f(o){let e=o;return e[0]!=="/"&&(e="/"+e),/^.+\/$/.test(e)&&(e=e.substr(0,e.length-1)),e}function l(o){let e=new(n())(o).pathname;return e.length<=0&&(e="/"),f(e)}function u(){for(var o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];return function(){return function(a){var b=[];if(a.length===0)return"";if(typeof a[0]!="string")throw new TypeError("Url must be a string. Received "+a[0]);if(a[0].match(/^[^/:]+:\/*$/)&&a.length>1){var g=a.shift();a[0]=g+a[0]}a[0].match(/^file:\/\/\//)?a[0]=a[0].replace(/^([^/:]+):\/*/,"$1:///"):a[0]=a[0].replace(/^([^/:]+):\/*/,"$1://");for(var O=0;O<a.length;O++){var P=a[O];if(typeof P!="string")throw new TypeError("Url must be a string. Received "+P);P!==""&&(O>0&&(P=P.replace(/^[\/]+/,"")),P=O<a.length-1?P.replace(/[\/]+$/,""):P.replace(/[\/]+$/,"/"),b.push(P))}var j=b.join("/"),R=(j=j.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return R.shift()+(R.length>0?"?":"")+R.join("&")}(typeof arguments[0]=="object"?arguments[0]:[].slice.call(arguments))}(e.reduce((a,b,g)=>((g===0||b!=="/"||b==="/"&&a[a.length-1]!=="/")&&a.push(b),a),[]))}var v=rt(542),C=rt.n(v);const k="abcdef0123456789";function L(o,e){const i=o.url.replace("//",""),a=i.indexOf("/")==-1?"/":i.slice(i.indexOf("/")),b=o.method?o.method.toUpperCase():"GET",g=!!/(^|,)\s*auth\s*($|,)/.test(e.qop)&&"auth",O="00000000".concat(e.nc).slice(-8),P=function(Z,J,q,z,V,X,G){const H=G||C()("".concat(J,":").concat(q,":").concat(z));return Z&&Z.toLowerCase()==="md5-sess"?C()("".concat(H,":").concat(V,":").concat(X)):H}(e.algorithm,e.username,e.realm,e.password,e.nonce,e.cnonce,e.ha1),j=C()("".concat(b,":").concat(a)),R=g?C()("".concat(P,":").concat(e.nonce,":").concat(O,":").concat(e.cnonce,":").concat(g,":").concat(j)):C()("".concat(P,":").concat(e.nonce,":").concat(j)),B={username:e.username,realm:e.realm,nonce:e.nonce,uri:a,qop:g,response:R,nc:O,cnonce:e.cnonce,algorithm:e.algorithm,opaque:e.opaque},U=[];for(const Z in B)B[Z]&&(Z==="qop"||Z==="nc"||Z==="algorithm"?U.push("".concat(Z,"=").concat(B[Z])):U.push("".concat(Z,'="').concat(B[Z],'"')));return"Digest ".concat(U.join(", "))}function y(o){return(o.headers&&o.headers.get("www-authenticate")||"").split(/\s/)[0].toLowerCase()==="digest"}var A=rt(101),S=rt.n(A);function _(o){return S().decode(o)}function E(o,e){const i=(a="".concat(o,":").concat(e),S().encode(a));var a;return"Basic ".concat(i)}const T=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:typeof window<"u"?window:globalThis,N=T.fetch.bind(T),I=T.Request,M=T.Response;let D=function(o){return o.Auto="auto",o.Digest="digest",o.None="none",o.Password="password",o.Token="token",o}({}),$=function(o){return o.DataTypeNoLength="data-type-no-length",o.InvalidAuthType="invalid-auth-type",o.InvalidOutputFormat="invalid-output-format",o.LinkUnsupportedAuthType="link-unsupported-auth",o.InvalidUpdateRange="invalid-update-range",o.NotSupported="not-supported",o}({});function F(o,e,i,a,b){switch(o.authType){case D.Auto:e&&i&&(o.headers.Authorization=E(e,i));break;case D.Digest:o.digest=function(O,P,j){return{username:O,password:P,ha1:j,nc:0,algorithm:"md5",hasDigestAuth:!1}}(e,i,b);break;case D.None:break;case D.Password:o.headers.Authorization=E(e,i);break;case D.Token:o.headers.Authorization="".concat((g=a).token_type," ").concat(g.access_token);break;default:throw new h({info:{code:$.InvalidAuthType}},"Invalid auth type: ".concat(o.authType))}var g}rt(800);const W="@@HOTPATCHER",tt=()=>{};function at(o){return{original:o,methods:[o],final:!1}}class Y{constructor(){this._configuration={registry:{},getEmptyAction:"null"},this.__type__=W}get configuration(){return this._configuration}get getEmptyAction(){return this.configuration.getEmptyAction}set getEmptyAction(e){this.configuration.getEmptyAction=e}control(e){let i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!e||e.__type__!==W)throw new Error("Failed taking control of target HotPatcher instance: Invalid type or object");return Object.keys(e.configuration.registry).forEach(a=>{this.configuration.registry.hasOwnProperty(a)?i&&(this.configuration.registry[a]=Object.assign({},e.configuration.registry[a])):this.configuration.registry[a]=Object.assign({},e.configuration.registry[a])}),e._configuration=this.configuration,this}execute(e){const i=this.get(e)||tt;for(var a=arguments.length,b=new Array(a>1?a-1:0),g=1;g<a;g++)b[g-1]=arguments[g];return i(...b)}get(e){const i=this.configuration.registry[e];if(!i)switch(this.getEmptyAction){case"null":return null;case"throw":throw new Error("Failed handling method request: No method provided for override: ".concat(e));default:throw new Error("Failed handling request which resulted in an empty method: Invalid empty-action specified: ".concat(this.getEmptyAction))}return function(){for(var a=arguments.length,b=new Array(a),g=0;g<a;g++)b[g]=arguments[g];if(b.length===0)throw new Error("Failed creating sequence: No functions provided");return function(){for(var O=arguments.length,P=new Array(O),j=0;j<O;j++)P[j]=arguments[j];let R=P;const B=this;for(;b.length>0;)R=[b.shift().apply(B,R)];return R[0]}}(...i.methods)}isPatched(e){return!!this.configuration.registry[e]}patch(e,i){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{chain:b=!1}=a;if(this.configuration.registry[e]&&this.configuration.registry[e].final)throw new Error("Failed patching '".concat(e,"': Method marked as being final"));if(typeof i!="function")throw new Error("Failed patching '".concat(e,"': Provided method is not a function"));if(b)this.configuration.registry[e]?this.configuration.registry[e].methods.push(i):this.configuration.registry[e]=at(i);else if(this.isPatched(e)){const{original:g}=this.configuration.registry[e];this.configuration.registry[e]=Object.assign(at(i),{original:g})}else this.configuration.registry[e]=at(i);return this}patchInline(e,i){this.isPatched(e)||this.patch(e,i);for(var a=arguments.length,b=new Array(a>2?a-2:0),g=2;g<a;g++)b[g-2]=arguments[g];return this.execute(e,...b)}plugin(e){for(var i=arguments.length,a=new Array(i>1?i-1:0),b=1;b<i;b++)a[b-1]=arguments[b];return a.forEach(g=>{this.patch(e,g,{chain:!0})}),this}restore(e){if(!this.isPatched(e))throw new Error("Failed restoring method: No method present for key: ".concat(e));if(typeof this.configuration.registry[e].original!="function")throw new Error("Failed restoring method: Original method not found or of invalid type for key: ".concat(e));return this.configuration.registry[e].methods=[this.configuration.registry[e].original],this}setFinal(e){if(!this.configuration.registry.hasOwnProperty(e))throw new Error("Failed marking '".concat(e,"' as final: No method found for key"));return this.configuration.registry[e].final=!0,this}}let nt=null;function it(){return nt||(nt=new Y),nt}function st(o){return function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let i=e;for(;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(e)===i}(o)?Object.assign({},o):Object.setPrototypeOf(Object.assign({},o),Object.getPrototypeOf(o))}function Q(){for(var o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];let a=null,b=[...e];for(;b.length>0;){const g=b.shift();a=a?_t(a,g):st(g)}return a}function _t(o,e){const i=st(o);return Object.keys(e).forEach(a=>{i.hasOwnProperty(a)?Array.isArray(e[a])?i[a]=Array.isArray(i[a])?[...i[a],...e[a]]:[...e[a]]:typeof e[a]=="object"&&e[a]?i[a]=typeof i[a]=="object"&&i[a]?_t(i[a],e[a]):st(e[a]):i[a]=e[a]:i[a]=e[a]}),i}function Qt(o){const e={};for(const i of o.keys())e[i]=o.get(i);return e}function jt(){for(var o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];if(e.length===0)return{};const a={};return e.reduce((b,g)=>(Object.keys(g).forEach(O=>{const P=O.toLowerCase();a.hasOwnProperty(P)?b[a[P]]=g[O]:(a[P]=O,b[O]=g[O])}),b),{})}rt(805);const kt=typeof ArrayBuffer=="function",{toString:ge}=Object.prototype;function bn(o){return kt&&(o instanceof ArrayBuffer||ge.call(o)==="[object ArrayBuffer]")}function yn(o){return o!=null&&o.constructor!=null&&typeof o.constructor.isBuffer=="function"&&o.constructor.isBuffer(o)}function me(o){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return Promise.resolve(o.apply(this,e))}catch(a){return Promise.reject(a)}}}function ve(o,e,i){return i?e?e(o):o:(o&&o.then||(o=Promise.resolve(o)),e?o.then(e):o)}const wn=me(function(o){const e=o._digest;return delete o._digest,e.hasDigestAuth&&(o=Q(o,{headers:{Authorization:L(o,e)}})),ve(Jt(o),function(i){let a=!1;return b=function(O){return a?O:i},(g=function(){if(i.status==401)return e.hasDigestAuth=function(O,P){if(!y(O))return!1;const j=/([a-z0-9_-]+)=(?:"([^"]+)"|([a-z0-9_-]+))/gi;for(;;){const R=O.headers&&O.headers.get("www-authenticate")||"",B=j.exec(R);if(!B)break;P[B[1]]=B[2]||B[3]}return P.nc+=1,P.cnonce=function(){let R="";for(let B=0;B<32;++B)R="".concat(R).concat(k[Math.floor(16*Math.random())]);return R}(),!0}(i,e),function(){if(e.hasDigestAuth)return ve(Jt(o=Q(o,{headers:{Authorization:L(o,e)}})),function(O){return O.status==401?e.hasDigestAuth=!1:e.nc++,a=!0,O})}();e.nc++}())&&g.then?g.then(b):b(g);var b,g})}),eo=me(function(o,e){return ve(Jt(o),function(i){return i.ok?(e.authType=D.Password,i):i.status==401&&y(i)?(e.authType=D.Digest,F(e,e.username,e.password,void 0,void 0),o._digest=e.digest,wn(o)):i})}),ut=me(function(o,e){return e.authType===D.Auto?eo(o,e):o._digest?wn(o):Jt(o)});function pt(o,e,i){const a=st(o);return a.headers=jt(e.headers,a.headers||{},i.headers||{}),i.data!==void 0&&(a.data=i.data),i.signal&&(a.signal=i.signal),e.httpAgent&&(a.httpAgent=e.httpAgent),e.httpsAgent&&(a.httpsAgent=e.httpsAgent),e.digest&&(a._digest=e.digest),typeof e.withCredentials=="boolean"&&(a.withCredentials=e.withCredentials),a}function Jt(o){const e=it();return e.patchInline("request",i=>e.patchInline("fetch",N,i.url,function(a){let b={};const g={method:a.method};if(a.headers&&(b=jt(b,a.headers)),a.data!==void 0){const[O,P]=function(j){if(typeof j=="string")return[j,{}];if(yn(j))return[j,{}];if(bn(j))return[j,{}];if(j&&typeof j=="object")return[JSON.stringify(j),{"content-type":"application/json"}];throw new Error("Unable to convert request body: Unexpected body type: ".concat(typeof j))}(a.data);g.body=O,b=jt(b,P)}return a.signal&&(g.signal=a.signal),a.withCredentials&&(g.credentials="include"),g.headers=b,g}(i)),o)}var no=rt(285);const ro={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Mt=o=>o.replace(/[[\]\\-]/g,"\\$&"),xn=o=>o.join(""),oo=(o,e)=>{const i=e;if(o.charAt(i)!=="[")throw new Error("not in a brace expression");const a=[],b=[];let g=i+1,O=!1,P=!1,j=!1,R=!1,B=i,U="";t:for(;g<o.length;){const z=o.charAt(g);if(z!=="!"&&z!=="^"||g!==i+1){if(z==="]"&&O&&!j){B=g+1;break}if(O=!0,z!=="\\"||j){if(z==="["&&!j){for(const[V,[X,G,H]]of Object.entries(ro))if(o.startsWith(V,g)){if(U)return["$.",!1,o.length-i,!0];g+=V.length,H?b.push(X):a.push(X),P=P||G;continue t}}j=!1,U?(z>U?a.push(Mt(U)+"-"+Mt(z)):z===U&&a.push(Mt(z)),U="",g++):o.startsWith("-]",g+1)?(a.push(Mt(z+"-")),g+=2):o.startsWith("-",g+1)?(U=z,g+=2):(a.push(Mt(z)),g++)}else j=!0,g++}else R=!0,g++}if(B<g)return["",!1,0,!1];if(!a.length&&!b.length)return["$.",!1,o.length-i,!0];if(b.length===0&&a.length===1&&/^\\?.$/.test(a[0])&&!R)return[(Z=a[0].length===2?a[0].slice(-1):a[0],Z.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")),!1,B-i,!1];var Z;const J="["+(R?"^":"")+xn(a)+"]",q="["+(R?"":"^")+xn(b)+"]";return[a.length&&b.length?"("+J+"|"+q+")":a.length?J:q,P,B-i,!0]};function ft(o,e,i){var a;return(e=typeof(a=function(b,g){if(typeof b!="object"||!b)return b;var O=b[Symbol.toPrimitive];if(O!==void 0){var P=O.call(b,"string");if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(b)}(e))=="symbol"?a:String(a))in o?Object.defineProperty(o,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[e]=i,o}const bt=function(o,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return te(e),!(!i.nocomment&&e.charAt(0)==="#")&&new ee(e,i).match(o)},io=bt,so=/^\*+([^+@!?\*\[\(]*)$/,ao=o=>e=>!e.startsWith(".")&&e.endsWith(o),lo=o=>e=>e.endsWith(o),co=o=>(o=o.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(o)),uo=o=>(o=o.toLowerCase(),e=>e.toLowerCase().endsWith(o)),po=/^\*+\.\*+$/,ho=o=>!o.startsWith(".")&&o.includes("."),fo=o=>o!=="."&&o!==".."&&o.includes("."),go=/^\.\*+$/,mo=o=>o!=="."&&o!==".."&&o.startsWith("."),vo=/^\*+$/,bo=o=>o.length!==0&&!o.startsWith("."),yo=o=>o.length!==0&&o!=="."&&o!=="..",wo=/^\?+([^+@!?\*\[\(]*)?$/,xo=o=>{let[e,i=""]=o;const a=_n([e]);return i?(i=i.toLowerCase(),b=>a(b)&&b.toLowerCase().endsWith(i)):a},_o=o=>{let[e,i=""]=o;const a=Cn([e]);return i?(i=i.toLowerCase(),b=>a(b)&&b.toLowerCase().endsWith(i)):a},Co=o=>{let[e,i=""]=o;const a=Cn([e]);return i?b=>a(b)&&b.endsWith(i):a},Ao=o=>{let[e,i=""]=o;const a=_n([e]);return i?b=>a(b)&&b.endsWith(i):a},_n=o=>{let[e]=o;const i=e.length;return a=>a.length===i&&!a.startsWith(".")},Cn=o=>{let[e]=o;const i=e.length;return a=>a.length===i&&a!=="."&&a!==".."},An=typeof ae=="object"&&ae?typeof Ve=="object"&&Ve&&Ve.__MINIMATCH_TESTING_PLATFORM__||ae.platform:"posix";bt.sep=An==="win32"?"\\":"/";const xt=Symbol("globstar **");bt.GLOBSTAR=xt;const On={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},be="[^/]",ye=be+"*?",kn=o=>o.split("").reduce((e,i)=>(e[i]=!0,e),{}),Oo=kn("().*{}+?[]^$\\!"),ko=kn("[.(");bt.filter=function(o){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i=>bt(i,o,e)};const Ot=function(o){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.assign({},o,e)};bt.defaults=o=>{if(!o||typeof o!="object"||!Object.keys(o).length)return bt;const e=bt;return Object.assign(function(i,a){return e(i,a,Ot(o,arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}))},{Minimatch:class extends e.Minimatch{constructor(i){super(i,Ot(o,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}))}static defaults(i){return e.defaults(Ot(o,i)).Minimatch}},unescape:function(i){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.unescape(i,Ot(o,a))},escape:function(i){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.escape(i,Ot(o,a))},filter:function(i){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.filter(i,Ot(o,a))},defaults:i=>e.defaults(Ot(o,i)),makeRe:function(i){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.makeRe(i,Ot(o,a))},braceExpand:function(i){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.braceExpand(i,Ot(o,a))},match:function(i,a){let b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e.match(i,a,Ot(o,b))},sep:e.sep,GLOBSTAR:xt})};const Sn=function(o){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return te(o),e.nobrace||!/\{(?:(?!\{).)*\}/.test(o)?[o]:no(o)};bt.braceExpand=Sn;const te=o=>{if(typeof o!="string")throw new TypeError("invalid pattern");if(o.length>65536)throw new TypeError("pattern is too long")};bt.makeRe=function(o){return new ee(o,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).makeRe()},bt.match=function(o,e){const i=new ee(e,arguments.length>2&&arguments[2]!==void 0?arguments[2]:{});return o=o.filter(a=>i.match(a)),i.options.nonull&&!o.length&&o.push(e),o};const Nn=/[?*]|[+@!]\(.*?\)|\[|\]/,Pn=o=>o.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class ee{constructor(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ft(this,"options",void 0),ft(this,"set",void 0),ft(this,"pattern",void 0),ft(this,"windowsPathsNoEscape",void 0),ft(this,"nonegate",void 0),ft(this,"negate",void 0),ft(this,"comment",void 0),ft(this,"empty",void 0),ft(this,"preserveMultipleSlashes",void 0),ft(this,"partial",void 0),ft(this,"globSet",void 0),ft(this,"globParts",void 0),ft(this,"nocase",void 0),ft(this,"isWindows",void 0),ft(this,"platform",void 0),ft(this,"windowsNoMagicRoot",void 0),ft(this,"regexp",void 0),te(e),i=i||{},this.options=i,this.pattern=e,this.platform=i.platform||An,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!i.windowsPathsNoEscape||i.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!i.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!i.nonegate,this.comment=!1,this.empty=!1,this.partial=!!i.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=i.windowsNoMagicRoot!==void 0?i.windowsNoMagicRoot:!(!this.isWindows||!this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const e of this.set)for(const i of e)if(typeof i!="string")return!0;return!1}debug(){}make(){const e=this.pattern,i=this.options;if(!i.nocomment&&e.charAt(0)==="#")return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],i.debug&&(this.debug=function(){return console.error(...arguments)}),this.debug(this.pattern,this.globSet);const a=this.globSet.map(g=>this.slashSplit(g));this.globParts=this.preprocess(a),this.debug(this.pattern,this.globParts);let b=this.globParts.map((g,O,P)=>{if(this.isWindows&&this.windowsNoMagicRoot){const j=!(g[0]!==""||g[1]!==""||g[2]!=="?"&&Nn.test(g[2])||Nn.test(g[3])),R=/^[a-z]:/i.test(g[0]);if(j)return[...g.slice(0,4),...g.slice(4).map(B=>this.parse(B))];if(R)return[g[0],...g.slice(1).map(B=>this.parse(B))]}return g.map(j=>this.parse(j))});if(this.debug(this.pattern,b),this.set=b.filter(g=>g.indexOf(!1)===-1),this.isWindows)for(let g=0;g<this.set.length;g++){const O=this.set[g];O[0]===""&&O[1]===""&&this.globParts[g][2]==="?"&&typeof O[3]=="string"&&/^[a-z]:$/i.test(O[3])&&(O[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let a=0;a<e.length;a++)for(let b=0;b<e[a].length;b++)e[a][b]==="**"&&(e[a][b]="*");const{optimizationLevel:i=1}=this.options;return i>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):e=i>=1?this.levelOneOptimize(e):this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(i=>{let a=-1;for(;(a=i.indexOf("**",a+1))!==-1;){let b=a;for(;i[b+1]==="**";)b++;b!==a&&i.splice(a,b-a)}return i})}levelOneOptimize(e){return e.map(i=>(i=i.reduce((a,b)=>{const g=a[a.length-1];return b==="**"&&g==="**"?a:b===".."&&g&&g!==".."&&g!=="."&&g!=="**"?(a.pop(),a):(a.push(b),a)},[])).length===0?[""]:i)}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let i=!1;do{if(i=!1,!this.preserveMultipleSlashes){for(let b=1;b<e.length-1;b++){const g=e[b];b===1&&g===""&&e[0]===""||g!=="."&&g!==""||(i=!0,e.splice(b,1),b--)}e[0]!=="."||e.length!==2||e[1]!=="."&&e[1]!==""||(i=!0,e.pop())}let a=0;for(;(a=e.indexOf("..",a+1))!==-1;){const b=e[a-1];b&&b!=="."&&b!==".."&&b!=="**"&&(i=!0,e.splice(a-1,2),a-=2)}}while(i);return e.length===0?[""]:e}firstPhasePreProcess(e){let i=!1;do{i=!1;for(let a of e){let b=-1;for(;(b=a.indexOf("**",b+1))!==-1;){let O=b;for(;a[O+1]==="**";)O++;O>b&&a.splice(b+1,O-b);let P=a[b+1];const j=a[b+2],R=a[b+3];if(P!==".."||!j||j==="."||j===".."||!R||R==="."||R==="..")continue;i=!0,a.splice(b,1);const B=a.slice(0);B[b]="**",e.push(B),b--}if(!this.preserveMultipleSlashes){for(let O=1;O<a.length-1;O++){const P=a[O];O===1&&P===""&&a[0]===""||P!=="."&&P!==""||(i=!0,a.splice(O,1),O--)}a[0]!=="."||a.length!==2||a[1]!=="."&&a[1]!==""||(i=!0,a.pop())}let g=0;for(;(g=a.indexOf("..",g+1))!==-1;){const O=a[g-1];if(O&&O!=="."&&O!==".."&&O!=="**"){i=!0;const P=g===1&&a[g+1]==="**"?["."]:[];a.splice(g-1,2,...P),a.length===0&&a.push(""),g-=2}}}}while(i);return e}secondPhasePreProcess(e){for(let i=0;i<e.length-1;i++)for(let a=i+1;a<e.length;a++){const b=this.partsMatch(e[i],e[a],!this.preserveMultipleSlashes);b&&(e[i]=b,e[a]=[])}return e.filter(i=>i.length)}partsMatch(e,i){let a=arguments.length>2&&arguments[2]!==void 0&&arguments[2],b=0,g=0,O=[],P="";for(;b<e.length&&g<i.length;)if(e[b]===i[g])O.push(P==="b"?i[g]:e[b]),b++,g++;else if(a&&e[b]==="**"&&i[g]===e[b+1])O.push(e[b]),b++;else if(a&&i[g]==="**"&&e[b]===i[g+1])O.push(i[g]),g++;else if(e[b]!=="*"||!i[g]||!this.options.dot&&i[g].startsWith(".")||i[g]==="**"){if(i[g]!=="*"||!e[b]||!this.options.dot&&e[b].startsWith(".")||e[b]==="**"||P==="a")return!1;P="b",O.push(i[g]),b++,g++}else{if(P==="b")return!1;P="a",O.push(e[b]),b++,g++}return e.length===i.length&&O}parseNegate(){if(this.nonegate)return;const e=this.pattern;let i=!1,a=0;for(let b=0;b<e.length&&e.charAt(b)==="!";b++)i=!i,a++;a&&(this.pattern=e.slice(a)),this.negate=i}matchOne(e,i){let a=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const b=this.options;if(this.isWindows){const z=e[0]===""&&e[1]===""&&e[2]==="?"&&typeof e[3]=="string"&&/^[a-z]:$/i.test(e[3]),V=i[0]===""&&i[1]===""&&i[2]==="?"&&typeof i[3]=="string"&&/^[a-z]:$/i.test(i[3]);if(z&&V){const X=e[3],G=i[3];X.toLowerCase()===G.toLowerCase()&&(e[3]=G)}else if(V&&typeof e[0]=="string"){const X=i[3],G=e[0];X.toLowerCase()===G.toLowerCase()&&(i[3]=G,i=i.slice(3))}else if(z&&typeof i[0]=="string"){const X=e[3];X.toLowerCase()===i[0].toLowerCase()&&(i[0]=X,e=e.slice(3))}}const{optimizationLevel:g=1}=this.options;g>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:i}),this.debug("matchOne",e.length,i.length);for(var O=0,P=0,j=e.length,R=i.length;O<j&&P<R;O++,P++){this.debug("matchOne loop");var B=i[P],U=e[O];if(this.debug(i,B,U),B===!1)return!1;if(B===xt){this.debug("GLOBSTAR",[i,B,U]);var Z=O,J=P+1;if(J===R){for(this.debug("** at the end");O<j;O++)if(e[O]==="."||e[O]===".."||!b.dot&&e[O].charAt(0)===".")return!1;return!0}for(;Z<j;){var q=e[Z];if(this.debug("\nglobstar while",e,Z,i,J,q),this.matchOne(e.slice(Z),i.slice(J),a))return this.debug("globstar found match!",Z,j,q),!0;if(q==="."||q===".."||!b.dot&&q.charAt(0)==="."){this.debug("dot detected!",e,Z,i,J);break}this.debug("globstar swallow a segment, and continue"),Z++}return!(!a||(this.debug("\n>>> no match, partial?",e,Z,i,J),Z!==j))}let z;if(typeof B=="string"?(z=U===B,this.debug("string match",B,U,z)):(z=B.test(U),this.debug("pattern match",B,U,z)),!z)return!1}if(O===j&&P===R)return!0;if(O===j)return a;if(P===R)return O===j-1&&e[O]==="";throw new Error("wtf?")}braceExpand(){return Sn(this.pattern,this.options)}parse(e){te(e);const i=this.options;if(e==="**")return xt;if(e==="")return"";let a,b=null;(a=e.match(vo))?b=i.dot?yo:bo:(a=e.match(so))?b=(i.nocase?i.dot?uo:co:i.dot?lo:ao)(a[1]):(a=e.match(wo))?b=(i.nocase?i.dot?_o:xo:i.dot?Co:Ao)(a):(a=e.match(po))?b=i.dot?fo:ho:(a=e.match(go))&&(b=mo);let g="",O=!1,P=!1;const j=[],R=[];let B,U=!1,Z=!1,J=e.charAt(0)===".",q=i.dot||J;const z=H=>H.charAt(0)==="."?"":i.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",V=()=>{if(U){switch(U){case"*":g+=ye,O=!0;break;case"?":g+=be,O=!0;break;default:g+="\\"+U}this.debug("clearStateChar %j %j",U,g),U=!1}};for(let H,K=0;K<e.length&&(H=e.charAt(K));K++)if(this.debug("%s	%s %s %j",e,K,g,H),P){if(H==="/")return!1;Oo[H]&&(g+="\\"),g+=H,P=!1}else switch(H){case"/":return!1;case"\\":V(),P=!0;continue;case"?":case"*":case"+":case"@":case"!":this.debug("%s	%s %s %j <-- stateChar",e,K,g,H),this.debug("call clearStateChar %j",U),V(),U=H,i.noext&&V();continue;case"(":{if(!U){g+="\\(";continue}const lt={type:U,start:K-1,reStart:g.length,open:On[U].open,close:On[U].close};this.debug(this.pattern,"	",lt),j.push(lt),g+=lt.open,lt.start===0&&lt.type!=="!"&&(J=!0,g+=z(e.slice(K+1))),this.debug("plType %j %j",U,g),U=!1;continue}case")":{const lt=j[j.length-1];if(!lt){g+="\\)";continue}j.pop(),V(),O=!0,B=lt,g+=B.close,B.type==="!"&&R.push(Object.assign(B,{reEnd:g.length}));continue}case"|":{const lt=j[j.length-1];if(!lt){g+="\\|";continue}V(),g+="|",lt.start===0&&lt.type!=="!"&&(J=!0,g+=z(e.slice(K+1)));continue}case"[":V();const[mt,dt,gt,Ut]=oo(e,K);gt?(g+=mt,Z=Z||dt,K+=gt-1,O=O||Ut):g+="\\[";continue;case"]":g+="\\"+H;continue;default:V(),g+=Pn(H)}for(B=j.pop();B;B=j.pop()){let H;H=g.slice(B.reStart+B.open.length),this.debug(this.pattern,"setting tail",g,B),H=H.replace(/((?:\\{2}){0,64})(\\?)\|/g,(mt,dt,gt)=>(gt||(gt="\\"),dt+dt+gt+"|")),this.debug("tail=%j\n   %s",H,H,B,g);const K=B.type==="*"?ye:B.type==="?"?be:"\\"+B.type;O=!0,g=g.slice(0,B.reStart)+K+"\\("+H}V(),P&&(g+="\\\\");const X=ko[g.charAt(0)];for(let H=R.length-1;H>-1;H--){const K=R[H],mt=g.slice(0,K.reStart),dt=g.slice(K.reStart,K.reEnd-8);let gt=g.slice(K.reEnd);const Ut=g.slice(K.reEnd-8,K.reEnd)+gt,lt=mt.split(")").length,ni=mt.split("(").length-lt;let Ie=gt;for(let Un=0;Un<ni;Un++)Ie=Ie.replace(/\)[+*?]?/,"");gt=Ie,g=mt+dt+gt+(gt===""?"(?:$|\\/)":"")+Ut}if(g!==""&&O&&(g="(?=.)"+g),X&&(g=(J?"":q?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)")+g),!i.nocase||O||i.nocaseMagicOnly||(O=e.toUpperCase()!==e.toLowerCase()),!O)return g.replace(/\\(.)/g,"$1");const G=(i.nocase?"i":"")+(Z?"u":"");try{const H=b?{_glob:e,_src:g,test:b}:{_glob:e,_src:g};return Object.assign(new RegExp("^"+g+"$",G),H)}catch(H){return this.debug("invalid regexp",H),new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const e=this.set;if(!e.length)return this.regexp=!1,this.regexp;const i=this.options,a=i.noglobstar?ye:i.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",b=i.nocase?"i":"";let g=e.map(O=>{const P=O.map(j=>typeof j=="string"?Pn(j):j===xt?xt:j._src);return P.forEach((j,R)=>{const B=P[R+1],U=P[R-1];j===xt&&U!==xt&&(U===void 0?B!==void 0&&B!==xt?P[R+1]="(?:\\/|"+a+"\\/)?"+B:P[R]=a:B===void 0?P[R-1]=U+"(?:\\/|"+a+")?":B!==xt&&(P[R-1]=U+"(?:\\/|\\/"+a+"\\/)"+B,P[R+1]=xt))}),P.filter(j=>j!==xt).join("/")}).join("|");g="^(?:"+g+")$",this.negate&&(g="^(?!"+g+").*$");try{this.regexp=new RegExp(g,b)}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.partial;if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&i)return!0;const a=this.options;this.isWindows&&(e=e.split("\\").join("/"));const b=this.slashSplit(e);this.debug(this.pattern,"split",b);const g=this.set;this.debug(this.pattern,"set",g);let O=b[b.length-1];if(!O)for(let P=b.length-2;!O&&P>=0;P--)O=b[P];for(let P=0;P<g.length;P++){const j=g[P];let R=b;if(a.matchBase&&j.length===1&&(R=[O]),this.matchOne(R,j,i))return!!a.flipNegate||!this.negate}return!a.flipNegate&&this.negate}static defaults(e){return bt.defaults(e).Minimatch}}function we(o){const e=new Error("".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"","Invalid response: ").concat(o.status," ").concat(o.statusText));return e.status=o.status,e.response=o,e}function ht(o,e){const{status:i}=e;if(i===401&&o.digest)return e;if(i>=400)throw we(e);return e}function Et(o,e){return arguments.length>2&&arguments[2]!==void 0&&arguments[2]?{data:e,headers:o.headers?Qt(o.headers):{},status:o.status,statusText:o.statusText}:e}bt.Minimatch=ee,bt.escape=function(o){let{windowsPathsNoEscape:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e?o.replace(/[?*()[\]]/g,"[$&]"):o.replace(/[?*()[\]\\]/g,"\\$&")},bt.unescape=function(o){let{windowsPathsNoEscape:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e?o.replace(/\[([^\/\\])\]/g,"$1"):o.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1")};const So=(Tn=function(o,e,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const b=pt({url:u(o.remoteURL,c(e)),method:"COPY",headers:{Destination:u(o.remoteURL,c(i)),Overwrite:a.overwrite===!1?"F":"T",Depth:a.shallow?"0":"infinity"}},o,a);return O=function(P){ht(o,P)},(g=ut(b,o))&&g.then||(g=Promise.resolve(g)),O?g.then(O):g;var g,O},function(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];try{return Promise.resolve(Tn.apply(this,o))}catch(i){return Promise.reject(i)}});var Tn,xe=rt(635),No=rt(829),St=rt.n(No),Lt=function(o){return o.Array="array",o.Object="object",o.Original="original",o}(Lt||{});function ne(o,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Lt.Original;const a=St().get(o,e);return i==="array"&&Array.isArray(a)===!1?[a]:i==="object"&&Array.isArray(a)?a[0]:a}function zt(o){return new Promise(e=>{e(function(i){const{multistatus:a}=i;if(a==="")return{multistatus:{response:[]}};if(!a)throw new Error("Invalid response: No root multistatus found");const b={multistatus:Array.isArray(a)?a[0]:a};return St().set(b,"multistatus.response",ne(b,"multistatus.response",Lt.Array)),St().set(b,"multistatus.response",St().get(b,"multistatus.response").map(g=>function(O){const P=Object.assign({},O);return P.status?St().set(P,"status",ne(P,"status",Lt.Object)):(St().set(P,"propstat",ne(P,"propstat",Lt.Object)),St().set(P,"propstat.prop",ne(P,"propstat.prop",Lt.Object))),P}(g))),b}(new xe.XMLParser({removeNSPrefix:!0,numberParseOptions:{hex:!0,leadingZeros:!1}}).parse(o)))})}function _e(o,e){let i=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const{getlastmodified:a=null,getcontentlength:b="0",resourcetype:g=null,getcontenttype:O=null,getetag:P=null}=o,j=g&&typeof g=="object"&&g.collection!==void 0?"directory":"file",R={filename:e,basename:x().basename(e),lastmod:a,size:parseInt(b,10),type:j,etag:typeof P=="string"?P.replace(/"/g,""):null};return j==="file"&&(R.mime=O&&typeof O=="string"?O.split(";")[0]:""),i&&(R.props=o),R}function En(o,e){let i=arguments.length>2&&arguments[2]!==void 0&&arguments[2],a=null;try{o.multistatus.response[0].propstat&&(a=o.multistatus.response[0])}catch{}if(!a)throw new Error("Failed getting item stat: bad response");const{propstat:{prop:b,status:g}}=a,[O,P,j]=g.split(" ",3),R=parseInt(P,10);if(R>=400){const B=new Error("Invalid response: ".concat(R," ").concat(j));throw B.status=R,B}return _e(b,f(e),i)}function In(o){switch(o.toString()){case"-3":return"unlimited";case"-2":case"-1":return"unknown";default:return parseInt(o,10)}}function Ce(o,e,i){return i?e?e(o):o:(o&&o.then||(o=Promise.resolve(o)),e?o.then(e):o)}const Ae=function(o){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return Promise.resolve(o.apply(this,e))}catch(a){return Promise.reject(a)}}}(function(o,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{details:a=!1}=i,b=pt({url:u(o.remoteURL,c(e)),method:"PROPFIND",headers:{Accept:"text/plain,application/xml",Depth:"0"}},o,i);return Ce(ut(b,o),function(g){return ht(o,g),Ce(g.text(),function(O){return Ce(zt(O),function(P){const j=En(P,e,a);return Et(g,j,a)})})})});function jn(o,e,i){return i?e?e(o):o:(o&&o.then||(o=Promise.resolve(o)),e?o.then(e):o)}const Po=Ln(function(o,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=function(g){if(!g||g==="/")return[];let O=g;const P=[];do P.push(O),O=x().dirname(O);while(O&&O!=="/");return P}(f(e));a.sort((g,O)=>g.length>O.length?1:O.length>g.length?-1:0);let b=!1;return function(g,O,P){if(typeof g[Rn]=="function"){let z=function(V){try{for(;!(j=U.next()).done;)if((V=O(j.value))&&V.then){if(!Bn(V))return void V.then(z,B||(B=yt.bind(null,R=new Ft,2)));V=V.v}R?yt(R,1,V):R=V}catch(X){yt(R||(R=new Ft),2,X)}};var j,R,B,U=g[Rn]();if(z(),U.return){var Z=function(V){try{j.done||U.return()}catch{}return V};if(R&&R.then)return R.then(Z,function(V){throw Z(V)});Z()}return R}if(!("length"in g))throw new TypeError("Object is not iterable");for(var J=[],q=0;q<g.length;q++)J.push(g[q]);return function(z,V,X){var G,H,K=-1;return function mt(dt){try{for(;++K<z.length&&(!X||!X());)if((dt=V(K))&&dt.then){if(!Bn(dt))return void dt.then(mt,H||(H=yt.bind(null,G=new Ft,2)));dt=dt.v}G?yt(G,1,dt):G=dt}catch(gt){yt(G||(G=new Ft),2,gt)}}(),G}(J,function(z){return O(J[z])},P)}(a,function(g){return O=function(){return function(j,R){try{var B=jn(Ae(o,g),function(U){if(U.type!=="directory")throw new Error("Path includes a file: ".concat(e))})}catch(U){return R(U)}return B&&B.then?B.then(void 0,R):B}(0,function(j){const R=j;return function(){if(R.status===404)return b=!0,Fn(Oe(o,g,{...i,recursive:!1}));throw j}()})},(P=function(){if(b)return Fn(Oe(o,g,{...i,recursive:!1}))}())&&P.then?P.then(O):O();var O,P},function(){return!1})});function Ln(o){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return Promise.resolve(o.apply(this,e))}catch(a){return Promise.reject(a)}}}function To(){}function Fn(o,e){if(!e)return o&&o.then?o.then(To):Promise.resolve()}const Rn=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function yt(o,e,i){if(!o.s){if(i instanceof Ft){if(!i.s)return void(i.o=yt.bind(null,o,e));1&e&&(e=i.s),i=i.v}if(i&&i.then)return void i.then(yt.bind(null,o,e),yt.bind(null,o,2));o.s=e,o.v=i;const a=o.o;a&&a(o)}}const Ft=function(){function o(){}return o.prototype.then=function(e,i){const a=new o,b=this.s;if(b){const g=1&b?e:i;if(g){try{yt(a,1,g(this.v))}catch(O){yt(a,2,O)}return a}return this}return this.o=function(g){try{const O=g.v;1&g.s?yt(a,1,e?e(O):O):i?yt(a,1,i(O)):yt(a,2,O)}catch(O){yt(a,2,O)}},a},o}();function Bn(o){return o instanceof Ft&&1&o.s}const Oe=Ln(function(o,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(i.recursive===!0)return Po(o,e,i);const a=pt({url:u(o.remoteURL,(b=c(e),b.endsWith("/")?b:b+"/")),method:"MKCOL"},o,i);var b;return jn(ut(a,o),function(g){ht(o,g)})});var Eo=rt(388),Dn=rt.n(Eo);const Io=function(o){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return Promise.resolve(o.apply(this,e))}catch(a){return Promise.reject(a)}}}(function(o,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a={};if(typeof i.range=="object"&&typeof i.range.start=="number"){let P="bytes=".concat(i.range.start,"-");typeof i.range.end=="number"&&(P="".concat(P).concat(i.range.end)),a.Range=P}const b=pt({url:u(o.remoteURL,c(e)),method:"GET",headers:a},o,i);return O=function(P){if(ht(o,P),a.Range&&P.status!==206){const j=new Error("Invalid response code for partial request: ".concat(P.status));throw j.status=P.status,j}return i.callback&&setTimeout(()=>{i.callback(P)},0),P.body},(g=ut(b,o))&&g.then||(g=Promise.resolve(g)),O?g.then(O):g;var g,O}),jo=()=>{},Lo=function(o){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return Promise.resolve(o.apply(this,e))}catch(a){return Promise.reject(a)}}}(function(o,e,i){i.url||(i.url=u(o.remoteURL,c(e)));const a=pt(i,o,{});return g=function(O){return ht(o,O),O},(b=ut(a,o))&&b.then||(b=Promise.resolve(b)),g?b.then(g):b;var b,g}),Fo=function(o){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return Promise.resolve(o.apply(this,e))}catch(a){return Promise.reject(a)}}}(function(o,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=pt({url:u(o.remoteURL,c(e)),method:"DELETE"},o,i);return g=function(O){ht(o,O)},(b=ut(a,o))&&b.then||(b=Promise.resolve(b)),g?b.then(g):b;var b,g}),Ro=function(o){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return Promise.resolve(o.apply(this,e))}catch(a){return Promise.reject(a)}}}(function(o,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function(a,b){try{var g=(O=Ae(o,e,i),P=function(){return!0},j?P?P(O):O:(O&&O.then||(O=Promise.resolve(O)),P?O.then(P):O))}catch(R){return b(R)}var O,P,j;return g&&g.then?g.then(void 0,b):g}(0,function(a){if(a.status===404)return!1;throw a})});function ke(o,e,i){return i?e?e(o):o:(o&&o.then||(o=Promise.resolve(o)),e?o.then(e):o)}const Bo=function(o){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return Promise.resolve(o.apply(this,e))}catch(a){return Promise.reject(a)}}}(function(o,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=pt({url:u(o.remoteURL,c(e),"/"),method:"PROPFIND",headers:{Accept:"text/plain,application/xml",Depth:i.deep?"infinity":"1"}},o,i);return ke(ut(a,o),function(b){return ht(o,b),ke(b.text(),function(g){if(!g)throw new Error("Failed parsing directory contents: Empty response");return ke(zt(g),function(O){const P=s(e);let j=function(R,B,U){let Z=arguments.length>3&&arguments[3]!==void 0&&arguments[3],J=arguments.length>4&&arguments[4]!==void 0&&arguments[4];const q=x().join(B,"/"),{multistatus:{response:z}}=R,V=z.map(X=>{const G=function(K){try{return K.replace(/^https?:\/\/[^\/]+/,"")}catch(mt){throw new h(mt,"Failed normalising HREF")}}(X.href),{propstat:{prop:H}}=X;return _e(H,q==="/"?decodeURIComponent(f(G)):f(x().relative(decodeURIComponent(q),decodeURIComponent(G))),Z)});return J?V:V.filter(X=>X.basename&&(X.type==="file"||X.filename!==U.replace(/\/$/,"")))}(O,s(o.remoteBasePath||o.remotePath),P,i.details,i.includeSelf);return i.glob&&(j=function(R,B){return R.filter(U=>io(U.filename,B,{matchBase:!0}))}(j,i.glob)),Et(b,j,i.details)})})})});function Se(o){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return Promise.resolve(o.apply(this,e))}catch(a){return Promise.reject(a)}}}const Do=Se(function(o,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=pt({url:u(o.remoteURL,c(e)),method:"GET",headers:{Accept:"text/plain"},transformResponse:[zo]},o,i);return re(ut(a,o),function(b){return ht(o,b),re(b.text(),function(g){return Et(b,g,i.details)})})});function re(o,e,i){return i?e?e(o):o:(o&&o.then||(o=Promise.resolve(o)),e?o.then(e):o)}const $o=Se(function(o,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=pt({url:u(o.remoteURL,c(e)),method:"GET"},o,i);return re(ut(a,o),function(b){let g;return ht(o,b),function(O,P){var j=O();return j&&j.then?j.then(P):P()}(function(){return re(b.arrayBuffer(),function(O){g=O})},function(){return Et(b,g,i.details)})})}),Mo=Se(function(o,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{format:a="binary"}=i;if(a!=="binary"&&a!=="text")throw new h({info:{code:$.InvalidOutputFormat}},"Invalid output format: ".concat(a));return a==="text"?Do(o,e,i):$o(o,e,i)}),zo=o=>o;function Vo(o){return new xe.XMLBuilder({attributeNamePrefix:"@_",format:!0,ignoreAttributes:!1,suppressEmptyNode:!0}).build($n({lockinfo:{"@_xmlns:d":"DAV:",lockscope:{exclusive:{}},locktype:{write:{}},owner:{href:o}}},"d"))}function $n(o,e){const i={...o};for(const a in i)i.hasOwnProperty(a)&&(i[a]&&typeof i[a]=="object"&&a.indexOf(":")===-1?(i["".concat(e,":").concat(a)]=$n(i[a],e),delete i[a]):/^@_/.test(a)===!1&&(i["".concat(e,":").concat(a)]=i[a],delete i[a]));return i}function Ne(o,e,i){return i?e?e(o):o:(o&&o.then||(o=Promise.resolve(o)),e?o.then(e):o)}function Mn(o){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return Promise.resolve(o.apply(this,e))}catch(a){return Promise.reject(a)}}}const Uo=Mn(function(o,e,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const b=pt({url:u(o.remoteURL,c(e)),method:"UNLOCK",headers:{"Lock-Token":i}},o,a);return Ne(ut(b,o),function(g){if(ht(o,g),g.status!==204&&g.status!==200)throw we(g)})}),Wo=Mn(function(o,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{refreshToken:a,timeout:b=qo}=i,g={Accept:"text/plain,application/xml",Timeout:b};a&&(g.If=a);const O=pt({url:u(o.remoteURL,c(e)),method:"LOCK",headers:g,data:Vo(o.contactHref)},o,i);return Ne(ut(O,o),function(P){return ht(o,P),Ne(P.text(),function(j){const R=(Z=j,new xe.XMLParser({removeNSPrefix:!0,parseAttributeValue:!0,parseTagValue:!0}).parse(Z)),B=St().get(R,"prop.lockdiscovery.activelock.locktoken.href"),U=St().get(R,"prop.lockdiscovery.activelock.timeout");var Z;if(!B)throw we(P,"No lock token received: ");return{token:B,serverTimeout:U}})})}),qo="Infinite, Second-4100000000";function Pe(o,e,i){return i?e?e(o):o:(o&&o.then||(o=Promise.resolve(o)),e?o.then(e):o)}const Ho=function(o){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return Promise.resolve(o.apply(this,e))}catch(a){return Promise.reject(a)}}}(function(o){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=e.path||"/",a=pt({url:u(o.remoteURL,i),method:"PROPFIND",headers:{Accept:"text/plain,application/xml",Depth:"0"}},o,e);return Pe(ut(a,o),function(b){return ht(o,b),Pe(b.text(),function(g){return Pe(zt(g),function(O){const P=function(j){try{const[R]=j.multistatus.response,{propstat:{prop:{"quota-used-bytes":B,"quota-available-bytes":U}}}=R;return B!==void 0&&U!==void 0?{used:parseInt(B,10),available:In(U)}:null}catch{}return null}(O);return Et(b,P,e.details)})})})});function Te(o,e,i){return i?e?e(o):o:(o&&o.then||(o=Promise.resolve(o)),e?o.then(e):o)}const Zo=function(o){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return Promise.resolve(o.apply(this,e))}catch(a){return Promise.reject(a)}}}(function(o,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{details:a=!1}=i,b=pt({url:u(o.remoteURL,c(e)),method:"SEARCH",headers:{Accept:"text/plain,application/xml","Content-Type":o.headers["Content-Type"]||"application/xml; charset=utf-8"}},o,i);return Te(ut(b,o),function(g){return ht(o,g),Te(g.text(),function(O){return Te(zt(O),function(P){const j=function(R,B,U){const Z={truncated:!1,results:[]};return Z.truncated=R.multistatus.response.some(J=>{var q,z;return((q=(J.status||((z=J.propstat)===null||z===void 0?void 0:z.status)).split(" ",3))===null||q===void 0?void 0:q[1])==="507"&&J.href.replace(/\/$/,"").endsWith(c(B).replace(/\/$/,""))}),R.multistatus.response.forEach(J=>{if(J.propstat===void 0)return;const q=J.href.split("/").map(decodeURIComponent).join("/");Z.results.push(_e(J.propstat.prop,q,U))}),Z}(P,e,a);return Et(g,j,a)})})})}),Xo=function(o){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return Promise.resolve(o.apply(this,e))}catch(a){return Promise.reject(a)}}}(function(o,e,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const b=pt({url:u(o.remoteURL,c(e)),method:"MOVE",headers:{Destination:u(o.remoteURL,c(i)),Overwrite:a.overwrite===!1?"F":"T"}},o,a);return O=function(P){ht(o,P)},(g=ut(b,o))&&g.then||(g=Promise.resolve(g)),O?g.then(O):g;var g,O});var Go=rt(172);const Ko=function(o){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return Promise.resolve(o.apply(this,e))}catch(a){return Promise.reject(a)}}}(function(o,e,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const{contentLength:b=!0,overwrite:g=!0}=a,O={"Content-Type":"application/octet-stream"};b===!1||(O["Content-Length"]="".concat(typeof b=="number"?b:function(B){if(bn(B))return B.byteLength;if(yn(B))return B.length;if(typeof B=="string")return(0,Go.d)(B);throw new h({info:{code:$.DataTypeNoLength}},"Cannot calculate data length: Invalid type")}(i))),g||(O["If-None-Match"]="*");const P=pt({url:u(o.remoteURL,c(e)),method:"PUT",headers:O,data:i},o,a);return R=function(B){try{ht(o,B)}catch(U){const Z=U;if(Z.status!==412||g)throw Z;return!1}return!0},(j=ut(P,o))&&j.then||(j=Promise.resolve(j)),R?j.then(R):j;var j,R}),zn=function(o){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return Promise.resolve(o.apply(this,e))}catch(a){return Promise.reject(a)}}}(function(o,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=pt({url:u(o.remoteURL,c(e)),method:"OPTIONS"},o,i);return g=function(O){var P,j;try{ht(o,O)}catch(R){throw R}return{compliance:((P=O.headers.get("DAV"))!==null&&P!==void 0?P:"").split(",").map(R=>R.trim()),server:(j=O.headers.get("Server"))!==null&&j!==void 0?j:""}},(b=ut(a,o))&&b.then||(b=Promise.resolve(b)),g?b.then(g):b;var b,g});function Vt(o,e,i){return i?e?e(o):o:(o&&o.then||(o=Promise.resolve(o)),e?o.then(e):o)}const Yo=Ee(function(o,e,i,a,b){let g=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(i>a||i<0)throw new h({info:{code:$.InvalidUpdateRange}},"Invalid update range ".concat(i," for partial update"));const O={"Content-Type":"application/octet-stream","Content-Length":"".concat(a-i+1),"Content-Range":"bytes ".concat(i,"-").concat(a,"/*")},P=pt({url:u(o.remoteURL,c(e)),method:"PUT",headers:O,data:b},o,g);return Vt(ut(P,o),function(j){ht(o,j)})});function Vn(o,e){var i=o();return i&&i.then?i.then(e):e(i)}const Qo=Ee(function(o,e,i,a,b){let g=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(i>a||i<0)throw new h({info:{code:$.InvalidUpdateRange}},"Invalid update range ".concat(i," for partial update"));const O={"Content-Type":"application/x-sabredav-partialupdate","Content-Length":"".concat(a-i+1),"X-Update-Range":"bytes=".concat(i,"-").concat(a)},P=pt({url:u(o.remoteURL,c(e)),method:"PATCH",headers:O,data:b},o,g);return Vt(ut(P,o),function(j){ht(o,j)})});function Ee(o){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return Promise.resolve(o.apply(this,e))}catch(a){return Promise.reject(a)}}}const Jo=Ee(function(o,e,i,a,b){let g=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};return Vt(zn(o,e,g),function(O){let P=!1;return Vn(function(){if(O.compliance.includes("sabredav-partialupdate"))return Vt(Qo(o,e,i,a,b,g),function(j){return P=!0,j})},function(j){let R=!1;return P?j:Vn(function(){if(O.server.includes("Apache")&&O.compliance.includes("<http://apache.org/dav/propset/fs/1>"))return Vt(Yo(o,e,i,a,b,g),function(B){return R=!0,B})},function(B){if(R)return B;throw new h({info:{code:$.NotSupported}},"Not supported")})})})}),ti="https://github.com/perry-mitchell/webdav-client/blob/master/LOCK_CONTACT.md";function ei(o){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{authType:i=null,remoteBasePath:a,contactHref:b=ti,ha1:g,headers:O={},httpAgent:P,httpsAgent:j,password:R,token:B,username:U,withCredentials:Z}=e;let J=i;J||(J=U||R?D.Password:D.None);const q={authType:J,remoteBasePath:a,contactHref:b,ha1:g,headers:Object.assign({},O),httpAgent:P,httpsAgent:j,password:R,remotePath:l(o),remoteURL:o,token:B,username:U,withCredentials:Z};return F(q,U,R,B,g),{copyFile:(z,V,X)=>So(q,z,V,X),createDirectory:(z,V)=>Oe(q,z,V),createReadStream:(z,V)=>function(X,G){let H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const K=new(Dn()).PassThrough;return Io(X,G,H).then(mt=>{mt.pipe(K)}).catch(mt=>{K.emit("error",mt)}),K}(q,z,V),createWriteStream:(z,V,X)=>function(G,H){let K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},mt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:jo;const dt=new(Dn()).PassThrough,gt={};K.overwrite===!1&&(gt["If-None-Match"]="*");const Ut=pt({url:u(G.remoteURL,c(H)),method:"PUT",headers:gt,data:dt,maxRedirects:0},G,K);return ut(Ut,G).then(lt=>ht(G,lt)).then(lt=>{setTimeout(()=>{mt(lt)},0)}).catch(lt=>{dt.emit("error",lt)}),dt}(q,z,V,X),customRequest:(z,V)=>Lo(q,z,V),deleteFile:(z,V)=>Fo(q,z,V),exists:(z,V)=>Ro(q,z,V),getDirectoryContents:(z,V)=>Bo(q,z,V),getFileContents:(z,V)=>Mo(q,z,V),getFileDownloadLink:z=>function(V,X){let G=u(V.remoteURL,c(X));const H=/^https:/i.test(G)?"https":"http";switch(V.authType){case D.None:break;case D.Password:{const K=_(V.headers.Authorization.replace(/^Basic /i,"").trim());G=G.replace(/^https?:\/\//,"".concat(H,"://").concat(K,"@"));break}default:throw new h({info:{code:$.LinkUnsupportedAuthType}},"Unsupported auth type for file link: ".concat(V.authType))}return G}(q,z),getFileUploadLink:z=>function(V,X){let G="".concat(u(V.remoteURL,c(X)),"?Content-Type=application/octet-stream");const H=/^https:/i.test(G)?"https":"http";switch(V.authType){case D.None:break;case D.Password:{const K=_(V.headers.Authorization.replace(/^Basic /i,"").trim());G=G.replace(/^https?:\/\//,"".concat(H,"://").concat(K,"@"));break}default:throw new h({info:{code:$.LinkUnsupportedAuthType}},"Unsupported auth type for file link: ".concat(V.authType))}return G}(q,z),getHeaders:()=>Object.assign({},q.headers),getQuota:z=>Ho(q,z),lock:(z,V)=>Wo(q,z,V),moveFile:(z,V,X)=>Xo(q,z,V,X),putFileContents:(z,V,X)=>Ko(q,z,V,X),partialUpdateFileContents:(z,V,X,G,H)=>Jo(q,z,V,X,G,H),getDAVCompliance:z=>zn(q,z),search:(z,V)=>Zo(q,z,V),setHeaders:z=>{q.headers=Object.assign({},z)},stat:(z,V)=>Ae(q,z,V),unlock:(z,V,X)=>Uo(q,z,V,X)}}})(),At.hT,At.O4,At.Kd,At.YK;var Yl=At.UU,Ql=At.Gu;At.ky,At.h4,At.hq,At.i5;const Jl=t=>t===null?Wn.getLoggerBuilder().setApp("files").build():Wn.getLoggerBuilder().setApp("files").setUid(t.uid).build();Jl(Yt());const Ue=["B","KB","MB","GB","TB","PB"],We=["B","KiB","MiB","GiB","TiB","PiB"];function tc(t,n=!1,r=!1,p=!1){r=r&&!p,typeof t=="string"&&(t=Number(t));let h=t>0?Math.floor(Math.log(t)/Math.log(p?1e3:1024)):0;h=Math.min((r?We.length:Ue.length)-1,h);const m=r?We[h]:Ue[h];let x=(t/Math.pow(p?1e3:1024,h)).toFixed(1);return n===!0&&h===0?(x!=="0.0"?"< 1 ":"0 ")+(r?We[1]:Ue[1]):(h<2?x=parseFloat(x).toFixed(0):x=parseFloat(x).toLocaleString(jr()),x+" "+m)}var Ct=(t=>(t[t.NONE=0]="NONE",t[t.CREATE=4]="CREATE",t[t.READ=1]="READ",t[t.UPDATE=2]="UPDATE",t[t.DELETE=8]="DELETE",t[t.SHARE=16]="SHARE",t[t.ALL=31]="ALL",t))(Ct||{});const ec=["d:getcontentlength","d:getcontenttype","d:getetag","d:getlastmodified","d:quota-available-bytes","d:resourcetype","nc:has-preview","nc:is-encrypted","nc:mount-type","oc:comments-unread","oc:favorite","oc:fileid","oc:owner-display-name","oc:owner-id","oc:permissions","oc:size"],nc={d:"DAV:",nc:"http://nextcloud.org/ns",oc:"http://owncloud.org/ns",ocs:"http://open-collaboration-services.org/ns"},dn=function(){return typeof window._nc_dav_properties>"u"&&(window._nc_dav_properties=[...ec]),window._nc_dav_properties.map(t=>"<".concat(t," />")).join(" ")},fn=function(){return typeof window._nc_dav_namespaces>"u"&&(window._nc_dav_namespaces={...nc}),Object.keys(window._nc_dav_namespaces).map(t=>{var n;return"xmlns:".concat(t,'="').concat((n=window._nc_dav_namespaces)==null?void 0:n[t],'"')}).join(" ")},br=function(){return'<?xml version="1.0"?>\n		<d:propfind '.concat(fn(),">\n			<d:prop>\n				").concat(dn(),"\n			</d:prop>\n		</d:propfind>")},rc=function(){return'<?xml version="1.0"?>\n		<oc:filter-files '.concat(fn(),">\n			<d:prop>\n				").concat(dn(),"\n			</d:prop>\n			<oc:filter-rules>\n				<oc:favorite>1</oc:favorite>\n			</oc:filter-rules>\n		</oc:filter-files>")},oc=function(t){var n;return'<?xml version="1.0" encoding="UTF-8"?>\n<d:searchrequest '.concat(fn(),'\n	xmlns:ns="https://github.com/icewind1991/SearchDAV/ns">\n	<d:basicsearch>\n		<d:select>\n			<d:prop>\n				').concat(dn(),"\n			</d:prop>\n		</d:select>\n		<d:from>\n			<d:scope>\n				<d:href>/files/").concat((n=Yt())==null?void 0:n.uid,"/</d:href>\n				<d:depth>infinity</d:depth>\n			</d:scope>\n		</d:from>\n		<d:where>\n			<d:and>\n				<d:or>\n					<d:not>\n						<d:eq>\n							<d:prop>\n								<d:getcontenttype/>\n							</d:prop>\n							<d:literal>httpd/unix-directory</d:literal>\n						</d:eq>\n					</d:not>\n					<d:eq>\n						<d:prop>\n							<oc:size/>\n						</d:prop>\n						<d:literal>0</d:literal>\n					</d:eq>\n				</d:or>\n				<d:gt>\n					<d:prop>\n						<d:getlastmodified/>\n					</d:prop>\n					<d:literal>").concat(t,"</d:literal>\n				</d:gt>\n			</d:and>\n		</d:where>\n		<d:orderby>\n			<d:order>\n				<d:prop>\n					<d:getlastmodified/>\n				</d:prop>\n				<d:descending/>\n			</d:order>\n		</d:orderby>\n		<d:limit>\n			<d:nresults>100</d:nresults>\n			<ns:firstresult>0</ns:firstresult>\n		</d:limit>\n	</d:basicsearch>\n</d:searchrequest>")},ic=function(t=""){let n=Ct.NONE;return t&&((t.includes("C")||t.includes("K"))&&(n|=Ct.CREATE),t.includes("G")&&(n|=Ct.READ),(t.includes("W")||t.includes("N")||t.includes("V"))&&(n|=Ct.UPDATE),t.includes("D")&&(n|=Ct.DELETE),t.includes("R")&&(n|=Ct.SHARE)),n};var Tt=(t=>(t.Folder="folder",t.File="file",t))(Tt||{});const Zr=function(t,n){return t.match(n)!==null},yr=(t,n)=>{if(t.id&&typeof t.id!="number")throw new Error("Invalid id type of value");if(!t.source)throw new Error("Missing mandatory source");try{new URL(t.source)}catch{throw new Error("Invalid source format, source must be a valid URL")}if(!t.source.startsWith("http"))throw new Error("Invalid source format, only http(s) is supported");if(t.mtime&&!(t.mtime instanceof Date))throw new Error("Invalid mtime type");if(t.crtime&&!(t.crtime instanceof Date))throw new Error("Invalid crtime type");if(!t.mime||typeof t.mime!="string"||!t.mime.match(/^[-\w.]+\/[-+\w.]+$/gi))throw new Error("Missing or invalid mandatory mime");if("size"in t&&typeof t.size!="number"&&t.size!==void 0)throw new Error("Invalid size type");if("permissions"in t&&t.permissions!==void 0&&!(typeof t.permissions=="number"&&t.permissions>=Ct.NONE&&t.permissions<=Ct.ALL))throw new Error("Invalid permissions");if(t.owner&&t.owner!==null&&typeof t.owner!="string")throw new Error("Invalid owner type");if(t.attributes&&typeof t.attributes!="object")throw new Error("Invalid attributes type");if(t.root&&typeof t.root!="string")throw new Error("Invalid root type");if(t.root&&!t.root.startsWith("/"))throw new Error("Root must start with a leading slash");if(t.root&&!t.source.includes(t.root))throw new Error("Root must be part of the source");if(t.root&&Zr(t.source,n)){const r=t.source.match(n)[0];if(!t.source.includes(Nt.join(r,t.root)))throw new Error("The root must be relative to the service. e.g /files/emma")}if(t.status&&!Object.values(Xr).includes(t.status))throw new Error("Status must be a valid NodeStatus")};var Xr=(t=>(t.NEW="new",t.FAILED="failed",t.LOADING="loading",t.LOCKED="locked",t))(Xr||{});class Gr{constructor(n,r){oe(this,"_data");oe(this,"_attributes");oe(this,"_knownDavService",/(remote|public)\.php\/(web)?dav/i);yr(n,r||this._knownDavService),this._data=n;const p={set:(h,m,x)=>(this.updateMtime(),Reflect.set(h,m,x)),deleteProperty:(h,m)=>(this.updateMtime(),Reflect.deleteProperty(h,m))};this._attributes=new Proxy(n.attributes||{},p),delete this._data.attributes,r&&(this._knownDavService=r)}get source(){return this._data.source.replace(/\/$/i,"")}get encodedSource(){const{origin:n}=new URL(this.source);return n+ql(this.source.slice(n.length))}get basename(){return Nt.basename(this.source)}get extension(){return Nt.extname(this.source)}get dirname(){if(this.root){let r=this.source;this.isDavRessource&&(r=r.split(this._knownDavService).pop());const p=r.indexOf(this.root),h=this.root.replace(/\/$/,"");return Nt.dirname(r.slice(p+h.length)||"/")}const n=new URL(this.source);return Nt.dirname(n.pathname)}get mime(){return this._data.mime}get mtime(){return this._data.mtime}get crtime(){return this._data.crtime}get size(){return this._data.size}get attributes(){return this._attributes}get permissions(){return this.owner===null&&!this.isDavRessource?Ct.READ:this._data.permissions!==void 0?this._data.permissions:Ct.NONE}get owner(){return this.isDavRessource?this._data.owner:null}get isDavRessource(){return Zr(this.source,this._knownDavService)}get root(){return this._data.root?this._data.root.replace(/^(.+)\/$/,"$1"):this.isDavRessource&&Nt.dirname(this.source).split(this._knownDavService).pop()||null}get path(){if(this.root){let n=this.source;this.isDavRessource&&(n=n.split(this._knownDavService).pop());const r=n.indexOf(this.root),p=this.root.replace(/\/$/,"");return n.slice(r+p.length)||"/"}return(this.dirname+"/"+this.basename).replace(/\/\//g,"/")}get fileid(){var n,r;return((n=this._data)==null?void 0:n.id)||((r=this.attributes)==null?void 0:r.fileid)}get status(){var n;return(n=this._data)==null?void 0:n.status}set status(n){this._data.status=n}move(n){yr({...this._data,source:n},this._knownDavService),this._data.source=n,this.updateMtime()}rename(n){if(n.includes("/"))throw new Error("Invalid basename");this.move(Nt.dirname(this.source)+"/"+n)}updateMtime(){this._data.mtime&&(this._data.mtime=new Date)}}class sc extends Gr{get type(){return Tt.File}}class ac extends Gr{constructor(n){super({...n,mime:"httpd/unix-directory"})}get type(){return Tt.Folder}get extension(){return null}get mime(){return"httpd/unix-directory"}}var xr;const gn="/files/".concat((xr=Yt())==null?void 0:xr.uid),mn=Tr("dav"),wr=function(t=mn,n={}){const r=Yl(t,{headers:n});function p(h){r.setHeaders({...n,"X-Requested-With":"XMLHttpRequest",requesttoken:h!=null?h:""})}return Ei(p),p(Ii()),Ql().patch("fetch",(h,m)=>{const x=m.headers;return x!=null&&x.method&&(m.method=x.method,delete x.method),fetch(h,m)}),r},lc=async(t,n="/",r=gn)=>(await t.getDirectoryContents("".concat(r).concat(n),{details:!0,data:rc(),headers:{method:"REPORT"},includeSelf:!0})).data.filter(p=>p.filename!==n).map(p=>Kr(p,r)),Kr=function(t,n=gn,r=mn){var w,c;const p=(w=Yt())==null?void 0:w.uid;if(!p)throw new Error("No user id found");const h=t.props,m=ic(h==null?void 0:h.permissions),x=((h==null?void 0:h["owner-id"])||p).toString(),d={id:(h==null?void 0:h.fileid)||0,source:"".concat(r).concat(t.filename),mtime:new Date(Date.parse(t.lastmod)),mime:t.mime||"application/octet-stream",size:(h==null?void 0:h.size)||Number.parseInt(h.getcontentlength||"0"),permissions:m,owner:x,root:n,attributes:{...t,...h,hasPreview:h==null?void 0:h["has-preview"]}};return(c=d.attributes)==null||delete c.props,t.type==="file"?new sc(d):new ac(d)};var cc={};(function(t){const n=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r=n+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",p="["+n+"]["+r+"]*",h=new RegExp("^"+p+"$"),m=function(d,w){const c=[];let s=w.exec(d);for(;s;){const f=[];f.startIndex=w.lastIndex-s[0].length;const l=s.length;for(let u=0;u<l;u++)f.push(s[u]);c.push(f),s=w.exec(d)}return c},x=function(d){const w=h.exec(d);return!(w===null||typeof w>"u")};t.isExist=function(d){return typeof d<"u"},t.isEmptyObject=function(d){return Object.keys(d).length===0},t.merge=function(d,w,c){if(w){const s=Object.keys(w),f=s.length;for(let l=0;l<f;l++)c==="strict"?d[s[l]]=[w[s[l]]]:d[s[l]]=w[s[l]]}},t.getValue=function(d){return t.isExist(d)?d:""},t.isName=x,t.getAllMatches=m,t.nameRegexp=p})(cc),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const uc={name:"FileIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var pc=function(){var t=this,n=t._self._c;return n("span",t._b({staticClass:"material-design-icon file-icon",attrs:{"aria-hidden":t.title?null:!0,"aria-label":t.title,role:"img"},on:{click:function(r){return t.$emit("click",r)}}},"span",t.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z"}},[t.title?n("title",[t._v(t._s(t.title))]):t._e()])])])},hc=[],dc=wt(uc,pc,hc,!1,null,null,null,null);const Yr=dc.exports,vn=()=>{const t=()=>{var r;return((r=document.getElementById("isPublic"))==null?void 0:r.value)==="1"},n=ot(!0);return si(()=>{n.value=t()}),{isPublic:n}},Qr=()=>{var m,x,d;const t=Lr("files","config",null),n=ot((m=t==null?void 0:t.show_hidden)!=null?m:!0),r=ot((x=t==null?void 0:t.sort_favorites_first)!=null?x:!0),p=ot((d=t==null?void 0:t.crop_image_previews)!=null?d:!0),{isPublic:h}=vn();return Ht(async()=>{var w,c,s,f,l,u;if(h.value)console.debug("Skip loading files settings - currently on public share");else try{const{data:v}=await Er.get(nn("/apps/files/api/v1/configs"));n.value=(c=(w=v==null?void 0:v.data)==null?void 0:w.show_hidden)!=null?c:!1,r.value=(f=(s=v==null?void 0:v.data)==null?void 0:s.sort_favorites_first)!=null?f:!0,p.value=(u=(l=v==null?void 0:v.data)==null?void 0:l.crop_image_previews)!=null?u:!0}catch(v){console.error("Could not load files settings",v),en(ct("Could not load files settings"))}}),{showHiddenFiles:n,sortFavoritesFirst:r,cropImagePreviews:p}},fc=t=>{var s,f,l,u,v,C,k,L,y,A,S,_;const n=E=>E==="asc"?"ascending":E==="desc"?"descending":"none",r=Lr("files","viewConfigs",null),p=ot({sortBy:(f=(s=r==null?void 0:r.files)==null?void 0:s.sorting_mode)!=null?f:"basename",order:n((u=(l=r==null?void 0:r.files)==null?void 0:l.sorting_direction)!=null?u:"asc")}),h=ot({sortBy:(C=(v=r==null?void 0:r.recent)==null?void 0:v.sorting_mode)!=null?C:"basename",order:n((L=(k=r==null?void 0:r.recent)==null?void 0:k.sorting_direction)!=null?L:"asc")}),m=ot({sortBy:(A=(y=r==null?void 0:r.favorites)==null?void 0:y.sorting_mode)!=null?A:"basename",order:n((_=(S=r==null?void 0:r.favorites)==null?void 0:S.sorting_direction)!=null?_:"asc")}),{isPublic:x}=vn();Ht(async()=>{var E,T,N,I,M,D,$,F,W,tt,at,Y,nt,it,st;if(x.value)console.debug("Skip loading files views - currently on public share");else try{const{data:Q}=await Er.get(nn("/apps/files/api/v1/views"));p.value={sortBy:(N=(T=(E=Q==null?void 0:Q.data)==null?void 0:E.files)==null?void 0:T.sorting_mode)!=null?N:"basename",order:n((M=(I=Q==null?void 0:Q.data)==null?void 0:I.files)==null?void 0:M.sorting_direction)},m.value={sortBy:(F=($=(D=Q==null?void 0:Q.data)==null?void 0:D.favorites)==null?void 0:$.sorting_mode)!=null?F:"basename",order:n((tt=(W=Q==null?void 0:Q.data)==null?void 0:W.favorites)==null?void 0:tt.sorting_direction)},h.value={sortBy:(nt=(Y=(at=Q==null?void 0:Q.data)==null?void 0:at.recent)==null?void 0:Y.sorting_mode)!=null?nt:"basename",order:n((st=(it=Q==null?void 0:Q.data)==null?void 0:it.recent)==null?void 0:st.sorting_direction)}}catch(Q){console.error("Could not load files views",Q),en(ct("Could not load files views"))}});const d=et(()=>qn(t||"files")==="files"?p.value:qn(t)==="recent"?h.value:m.value),w=et(()=>d.value.sortBy),c=et(()=>d.value.order);return{filesViewConfig:p,favoritesViewConfig:m,recentViewConfig:h,currentConfig:d,sortBy:w,order:c}},gc={name:"MenuUpIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var mc=function(){var t=this,n=t._self._c;return n("span",t._b({staticClass:"material-design-icon menu-up-icon",attrs:{"aria-hidden":t.title?null:!0,"aria-label":t.title,role:"img"},on:{click:function(r){return t.$emit("click",r)}}},"span",t.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M7,15L12,10L17,15H7Z"}},[t.title?n("title",[t._v(t._s(t.title))]):t._e()])])])},vc=[],bc=wt(gc,mc,vc,!1,null,null,null,null);const yc=bc.exports,wc={name:"MenuDownIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var xc=function(){var t=this,n=t._self._c;return n("span",t._b({staticClass:"material-design-icon menu-down-icon",attrs:{"aria-hidden":t.title?null:!0,"aria-label":t.title,role:"img"},on:{click:function(r){return t.$emit("click",r)}}},"span",t.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M7,10L12,15L17,10H7Z"}},[t.title?n("title",[t._v(t._s(t.title))]):t._e()])])])},_c=[],Cc=wt(wc,xc,_c,!1,null,null,null,null);const Ac=Cc.exports,Jr={"file-picker__file-icon":"_file-picker__file-icon_1vgv4_5"},Oc=It({__name:"LoadingTableRow",props:{showCheckbox:{type:Boolean}},setup(t){return{__sfc:!0,fileListIconStyles:Jr}}});var kc=function(){var t=this,n=t._self._c,r=t._self._setupProxy;return n("tr",{staticClass:"file-picker__row loading-row",attrs:{"aria-hidden":"true"}},[t.showCheckbox?n("td",{staticClass:"row-checkbox"},[n("span")]):t._e(),n("td",{staticClass:"row-name"},[n("div",{staticClass:"row-wrapper"},[n("span",{class:r.fileListIconStyles["file-picker__file-icon"]}),n("span")])]),t._m(0),t._m(1)])},Sc=[function(){var t=this,n=t._self._c;return t._self._setupProxy,n("td",{staticClass:"row-size"},[n("span")])},function(){var t=this,n=t._self._c;return t._self._setupProxy,n("td",{staticClass:"row-modified"},[n("span")])}],Nc=wt(Oc,kc,Sc,!1,null,"6aded0d9",null,null);const Pc=Nc.exports;function Tc(t,n={}){var r;n={size:32,cropPreview:!1,mimeFallback:!0,...n};try{const p=((r=t.attributes)==null?void 0:r.previewUrl)||nn("/core/preview?fileId={fileid}",{fileid:t.fileid});let h;try{h=new URL(p)}catch{h=new URL(p,window.location.origin)}return h.searchParams.set("x","".concat(n.size)),h.searchParams.set("y","".concat(n.size)),h.searchParams.set("mimeFallback","".concat(n.mimeFallback)),h.searchParams.set("a",n.cropPreview===!0?"0":"1"),h.searchParams.set("c","".concat(t.attributes.etag)),h}catch{return null}}const Ec={name:"FolderIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Ic=function(){var t=this,n=t._self._c;return n("span",t._b({staticClass:"material-design-icon folder-icon",attrs:{"aria-hidden":t.title?null:!0,"aria-label":t.title,role:"img"},on:{click:function(r){return t.$emit("click",r)}}},"span",t.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z"}},[t.title?n("title",[t._v(t._s(t.title))]):t._e()])])])},jc=[],Lc=wt(Ec,Ic,jc,!1,null,null,null,null);const to=Lc.exports,Fc={name:"FilePreview"},Rc=It({...Fc,props:{node:null,cropImagePreviews:{type:Boolean}},setup(t){const n=t,r=ot(Jr),p=et(()=>Tc(n.node,{cropPreview:n.cropImagePreviews})),h=et(()=>n.node.type===Tt.File),m=ot(!1);return _r(p,()=>{if(m.value=!1,p.value){const x=document.createElement("img");x.src=p.value.href,x.onerror=()=>x.remove(),x.onload=()=>{m.value=!0,x.remove()},document.body.appendChild(x)}},{immediate:!0}),{__sfc:!0,fileListIconStyles:r,props:n,previewURL:p,isFile:h,canLoadPreview:m,IconFile:Yr,IconFolder:to}}});var Bc=function(){var t=this,n=t._self._c,r=t._self._setupProxy;return n("div",{class:r.fileListIconStyles["file-picker__file-icon"],style:r.canLoadPreview?{backgroundImage:"url(".concat(r.previewURL,")")}:void 0},[r.canLoadPreview?t._e():[r.isFile?n(r.IconFile,{attrs:{size:20}}):n(r.IconFolder,{attrs:{size:20}})]],2)},Dc=[],$c=wt(Rc,Bc,Dc,!1,null,null,null,null);const Mc=$c.exports,zc=It({__name:"FileListRow",props:{allowPickDirectory:{type:Boolean},selected:{type:Boolean},showCheckbox:{type:Boolean},canPick:{type:Boolean},node:null,cropImagePreviews:{type:Boolean}},emits:["update:selected","enter-directory"],setup(t,{emit:n}){const r=t,p=et(()=>{var s;return((s=r.node.attributes)==null?void 0:s.displayName)||r.node.basename.slice(0,r.node.extension?-r.node.extension.length:void 0)}),h=et(()=>r.node.extension),m=et(()=>r.node.type===Tt.Folder),x=et(()=>r.canPick&&(r.allowPickDirectory||!m.value));function d(){n("update:selected",!r.selected)}function w(){m.value?n("enter-directory",r.node):d()}function c(s){s.key==="Enter"&&w()}return{__sfc:!0,props:r,emit:n,displayName:p,fileExtension:h,isDirectory:m,isPickable:x,toggleSelected:d,handleClick:w,handleKeyDown:c,formatFileSize:tc,NcCheckboxRadioSwitch:Ir,NcDateTime:Hi,t:ct,FilePreview:Mc}}});var Vc=function(){var t=this,n=t._self._c,r=t._self._setupProxy;return n("tr",t._g({class:["file-picker__row",{"file-picker__row--selected":t.selected&&!t.showCheckbox}],attrs:{tabindex:t.showCheckbox&&!r.isDirectory?void 0:0,"aria-selected":r.isPickable?t.selected:void 0,"data-filename":t.node.basename,"data-testid":"file-list-row"}},{click:r.handleClick,...!t.showCheckbox||r.isDirectory?{keydown:r.handleKeyDown}:{}}),[t.showCheckbox?n("td",{staticClass:"row-checkbox",on:{click:function(p){return p.stopPropagation(),(()=>{}).apply(null,arguments)}}},[n(r.NcCheckboxRadioSwitch,{attrs:{"aria-label":r.t("Select the row for {nodename}",{nodename:r.displayName}),checked:t.selected,disabled:!r.isPickable,"data-testid":"row-checkbox"},on:{"update:checked":r.toggleSelected}})],1):t._e(),n("td",{staticClass:"row-name"},[n("div",{staticClass:"file-picker__name-container",attrs:{"data-testid":"row-name"}},[n(r.FilePreview,{attrs:{node:t.node,"crop-image-previews":t.cropImagePreviews}}),n("div",{staticClass:"file-picker__file-name",attrs:{title:r.displayName},domProps:{textContent:t._s(r.displayName)}}),n("div",{staticClass:"file-picker__file-extension",domProps:{textContent:t._s(r.fileExtension)}})],1)]),n("td",{staticClass:"row-size"},[t._v(" "+t._s(r.formatFileSize(t.node.size||0))+" ")]),n("td",{staticClass:"row-modified"},[n(r.NcDateTime,{attrs:{timestamp:t.node.mtime,"ignore-seconds":!0}})],1)])},Uc=[],Wc=wt(zc,Vc,Uc,!1,null,"48df4f27",null,null);const qc=Wc.exports,Hc=It({__name:"FileList",props:{currentView:null,multiselect:{type:Boolean},allowPickDirectory:{type:Boolean},loading:{type:Boolean},files:null,selectedFiles:null,path:null},emits:["update:path","update:selectedFiles"],setup(t,{emit:n}){const r=t,p=ot(),{currentConfig:h}=fc(r.currentView),m=et(()=>{var S;return(S=p.value)!=null?S:h.value}),x=et(()=>m.value.sortBy==="basename"?m.value.order==="none"?void 0:m.value.order:void 0),d=et(()=>m.value.sortBy==="size"?m.value.order==="none"?void 0:m.value.order:void 0),w=et(()=>m.value.sortBy==="mtime"?m.value.order==="none"?void 0:m.value.order:void 0),c=S=>{m.value.sortBy===S?m.value.order==="ascending"?p.value={sortBy:m.value.sortBy,order:"descending"}:p.value={sortBy:m.value.sortBy,order:"ascending"}:p.value={sortBy:S,order:"ascending"}},{sortFavoritesFirst:s,cropImagePreviews:f}=Qr(),l=et(()=>{const S={ascending:(E,T,N)=>N(E,T),descending:(E,T,N)=>N(T,E),none:(E,T,N)=>0},_={basename:(E,T)=>{var N,I;return(((N=E.attributes)==null?void 0:N.displayName)||E.basename).localeCompare(((I=T.attributes)==null?void 0:I.displayName)||T.basename,jr())},size:(E,T)=>(E.size||0)-(T.size||0),mtime:(E,T)=>{var N,I,M,D;return(((I=(N=T.mtime)==null?void 0:N.getTime)==null?void 0:I.call(N))||0)-(((D=(M=E.mtime)==null?void 0:M.getTime)==null?void 0:D.call(M))||0)}};return[...r.files].sort((E,T)=>(T.type===Tt.Folder?1:0)-(E.type===Tt.Folder?1:0)||(s?(T.attributes.favorite?1:0)-(E.attributes.favorite?1:0):0)||S[m.value.order](E,T,_[m.value.sortBy]))}),u=et(()=>r.files.filter(S=>r.allowPickDirectory||S.type!==Tt.Folder)),v=et(()=>!r.loading&&r.selectedFiles.length>0&&r.selectedFiles.length>=u.value.length);function C(){r.selectedFiles.length<u.value.length?n("update:selectedFiles",u.value):n("update:selectedFiles",[])}function k(S){r.selectedFiles.includes(S)?n("update:selectedFiles",r.selectedFiles.filter(_=>_.path!==S.path)):r.multiselect?n("update:selectedFiles",[...r.selectedFiles,S]):n("update:selectedFiles",[S])}function L(S){n("update:path",S.path)}const y=ot(4),A=ot();{const S=()=>li(()=>{var T,N,I,M,D;const _=((N=(T=A.value)==null?void 0:T.parentElement)==null?void 0:N.children)||[];let E=((M=(I=A.value)==null?void 0:I.parentElement)==null?void 0:M.clientHeight)||450;for(let $=0;$<_.length;$++)(D=A.value)!=null&&D.isSameNode(_[$])||(E-=_[$].clientHeight);y.value=Math.floor((E-50)/50)});Ht(()=>{window.addEventListener("resize",S),S()}),ai(()=>{window.removeEventListener("resize",S)})}return{__sfc:!0,props:r,emit:n,customSortingConfig:p,filesAppSorting:h,sortingConfig:m,sortByName:x,sortBySize:d,sortByModified:w,toggleSorting:c,sortFavoritesFirst:s,cropImagePreviews:f,sortedFiles:l,selectableFiles:u,allSelected:v,onSelectAll:C,onNodeSelected:k,onChangeDirectory:L,skeletonNumber:y,fileContainer:A,NcButton:on,NcCheckboxRadioSwitch:Ir,t:ct,IconSortAscending:yc,IconSortDescending:Ac,LoadingTableRow:Pc,FileListRow:qc}}});var Zc=function(){var t=this,n=t._self._c,r=t._self._setupProxy;return n("div",{ref:"fileContainer",staticClass:"file-picker__files"},[n("table",[n("thead",[n("tr",[t.multiselect?n("th",{staticClass:"row-checkbox"},[n("span",{staticClass:"hidden-visually"},[t._v(" "+t._s(r.t("Select entry"))+" ")]),t.multiselect?n(r.NcCheckboxRadioSwitch,{attrs:{"aria-label":r.t("Select all entries"),checked:r.allSelected,"data-testid":"select-all-checkbox"},on:{"update:checked":r.onSelectAll}}):t._e()],1):t._e(),n("th",{staticClass:"row-name",attrs:{"aria-sort":r.sortByName}},[n("div",{staticClass:"header-wrapper"},[n("span",{staticClass:"file-picker__header-preview"}),n(r.NcButton,{attrs:{wide:!0,type:"tertiary","data-test":"file-picker_sort-name"},on:{click:function(p){return r.toggleSorting("basename")}},scopedSlots:t._u([{key:"icon",fn:function(){return[r.sortByName==="ascending"?n(r.IconSortAscending,{attrs:{size:20}}):r.sortByName==="descending"?n(r.IconSortDescending,{attrs:{size:20}}):n("span",{staticStyle:{width:"44px"}})]},proxy:!0}])},[t._v(" "+t._s(r.t("Name"))+" ")])],1)]),n("th",{staticClass:"row-size",attrs:{"aria-sort":r.sortBySize}},[n(r.NcButton,{attrs:{wide:!0,type:"tertiary"},on:{click:function(p){return r.toggleSorting("size")}},scopedSlots:t._u([{key:"icon",fn:function(){return[r.sortBySize==="ascending"?n(r.IconSortAscending,{attrs:{size:20}}):r.sortBySize==="descending"?n(r.IconSortDescending,{attrs:{size:20}}):n("span",{staticStyle:{width:"44px"}})]},proxy:!0}])},[t._v(" "+t._s(r.t("Size"))+" ")])],1),n("th",{staticClass:"row-modified",attrs:{"aria-sort":r.sortByModified}},[n(r.NcButton,{attrs:{wide:!0,type:"tertiary"},on:{click:function(p){return r.toggleSorting("mtime")}},scopedSlots:t._u([{key:"icon",fn:function(){return[r.sortByModified==="ascending"?n(r.IconSortAscending,{attrs:{size:20}}):r.sortByModified==="descending"?n(r.IconSortDescending,{attrs:{size:20}}):n("span",{staticStyle:{width:"44px"}})]},proxy:!0}])},[t._v(" "+t._s(r.t("Modified"))+" ")])],1)])]),n("tbody",[t.loading?t._l(r.skeletonNumber,function(p){return n(r.LoadingTableRow,{key:p,attrs:{"show-checkbox":t.multiselect}})}):t._l(r.sortedFiles,function(p){return n(r.FileListRow,{key:p.fileid||p.path,attrs:{"allow-pick-directory":t.allowPickDirectory,"show-checkbox":t.multiselect,"can-pick":t.multiselect||t.selectedFiles.length===0||t.selectedFiles.includes(p),selected:t.selectedFiles.includes(p),node:p,"crop-image-previews":r.cropImagePreviews},on:{"update:selected":function(h){return r.onNodeSelected(p)},"enter-directory":r.onChangeDirectory}})})],2)])])},Xc=[],Gc=wt(Hc,Zc,Xc,!1,null,"d3c94818",null,null);const Kc=Gc.exports,Yc={name:"HomeIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Qc=function(){var t=this,n=t._self._c;return n("span",t._b({staticClass:"material-design-icon home-icon",attrs:{"aria-hidden":t.title?null:!0,"aria-label":t.title,role:"img"},on:{click:function(r){return t.$emit("click",r)}}},"span",t.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"}},[t.title?n("title",[t._v(t._s(t.title))]):t._e()])])])},Jc=[],tu=wt(Yc,Qc,Jc,!1,null,null,null,null);const eu=tu.exports,nu={name:"PlusIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var ru=function(){var t=this,n=t._self._c;return n("span",t._b({staticClass:"material-design-icon plus-icon",attrs:{"aria-hidden":t.title?null:!0,"aria-label":t.title,role:"img"},on:{click:function(r){return t.$emit("click",r)}}},"span",t.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"}},[t.title?n("title",[t._v(t._s(t.title))]):t._e()])])])},ou=[],iu=wt(nu,ru,ou,!1,null,null,null,null);const su=iu.exports,au=It({__name:"FilePickerBreadcrumbs",props:{path:null,showMenu:{type:Boolean}},emits:["update:path","create-node"],setup(t,{emit:n}){const r=t,p=ot(""),h=ot();function m(){var f,l,u,v;const w=p.value.trim(),c=(l=(f=h.value)==null?void 0:f.$el)==null?void 0:l.querySelector("input");let s="";return w.length===0?s=ct("Folder name cannot be empty."):w.includes("/")?s=ct('"/" is not allowed inside a folder name.'):["..","."].includes(w)?s=ct('"{name}" is an invalid folder name.',{name:w}):(u=window.OC.config)!=null&&u.blacklist_files_regex&&w.match((v=window.OC.config)==null?void 0:v.blacklist_files_regex)&&(s=ct('"{name}" is not an allowed folder name',{name:w})),c&&c.setCustomValidity(s),s===""}const x=function(){const w=p.value.trim();m()&&(n("create-node",w),p.value="")},d=et(()=>r.path.split("/").filter(w=>w!=="").map((w,c,s)=>({name:w,path:"/"+s.slice(0,c+1).join("/")})));return{__sfc:!0,props:r,emit:n,newNodeName:p,nameInput:h,validateInput:m,onSubmit:x,pathElements:d,IconFolder:to,IconHome:eu,IconPlus:su,NcActions:Ke,NcActionInput:zi,NcBreadcrumbs:ws,NcBreadcrumb:Fr,t:ct}}});var lu=function(){var t=this,n=t._self._c,r=t._self._setupProxy;return n(r.NcBreadcrumbs,{staticClass:"file-picker__breadcrumbs",scopedSlots:t._u([{key:"default",fn:function(){return[n(r.NcBreadcrumb,{attrs:{name:r.t("All files"),title:r.t("Home")},on:{click:function(p){return r.emit("update:path","/")}},scopedSlots:t._u([{key:"icon",fn:function(){return[n(r.IconHome,{attrs:{size:20}})]},proxy:!0}])}),t._l(r.pathElements,function(p){return n(r.NcBreadcrumb,{key:p.path,attrs:{name:p.name,title:p.path},on:{click:function(h){return r.emit("update:path",p.path)}}})})]},proxy:!0},t.showMenu?{key:"actions",fn:function(){return[n(r.NcActions,{attrs:{"aria-label":r.t("Create directory"),"force-menu":!0,"force-name":!0,"menu-name":r.t("New"),type:"secondary"},on:{close:function(p){r.newNodeName=""}},scopedSlots:t._u([{key:"icon",fn:function(){return[n(r.IconPlus,{attrs:{size:20}})]},proxy:!0}],null,!1,2971667417)},[n(r.NcActionInput,{ref:"nameInput",attrs:{value:r.newNodeName,label:r.t("New folder"),placeholder:r.t("New folder name")},on:{"update:value":function(p){r.newNodeName=p},submit:r.onSubmit,input:r.validateInput},scopedSlots:t._u([{key:"icon",fn:function(){return[n(r.IconFolder,{attrs:{size:20}})]},proxy:!0}],null,!1,1614167509)})],1)]},proxy:!0}:null],null,!0)})},cu=[],uu=wt(au,lu,cu,!1,null,"a25a2652",null,null);const pu=uu.exports,hu={name:"CloseIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var du=function(){var t=this,n=t._self._c;return n("span",t._b({staticClass:"material-design-icon close-icon",attrs:{"aria-hidden":t.title?null:!0,"aria-label":t.title,role:"img"},on:{click:function(r){return t.$emit("click",r)}}},"span",t.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}},[t.title?n("title",[t._v(t._s(t.title))]):t._e()])])])},fu=[],gu=wt(hu,du,fu,!1,null,null,null,null);const mu=gu.exports,vu={name:"MagnifyIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var bu=function(){var t=this,n=t._self._c;return n("span",t._b({staticClass:"material-design-icon magnify-icon",attrs:{"aria-hidden":t.title?null:!0,"aria-label":t.title,role:"img"},on:{click:function(r){return t.$emit("click",r)}}},"span",t.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"}},[t.title?n("title",[t._v(t._s(t.title))]):t._e()])])])},yu=[],wu=wt(vu,bu,yu,!1,null,null,null,null);const xu=wu.exports,_u=t=>{const n=[{id:"files",label:ct("All files"),icon:Ui},{id:"recent",label:ct("Recent"),icon:Wi},{id:"favorites",label:ct("Favorites"),icon:qi}],r=t.value?n.filter(({id:p})=>p==="files"):n;return{allViews:n,availableViews:r}},Cu=It({__name:"FilePickerNavigation",props:{currentView:null,filterString:null,isCollapsed:{type:Boolean},disabledNavigation:{type:Boolean}},emits:["update:currentView","update:filterString"],setup(t,{emit:n}){const r=t,{availableViews:p}=_u(ot(Yt()===null)),h=et(()=>{var m;return(m=p.filter(x=>x.id===r.currentView)[0])!=null?m:p[0]});return{__sfc:!0,props:r,emit:n,availableViews:p,currentViewObject:h,updateFilterValue:m=>n("update:filterString",m),IconClose:mu,IconMagnify:xu,NcButton:on,NcIconSvgWrapper:Bi,NcSelect:ji,NcTextField:Vi,Fragment:Dr,t:ct}}});var Au=function(){var t=this,n=t._self._c,r=t._self._setupProxy;return n(r.Fragment,[n(r.NcTextField,{staticClass:"file-picker__filter-input",attrs:{value:t.filterString,label:r.t("Filter file list"),"show-trailing-button":!!t.filterString},on:{"update:value":r.updateFilterValue,"trailing-button-click":function(p){return r.updateFilterValue("")}},scopedSlots:t._u([{key:"trailing-button-icon",fn:function(){return[n(r.IconClose,{attrs:{size:16}})]},proxy:!0}])},[n(r.IconMagnify,{attrs:{size:16}})],1),r.availableViews.length>1&&!t.disabledNavigation?[t.isCollapsed?n(r.NcSelect,{attrs:{"aria-label":r.t("Current view selector"),clearable:!1,searchable:!1,options:r.availableViews,value:r.currentViewObject},on:{input:p=>r.emit("update:currentView",p.id)}}):n("ul",{staticClass:"file-picker__side"},t._l(r.availableViews,function(p){return n("li",{key:p.id},[n(r.NcButton,{attrs:{type:t.currentView===p.id?"primary":"tertiary",wide:!0},on:{click:function(h){return t.$emit("update:currentView",p.id)}},scopedSlots:t._u([{key:"icon",fn:function(){return[n(r.NcIconSvgWrapper,{attrs:{path:p.icon,size:20}})]},proxy:!0}],null,!0)},[t._v(" "+t._s(p.label)+" ")])],1)}),0)]:t._e()],2)},Ou=[],ku=wt(Cu,Au,Ou,!1,null,"a06474d4",null,null);const Su=ku.exports,Nu=function(t,n,r){const p=et(()=>r.value?"/":gn),h=et(()=>r.value?Tr("webdav").replace("/remote.php","/public.php"):mn),m=et(()=>{if(r.value){const l=document.getElementById("sharingToken").value,u=btoa("".concat(l,":null"));return wr(h.value,{Authorization:"Basic ".concat(u)})}return wr()}),x=l=>Kr(l,p.value,h.value),d=ot([]),w=ot(!0);async function c(l){const u=Nt.join(n.value,l);await m.value.createDirectory(Nt.join(p.value,u));const v=await s(u);return d.value.push(v),v}async function s(l,u=void 0){u=u!=null?u:p.value;const{data:v}=await m.value.stat("".concat(u).concat(l),{details:!0,data:br()});return x(v)}async function f(){if(w.value=!0,t.value==="favorites")d.value=await lc(m.value,n.value,p.value);else if(t.value==="recent"){const l=Math.round(Date.now()/1e3)-1209600,{data:u}=await m.value.search("/",{details:!0,data:oc(l)});d.value=u.results.map(x)}else{const l=await m.value.getDirectoryContents("".concat(p.value).concat(n.value),{details:!0,data:br()});d.value=l.data.map(x),r.value&&(d.value=d.value.filter(u=>u.path!==n.value))}w.value=!1}return _r([t,n],()=>f()),Ht(()=>f()),{isLoading:w,files:d,loadFiles:f,getFile:s,createDirectory:c}},Pu=function(t){const n=et(()=>t.value.map(r=>r.split("/")));return{isSupportedMimeType:r=>{const p=r.split("/");return n.value.some(([h,m])=>(p[0]===h||h==="*")&&(p[1]===m||m==="*"))}}},Tu={name:"FilePicker"},Eu=It({...Tu,props:{buttons:null,name:null,allowPickDirectory:{type:Boolean,default:!1},disabledNavigation:{type:Boolean,default:!1},container:{default:"body"},filterFn:{default:void 0},mimetypeFilter:{default:()=>[]},multiselect:{type:Boolean,default:!0},path:{default:void 0}},emits:["close"],setup(t,{emit:n}){const r=t,{isPublic:p}=vn(),h=ot(!0),m=et(()=>(typeof r.buttons=="function"?r.buttons(s.value,u.value,w.value):r.buttons).map(N=>({...N,callback:()=>{x=!0,d(N.callback)}})));let x=!1;const d=async N=>{const I=s.value.length===0&&r.allowPickDirectory?[await A(u.value)]:s.value;N(I),n("close",I),x=!1},w=ot("files"),c=et(()=>w.value==="favorites"?ct("Favorites"):w.value==="recent"?ct("Recent"):""),s=ot([]),f=ot((window==null?void 0:window.sessionStorage.getItem("NC.FilePicker.LastPath"))||"/"),l=ot(),u=et({get:()=>w.value==="files"?l.value||r.path||f.value:"/",set:N=>{r.path===void 0&&window.sessionStorage.setItem("NC.FilePicker.LastPath",N),l.value=N,s.value=[]}}),v=ot(""),{isSupportedMimeType:C}=Pu(ii(r,"mimetypeFilter")),{files:k,isLoading:L,loadFiles:y,getFile:A,createDirectory:S}=Nu(w,u,p);Ht(()=>y());const{showHiddenFiles:_}=Qr(),E=et(()=>{let N=k.value;return _.value||(N=N.filter(I=>!I.basename.startsWith("."))),r.mimetypeFilter.length>0&&(N=N.filter(I=>I.type==="folder"||I.mime&&C(I.mime))),v.value&&(N=N.filter(I=>I.basename.toLowerCase().includes(v.value.toLowerCase()))),r.filterFn&&(N=N.filter(I=>r.filterFn(I))),N}),T=et(()=>w.value==="files"?ct("Upload some content or sync with your devices!"):w.value==="recent"?ct("Files and folders you recently modified will show up here."):ct("Files and folders you mark as favorite will show up here."));return{__sfc:!0,props:r,emit:n,isPublic:p,isOpen:h,dialogButtons:m,isHandlingCallback:x,handleButtonClick:d,currentView:w,viewHeadline:c,selectedFiles:s,savedPath:f,navigatedPath:l,currentPath:u,filterString:v,isSupportedMimeType:C,files:k,isLoading:L,loadFiles:y,getFile:A,createDirectory:S,showHiddenFiles:_,filteredFiles:E,noFilesDescription:T,onCreateFolder:async N=>{try{await S(N),Ri("files:node:created",k.value.filter(I=>I.basename===N)[0])}catch(I){console.warn("Could not create new folder",{name:N,error:I}),en(ct("Could not create the new folder"))}},handleClose:N=>{!N&&!x&&n("close")},IconFile:Yr,FileList:Kc,FilePickerBreadcrumbs:pu,FilePickerNavigation:Su,NcDialog:Mi,NcEmptyContent:Zi,t:ct}}});var Iu=function(){var t=this,n=t._self._c,r=t._self._setupProxy;return n(r.NcDialog,{attrs:{container:t.container,buttons:r.dialogButtons,name:t.name,size:"large","content-classes":"file-picker__content","dialog-classes":"file-picker","navigation-classes":"file-picker__navigation",open:r.isOpen},on:{"update:open":[function(p){r.isOpen=p},r.handleClose]},scopedSlots:t._u([{key:"navigation",fn:function({isCollapsed:p}){return[n(r.FilePickerNavigation,{attrs:{"is-collapsed":p,"current-view":r.currentView,"filter-string":r.filterString,"disabled-navigation":t.disabledNavigation},on:{"update:currentView":function(h){r.currentView=h},"update:current-view":function(h){r.currentView=h},"update:filterString":function(h){r.filterString=h},"update:filter-string":function(h){r.filterString=h}}})]}}])},[n("div",{staticClass:"file-picker__main"},[r.currentView==="files"?n(r.FilePickerBreadcrumbs,{attrs:{path:r.currentPath,"show-menu":t.allowPickDirectory},on:{"update:path":function(p){r.currentPath=p},"create-node":r.onCreateFolder}}):n("div",{staticClass:"file-picker__view"},[n("h3",[t._v(t._s(r.viewHeadline))])]),r.isLoading||r.filteredFiles.length>0?n(r.FileList,{attrs:{"allow-pick-directory":t.allowPickDirectory,"current-view":r.currentView,files:r.filteredFiles,multiselect:t.multiselect,loading:r.isLoading,path:r.currentPath,"selected-files":r.selectedFiles,name:r.viewHeadline},on:{"update:path":[function(p){r.currentPath=p},function(p){r.currentView="files"}],"update:selectedFiles":function(p){r.selectedFiles=p},"update:selected-files":function(p){r.selectedFiles=p}}}):r.filterString?n(r.NcEmptyContent,{attrs:{name:r.t("No matching files"),description:r.t("No files matching your filter were found.")},scopedSlots:t._u([{key:"icon",fn:function(){return[n(r.IconFile)]},proxy:!0}])}):n(r.NcEmptyContent,{attrs:{name:r.t("No files in here"),description:r.noFilesDescription},scopedSlots:t._u([{key:"icon",fn:function(){return[n(r.IconFile)]},proxy:!0}])})],1)])},ju=[],Lu=wt(Eu,Iu,ju,!1,null,"9def3ca4",null,null);const zu=Lu.exports;export{zu as default};
