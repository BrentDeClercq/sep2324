function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = [OC.filePath('forms', '', 'js/index-CwXnUkoV-Bz4xC0qd.mjs'),OC.filePath('forms', '', 'js/vendor-DFuGXkIP.mjs'),OC.filePath('forms', '', 'js/modulepreload-polyfill-CZYm9XZS.mjs'),OC.filePath('forms', '', 'js/NcSettingsSection-Lgwm3w2e-Zv456Rc4.mjs'),OC.filePath('forms', '', 'js/Submit-PS6lxYc-.mjs'),OC.filePath('forms', '', 'js/NcEmptyContent-CXZD4dur.mjs'),OC.filePath('forms', '', 'js/FormsIcon-CxM5xLli.mjs')]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
/*! third party licenses: js/vendor.LICENSE.txt */
var ai=Object.defineProperty;var li=(e,n,i)=>n in e?ai(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i;var lt=(e,n,i)=>(li(e,typeof n!="symbol"?n+"":n,i),i);import{g as ci,c as Dn,b as ui,n as B,v as Yt,u as Pn,s as Ke,e as vt,d as Je,x as De,l as Pe,f as di,t as On,V as hi,a as fi}from"./modulepreload-polyfill-CZYm9XZS.mjs";import{V as Bt,t as pi,a as Fn,d as mi}from"./vendor-DFuGXkIP.mjs";import{p as gi,C as Ut,P as vi,c as bi,n as yi,v as Qt,a as W,b as Oe,d as j,l as q,z as Z,_ as ae,g as _i,B as zt,e as wi,G as Hn,f as Si,u as Ci,o as Rn,m as xi}from"./NcSettingsSection-Lgwm3w2e-Zv456Rc4.mjs";import{N as Ei,b as Kt,Q as Ai,a as ki,c as Ti,d as Ni,T as Vn,V as un,e as he,m as mt,F as ht,S as tn,f as en,O as ct,I as Fe,g as dn,z as He,P as Li,h as fe,i as Mi,j as Ii,k as Di,l as Pi,y as Oi,n as Fi,u as Hi,o as Ri,p as Vi,w as $i}from"./Submit-PS6lxYc-.mjs";import{H as hn,_ as fn,N as Bi}from"./NcEmptyContent-CXZD4dur.mjs";import{F as pn,I as zi}from"./FormsIcon-CxM5xLli.mjs";const In="forms";const qi="modulepreload",Yi=function(e,n){return e[0]==="."?new URL(e,n).href:e},yn={},Ui=function(e,n,i){let o=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link"),r=document.querySelector("meta[property=csp-nonce]"),a=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));o=Promise.all(n.map(l=>{if(l=Yi(l,i),l in yn)return;yn[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(i)for(let h=s.length-1;h>=0;h--){const p=s[h];if(p.href===l&&(!c||p.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(l,'"]').concat(d)))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":qi,c||(u.as="script",u.crossOrigin=""),u.href=l,a&&u.setAttribute("nonce",a),document.head.appendChild(u),c)return new Promise((h,p)=>{u.addEventListener("load",h),u.addEventListener("error",()=>p(new Error("Unable to preload CSS for ".concat(l))))})}))}return o.then(()=>e()).catch(s=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=s,window.dispatchEvent(r),!r.defaultPrevented)throw s})},ji=(e,n,i=()=>{})=>{const o=document.createElement("div");(document.querySelector(n==null?void 0:n.container)||document.body).appendChild(o);const s=new Bt({el:o,name:"VueDialogHelper",render:r=>r(e,{props:n,on:{close:(...a)=>{i(...a.map(l=>pi(l))),s.$destroy()}}})});return s},Wi='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-folder-move" viewBox="0 0 24 24"><path d="M14,18V15H10V11H14V8L19,13M20,6H12L10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6Z" /></svg>',Xi='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-folder-multiple" viewBox="0 0 24 24"><path d="M22,4H14L12,2H6A2,2 0 0,0 4,4V16A2,2 0 0,0 6,18H22A2,2 0 0,0 24,16V6A2,2 0 0,0 22,4M2,6H0V11H0V20A2,2 0 0,0 2,22H20V20H2V6Z" /></svg>';class Zi extends Error{}class Gi{constructor(n,i,o,s,r,a,l,c,d=!1){lt(this,"title");lt(this,"multiSelect");lt(this,"mimeTypeFilter");lt(this,"directoriesAllowed");lt(this,"buttons");lt(this,"path");lt(this,"filter");lt(this,"container");lt(this,"disabledNavigation");this.title=n,this.multiSelect=i,this.mimeTypeFilter=o,this.directoriesAllowed=s,this.path=a,this.filter=l,this.buttons=r,this.container=c,this.disabledNavigation=d}async pick(){const{FilePickerVue:n}=await Ui(()=>import("./index-CwXnUkoV-Bz4xC0qd.mjs"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url);return new Promise((i,o)=>{ji(n,{allowPickDirectory:this.directoriesAllowed,buttons:this.buttons,container:this.container,name:this.title,path:this.path,mimetypeFilter:this.mimeTypeFilter,multiselect:this.multiSelect,filterFn:this.filter,disabledNavigation:this.disabledNavigation},(...s)=>{var a;const[r]=s;!Array.isArray(r)||r.length===0?o(new Zi("FilePicker: No nodes selected")):this.multiSelect?i(r.map(l=>l.path)):i(((a=r[0])==null?void 0:a.path)||"/")})})}}let Qi=class{constructor(e){lt(this,"title");lt(this,"multiSelect",!1);lt(this,"mimeTypeFilter",[]);lt(this,"directoriesAllowed",!1);lt(this,"path");lt(this,"filter");lt(this,"buttons",[]);lt(this,"container");lt(this,"disabledNavigation",!1);this.title=e}setContainer(e){return this.container=e,this}setMultiSelect(e){return this.multiSelect=e,this}addMimeTypeFilter(e){return this.mimeTypeFilter.push(e),this}setMimeTypeFilter(e){return this.mimeTypeFilter=e,this}addButton(e){return typeof this.buttons=="function"&&(console.warn("FilePicker buttons were set to factory, now overwritten with button object."),this.buttons=[]),this.buttons.push(e),this}setButtonFactory(e){return this.buttons=e,this}setType(e){return this.buttons=(n,i)=>{var a,l,c;const o=[],s=((l=(a=n==null?void 0:n[0])==null?void 0:a.attributes)==null?void 0:l.displayName)||((c=n==null?void 0:n[0])==null?void 0:c.basename),r=s||gi.basename(i);if(e===1){let d=Ut("Choose");n.length===1?d=Ut("Choose {file}",{file:s}):this.multiSelect&&(d=vi("Choose %n file","Choose %n files",n.length)),o.push({callback:()=>{},type:"primary",label:d})}return(e===4||e===3)&&o.push({callback:()=>{},label:r?Ut("Copy to {target}",{target:r}):Ut("Copy"),type:"primary",icon:Xi}),(e===2||e===4)&&o.push({callback:()=>{},label:r?Ut("Move to {target}",{target:r}):Ut("Move"),type:e===2?"primary":"secondary",icon:Wi}),o},this}allowDirectories(e=!0){return this.directoriesAllowed=e,this}startAt(e){return this.path=e,this}setFilter(e){return this.filter=e,this}disableNavigation(){return this.disabledNavigation=!0,this}build(){return new Gi(this.title,this.multiSelect,this.mimeTypeFilter,this.directoriesAllowed,this.buttons,this.path,this.filter,this.container,this.disabledNavigation)}};function Ki(e){return new Qi(e)}var $n={exports:{}};function Se(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Se=function(n){return typeof n}:Se=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Se(e)}function Ji(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function Et(){return Et=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Et.apply(this,arguments)}function Ht(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{},o=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(i).filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable}))),o.forEach(function(s){Ji(e,s,i[s])})}return e}function to(e,n){if(e==null)return{};var i={},o=Object.keys(e),s,r;for(r=0;r<o.length;r++)s=o[r],!(n.indexOf(s)>=0)&&(i[s]=e[s]);return i}function eo(e,n){if(e==null)return{};var i=to(e,n),o,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)o=r[s],!(n.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}function no(e){return io(e)||oo(e)||ro()}function io(e){if(Array.isArray(e)){for(var n=0,i=new Array(e.length);n<e.length;n++)i[n]=e[n];return i}}function oo(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function ro(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var so="1.10.2";function It(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Dt=It(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),pe=It(/Edge/i),_n=It(/firefox/i),nn=It(/safari/i)&&!It(/chrome/i)&&!It(/android/i),Bn=It(/iP(ad|od|hone)/i),ao=It(/chrome/i)&&It(/android/i),zn={capture:!1,passive:!1};function V(e,n,i){e.addEventListener(n,i,!Dt&&zn)}function F(e,n,i){e.removeEventListener(n,i,!Dt&&zn)}function ke(e,n){if(n){if(n[0]===">"&&(n=n.substring(1)),e)try{if(e.matches)return e.matches(n);if(e.msMatchesSelector)return e.msMatchesSelector(n);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(n)}catch{return!1}return!1}}function lo(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Nt(e,n,i,o){if(e){i=i||document;do{if(n!=null&&(n[0]===">"?e.parentNode===i&&ke(e,n):ke(e,n))||o&&e===i)return e;if(e===i)break}while(e=lo(e))}return null}var wn=/\s+/g;function K(e,n,i){if(e&&n)if(e.classList)e.classList[i?"add":"remove"](n);else{var o=(" "+e.className+" ").replace(wn," ").replace(" "+n+" "," ");e.className=(o+(i?" "+n:"")).replace(wn," ")}}function x(e,n,i){var o=e&&e.style;if(o){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),n===void 0?i:i[n];!(n in o)&&n.indexOf("webkit")===-1&&(n="-webkit-"+n),o[n]=i+(typeof i=="string"?"":"px")}}function qt(e,n){var i="";if(typeof e=="string")i=e;else do{var o=x(e,"transform");o&&o!=="none"&&(i=o+" "+i)}while(!n&&(e=e.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(i)}function qn(e,n,i){if(e){var o=e.getElementsByTagName(n),s=0,r=o.length;if(i)for(;s<r;s++)i(o[s],s);return o}return[]}function Mt(){var e=document.scrollingElement;return e||document.documentElement}function nt(e,n,i,o,s){if(!(!e.getBoundingClientRect&&e!==window)){var r,a,l,c,d,u,h;if(e!==window&&e!==Mt()?(r=e.getBoundingClientRect(),a=r.top,l=r.left,c=r.bottom,d=r.right,u=r.height,h=r.width):(a=0,l=0,c=window.innerHeight,d=window.innerWidth,u=window.innerHeight,h=window.innerWidth),(n||i)&&e!==window&&(s=s||e.parentNode,!Dt))do if(s&&s.getBoundingClientRect&&(x(s,"transform")!=="none"||i&&x(s,"position")!=="static")){var p=s.getBoundingClientRect();a-=p.top+parseInt(x(s,"border-top-width")),l-=p.left+parseInt(x(s,"border-left-width")),c=a+r.height,d=l+r.width;break}while(s=s.parentNode);if(o&&e!==window){var g=qt(s||e),b=g&&g.a,m=g&&g.d;g&&(a/=m,l/=b,h/=b,u/=m,c=a+u,d=l+h)}return{top:a,left:l,bottom:c,right:d,width:h,height:u}}}function Sn(e,n,i){for(var o=Ft(e,!0),s=nt(e)[n];o;){var r=nt(o)[i],a=void 0;if(i==="top"||i==="left"?a=s>=r:a=s<=r,!a)return o;if(o===Mt())break;o=Ft(o,!1)}return!1}function Te(e,n,i){for(var o=0,s=0,r=e.children;s<r.length;){if(r[s].style.display!=="none"&&r[s]!==k.ghost&&r[s]!==k.dragged&&Nt(r[s],i.draggable,e,!1)){if(o===n)return r[s];o++}s++}return null}function mn(e,n){for(var i=e.lastElementChild;i&&(i===k.ghost||x(i,"display")==="none"||n&&!ke(i,n));)i=i.previousElementSibling;return i||null}function et(e,n){var i=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==k.clone&&(!n||ke(e,n))&&i++;return i}function Cn(e){var n=0,i=0,o=Mt();if(e)do{var s=qt(e),r=s.a,a=s.d;n+=e.scrollLeft*r,i+=e.scrollTop*a}while(e!==o&&(e=e.parentNode));return[n,i]}function co(e,n){for(var i in e)if(e.hasOwnProperty(i)){for(var o in n)if(n.hasOwnProperty(o)&&n[o]===e[i][o])return Number(i)}return-1}function Ft(e,n){if(!e||!e.getBoundingClientRect)return Mt();var i=e,o=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var s=x(i);if(i.clientWidth<i.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return Mt();if(o||n)return i;o=!0}}while(i=i.parentNode);return Mt()}function uo(e,n){if(e&&n)for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i]);return e}function $e(e,n){return Math.round(e.top)===Math.round(n.top)&&Math.round(e.left)===Math.round(n.left)&&Math.round(e.height)===Math.round(n.height)&&Math.round(e.width)===Math.round(n.width)}var le;function Yn(e,n){return function(){if(!le){var i=arguments,o=this;i.length===1?e.call(o,i[0]):e.apply(o,i),le=setTimeout(function(){le=void 0},n)}}}function ho(){clearTimeout(le),le=void 0}function Un(e,n,i){e.scrollLeft+=n,e.scrollTop+=i}function gn(e){var n=window.Polymer,i=window.jQuery||window.Zepto;return n&&n.dom?n.dom(e).cloneNode(!0):i?i(e).clone(!0)[0]:e.cloneNode(!0)}function xn(e,n){x(e,"position","absolute"),x(e,"top",n.top),x(e,"left",n.left),x(e,"width",n.width),x(e,"height",n.height)}function Be(e){x(e,"position",""),x(e,"top",""),x(e,"left",""),x(e,"width",""),x(e,"height","")}var gt="Sortable"+new Date().getTime();function fo(){var e=[],n;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(o){if(!(x(o,"display")==="none"||o===k.ghost)){e.push({target:o,rect:nt(o)});var s=Ht({},e[e.length-1].rect);if(o.thisAnimationDuration){var r=qt(o,!0);r&&(s.top-=r.f,s.left-=r.e)}o.fromRect=s}})}},addAnimationState:function(i){e.push(i)},removeAnimationState:function(i){e.splice(co(e,{target:i}),1)},animateAll:function(i){var o=this;if(!this.options.animation){clearTimeout(n),typeof i=="function"&&i();return}var s=!1,r=0;e.forEach(function(a){var l=0,c=a.target,d=c.fromRect,u=nt(c),h=c.prevFromRect,p=c.prevToRect,g=a.rect,b=qt(c,!0);b&&(u.top-=b.f,u.left-=b.e),c.toRect=u,c.thisAnimationDuration&&$e(h,u)&&!$e(d,u)&&(g.top-u.top)/(g.left-u.left)===(d.top-u.top)/(d.left-u.left)&&(l=mo(g,h,p,o.options)),$e(u,d)||(c.prevFromRect=d,c.prevToRect=u,l||(l=o.options.animation),o.animate(c,g,u,l)),l&&(s=!0,r=Math.max(r,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(n),s?n=setTimeout(function(){typeof i=="function"&&i()},r):typeof i=="function"&&i(),e=[]},animate:function(i,o,s,r){if(r){x(i,"transition",""),x(i,"transform","");var a=qt(this.el),l=a&&a.a,c=a&&a.d,d=(o.left-s.left)/(l||1),u=(o.top-s.top)/(c||1);i.animatingX=!!d,i.animatingY=!!u,x(i,"transform","translate3d("+d+"px,"+u+"px,0)"),po(i),x(i,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),x(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){x(i,"transition",""),x(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},r)}}}}function po(e){return e.offsetWidth}function mo(e,n,i,o){return Math.sqrt(Math.pow(n.top-e.top,2)+Math.pow(n.left-e.left,2))/Math.sqrt(Math.pow(n.top-i.top,2)+Math.pow(n.left-i.left,2))*o.animation}var Jt=[],ze={initializeByDefault:!0},me={mount:function(e){for(var n in ze)ze.hasOwnProperty(n)&&!(n in e)&&(e[n]=ze[n]);Jt.push(e)},pluginEvent:function(e,n,i){var o=this;this.eventCanceled=!1,i.cancel=function(){o.eventCanceled=!0};var s=e+"Global";Jt.forEach(function(r){n[r.pluginName]&&(n[r.pluginName][s]&&n[r.pluginName][s](Ht({sortable:n},i)),n.options[r.pluginName]&&n[r.pluginName][e]&&n[r.pluginName][e](Ht({sortable:n},i)))})},initializePlugins:function(e,n,i,o){Jt.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,Et(i,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var r=this.modifyOption(e,s,e.options[s]);typeof r<"u"&&(e.options[s]=r)}},getEventProperties:function(e,n){var i={};return Jt.forEach(function(o){typeof o.eventProperties=="function"&&Et(i,o.eventProperties.call(n[o.pluginName],e))}),i},modifyOption:function(e,n,i){var o;return Jt.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(o=s.optionListeners[n].call(e[s.pluginName],i))}),o}};function ie(e){var n=e.sortable,i=e.rootEl,o=e.name,s=e.targetEl,r=e.cloneEl,a=e.toEl,l=e.fromEl,c=e.oldIndex,d=e.newIndex,u=e.oldDraggableIndex,h=e.newDraggableIndex,p=e.originalEvent,g=e.putSortable,b=e.extraEventProperties;if(n=n||i&&i[gt],!!n){var m,S=n.options,E="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!Dt&&!pe?m=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(o,!0,!0)),m.to=a||i,m.from=l||i,m.item=s||i,m.clone=r,m.oldIndex=c,m.newIndex=d,m.oldDraggableIndex=u,m.newDraggableIndex=h,m.originalEvent=p,m.pullMode=g?g.lastPutMode:void 0;var C=Ht({},b,me.getEventProperties(o,n));for(var _ in C)m[_]=C[_];i&&i.dispatchEvent(m),S[E]&&S[E].call(n,m)}}var _t=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.evt,s=eo(i,["evt"]);me.pluginEvent.bind(k)(e,n,Ht({dragEl:w,parentEl:ot,ghostEl:D,rootEl:Q,nextEl:$t,lastDownEl:Ce,cloneEl:tt,cloneHidden:Ot,dragStarted:oe,putSortable:dt,activeSortable:k.active,originalEvent:o,oldIndex:Gt,oldDraggableIndex:ce,newIndex:Ct,newDraggableIndex:Pt,hideGhostForTarget:Zn,unhideGhostForTarget:Gn,cloneNowHidden:function(){Ot=!0},cloneNowShown:function(){Ot=!1},dispatchSortableEvent:function(r){bt({sortable:n,name:r,originalEvent:o})}},s))};function bt(e){ie(Ht({putSortable:dt,cloneEl:tt,targetEl:w,rootEl:Q,oldIndex:Gt,oldDraggableIndex:ce,newIndex:Ct,newDraggableIndex:Pt},e))}var w,ot,D,Q,$t,Ce,tt,Ot,Gt,Ct,ce,Pt,ve,dt,Zt=!1,Ne=!1,Le=[],Rt,kt,qe,Ye,En,An,oe,jt,ue,de=!1,be=!1,xe,pt,Ue=[],on=!1,Me=[],Re=typeof document<"u",ye=Bn,kn=pe||Dt?"cssFloat":"float",go=Re&&!ao&&!Bn&&"draggable"in document.createElement("div"),jn=function(){if(Re){if(Dt)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Wn=function(e,n){var i=x(e),o=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),s=Te(e,0,n),r=Te(e,1,n),a=s&&x(s),l=r&&x(r),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+nt(s).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+nt(r).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var u=a.float==="left"?"left":"right";return r&&(l.clear==="both"||l.clear===u)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=o&&i[kn]==="none"||r&&i[kn]==="none"&&c+d>o)?"vertical":"horizontal"},vo=function(e,n,i){var o=i?e.left:e.top,s=i?e.right:e.bottom,r=i?e.width:e.height,a=i?n.left:n.top,l=i?n.right:n.bottom,c=i?n.width:n.height;return o===a||s===l||o+r/2===a+c/2},bo=function(e,n){var i;return Le.some(function(o){if(!mn(o)){var s=nt(o),r=o[gt].options.emptyInsertThreshold,a=e>=s.left-r&&e<=s.right+r,l=n>=s.top-r&&n<=s.bottom+r;if(r&&a&&l)return i=o}}),i},Xn=function(e){function n(s,r){return function(a,l,c,d){var u=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(r||u))return!0;if(s==null||s===!1)return!1;if(r&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,c,d),r)(a,l,c,d);var h=(r?a:l).options.group.name;return s===!0||typeof s=="string"&&s===h||s.join&&s.indexOf(h)>-1}}var i={},o=e.group;(!o||Se(o)!="object")&&(o={name:o}),i.name=o.name,i.checkPull=n(o.pull,!0),i.checkPut=n(o.put),i.revertClone=o.revertClone,e.group=i},Zn=function(){!jn&&D&&x(D,"display","none")},Gn=function(){!jn&&D&&x(D,"display","")};Re&&document.addEventListener("click",function(e){if(Ne)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Ne=!1,!1},!0);var Vt=function(e){if(w){e=e.touches?e.touches[0]:e;var n=bo(e.clientX,e.clientY);if(n){var i={};for(var o in e)e.hasOwnProperty(o)&&(i[o]=e[o]);i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[gt]._onDragOver(i)}}},yo=function(e){w&&w.parentNode[gt]._isOutsideThisEl(e.target)};function k(e,n){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=n=Et({},n),e[gt]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Wn(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,a){r.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:k.supportPointer!==!1&&"PointerEvent"in window,emptyInsertThreshold:5};me.initializePlugins(this,e,i);for(var o in i)!(o in n)&&(n[o]=i[o]);Xn(n);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=n.forceFallback?!1:go,this.nativeDraggable&&(this.options.touchStartThreshold=1),n.supportPointer?V(e,"pointerdown",this._onTapStart):(V(e,"mousedown",this._onTapStart),V(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(V(e,"dragover",this),V(e,"dragenter",this)),Le.push(this.el),n.store&&n.store.get&&this.sort(n.store.get(this)||[]),Et(this,fo())}k.prototype={constructor:k,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(jt=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,w):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,i=this.el,o=this.options,s=o.preventOnFilter,r=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,d=o.filter;if(Ao(i),!w&&!(/mousedown|pointerdown/.test(r)&&e.button!==0||o.disabled)&&!c.isContentEditable&&(l=Nt(l,o.draggable,i,!1),!(l&&l.animated)&&Ce!==l)){if(Gt=et(l),ce=et(l,o.draggable),typeof d=="function"){if(d.call(this,e,l,this)){bt({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:i,fromEl:i}),_t("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(u){if(u=Nt(c,u.trim(),i,!1),u)return bt({sortable:n,rootEl:u,name:"filter",targetEl:l,fromEl:i,toEl:i}),_t("filter",n,{evt:e}),!0}),d)){s&&e.cancelable&&e.preventDefault();return}o.handle&&!Nt(c,o.handle,i,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,i){var o=this,s=o.el,r=o.options,a=s.ownerDocument,l;if(i&&!w&&i.parentNode===s){var c=nt(i);if(Q=s,w=i,ot=w.parentNode,$t=w.nextSibling,Ce=i,ve=r.group,k.dragged=w,Rt={target:w,clientX:(n||e).clientX,clientY:(n||e).clientY},En=Rt.clientX-c.left,An=Rt.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,w.style["will-change"]="all",l=function(){if(_t("delayEnded",o,{evt:e}),k.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!_n&&o.nativeDraggable&&(w.draggable=!0),o._triggerDragStart(e,n),bt({sortable:o,name:"choose",originalEvent:e}),K(w,r.chosenClass,!0)},r.ignore.split(",").forEach(function(d){qn(w,d.trim(),We)}),V(a,"dragover",Vt),V(a,"mousemove",Vt),V(a,"touchmove",Vt),V(a,"mouseup",o._onDrop),V(a,"touchend",o._onDrop),V(a,"touchcancel",o._onDrop),_n&&this.nativeDraggable&&(this.options.touchStartThreshold=4,w.draggable=!0),_t("delayStart",this,{evt:e}),r.delay&&(!r.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(pe||Dt))){if(k.eventCanceled){this._onDrop();return}V(a,"mouseup",o._disableDelayedDrag),V(a,"touchend",o._disableDelayedDrag),V(a,"touchcancel",o._disableDelayedDrag),V(a,"mousemove",o._delayedDragTouchMoveHandler),V(a,"touchmove",o._delayedDragTouchMoveHandler),r.supportPointer&&V(a,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(l,r.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){w&&We(w),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;F(e,"mouseup",this._disableDelayedDrag),F(e,"touchend",this._disableDelayedDrag),F(e,"touchcancel",this._disableDelayedDrag),F(e,"mousemove",this._delayedDragTouchMoveHandler),F(e,"touchmove",this._delayedDragTouchMoveHandler),F(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?V(document,"pointermove",this._onTouchMove):n?V(document,"touchmove",this._onTouchMove):V(document,"mousemove",this._onTouchMove):(V(w,"dragend",this),V(Q,"dragstart",this._onDragStart));try{document.selection?Ee(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Zt=!1,Q&&w){_t("dragStarted",this,{evt:n}),this.nativeDraggable&&V(document,"dragover",yo);var i=this.options;!e&&K(w,i.dragClass,!1),K(w,i.ghostClass,!0),k.active=this,e&&this._appendGhost(),bt({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(kt){this._lastX=kt.clientX,this._lastY=kt.clientY,Zn();for(var e=document.elementFromPoint(kt.clientX,kt.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(kt.clientX,kt.clientY),e!==n);)n=e;if(w.parentNode[gt]._isOutsideThisEl(e),n)do{if(n[gt]){var i=void 0;if(i=n[gt]._onDragOver({clientX:kt.clientX,clientY:kt.clientY,target:e,rootEl:n}),i&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);Gn()}},_onTouchMove:function(e){if(Rt){var n=this.options,i=n.fallbackTolerance,o=n.fallbackOffset,s=e.touches?e.touches[0]:e,r=D&&qt(D,!0),a=D&&r&&r.a,l=D&&r&&r.d,c=ye&&pt&&Cn(pt),d=(s.clientX-Rt.clientX+o.x)/(a||1)+(c?c[0]-Ue[0]:0)/(a||1),u=(s.clientY-Rt.clientY+o.y)/(l||1)+(c?c[1]-Ue[1]:0)/(l||1);if(!k.active&&!Zt){if(i&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(D){r?(r.e+=d-(qe||0),r.f+=u-(Ye||0)):r={a:1,b:0,c:0,d:1,e:d,f:u};var h="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");x(D,"webkitTransform",h),x(D,"mozTransform",h),x(D,"msTransform",h),x(D,"transform",h),qe=d,Ye=u,kt=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!D){var e=this.options.fallbackOnBody?document.body:Q,n=nt(w,!0,ye,!0,e),i=this.options;if(ye){for(pt=e;x(pt,"position")==="static"&&x(pt,"transform")==="none"&&pt!==document;)pt=pt.parentNode;pt!==document.body&&pt!==document.documentElement?(pt===document&&(pt=Mt()),n.top+=pt.scrollTop,n.left+=pt.scrollLeft):pt=Mt(),Ue=Cn(pt)}D=w.cloneNode(!0),K(D,i.ghostClass,!1),K(D,i.fallbackClass,!0),K(D,i.dragClass,!0),x(D,"transition",""),x(D,"transform",""),x(D,"box-sizing","border-box"),x(D,"margin",0),x(D,"top",n.top),x(D,"left",n.left),x(D,"width",n.width),x(D,"height",n.height),x(D,"opacity","0.8"),x(D,"position",ye?"absolute":"fixed"),x(D,"zIndex","100000"),x(D,"pointerEvents","none"),k.ghost=D,e.appendChild(D),x(D,"transform-origin",En/parseInt(D.style.width)*100+"% "+An/parseInt(D.style.height)*100+"%")}},_onDragStart:function(e,n){var i=this,o=e.dataTransfer,s=i.options;if(_t("dragStart",this,{evt:e}),k.eventCanceled){this._onDrop();return}_t("setupClone",this),k.eventCanceled||(tt=gn(w),tt.draggable=!1,tt.style["will-change"]="",this._hideClone(),K(tt,this.options.chosenClass,!1),k.clone=tt),i.cloneId=Ee(function(){_t("clone",i),!k.eventCanceled&&(i.options.removeCloneOnHide||Q.insertBefore(tt,w),i._hideClone(),bt({sortable:i,name:"clone"}))}),!n&&K(w,s.dragClass,!0),n?(Ne=!0,i._loopId=setInterval(i._emulateDragOver,50)):(F(document,"mouseup",i._onDrop),F(document,"touchend",i._onDrop),F(document,"touchcancel",i._onDrop),o&&(o.effectAllowed="move",s.setData&&s.setData.call(i,o,w)),V(document,"drop",i),x(w,"transform","translateZ(0)")),Zt=!0,i._dragStartId=Ee(i._dragStarted.bind(i,n,e)),V(document,"selectstart",i),oe=!0,nn&&x(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,i=e.target,o,s,r,a=this.options,l=a.group,c=k.active,d=ve===l,u=a.sort,h=dt||c,p,g=this,b=!1;if(on)return;function m(z,it){_t(z,g,Ht({evt:e,isOwner:d,axis:p?"vertical":"horizontal",revert:r,dragRect:o,targetRect:s,canSort:u,fromSortable:h,target:i,completed:E,onMove:function(yt,ut){return je(Q,n,w,o,yt,nt(yt),e,ut)},changed:C},it))}function S(){m("dragOverAnimationCapture"),g.captureAnimationState(),g!==h&&h.captureAnimationState()}function E(z){return m("dragOverCompleted",{insertion:z}),z&&(d?c._hideClone():c._showClone(g),g!==h&&(K(w,dt?dt.options.ghostClass:c.options.ghostClass,!1),K(w,a.ghostClass,!0)),dt!==g&&g!==k.active?dt=g:g===k.active&&dt&&(dt=null),h===g&&(g._ignoreWhileAnimating=i),g.animateAll(function(){m("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(i===w&&!w.animated||i===n&&!i.animated)&&(jt=null),!a.dragoverBubble&&!e.rootEl&&i!==document&&(w.parentNode[gt]._isOutsideThisEl(e.target),!z&&Vt(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),b=!0}function C(){Ct=et(w),Pt=et(w,a.draggable),bt({sortable:g,name:"change",toEl:n,newIndex:Ct,newDraggableIndex:Pt,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=Nt(i,a.draggable,n,!0),m("dragOver"),k.eventCanceled)return b;if(w.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||g._ignoreWhileAnimating===i)return E(!1);if(Ne=!1,c&&!a.disabled&&(d?u||(r=!Q.contains(w)):dt===this||(this.lastPutMode=ve.checkPull(this,c,w,e))&&l.checkPut(this,c,w,e))){if(p=this._getDirection(e,i)==="vertical",o=nt(w),m("dragOverValid"),k.eventCanceled)return b;if(r)return ot=Q,S(),this._hideClone(),m("revert"),k.eventCanceled||($t?Q.insertBefore(w,$t):Q.appendChild(w)),E(!0);var _=mn(n,a.draggable);if(!_||So(e,p,this)&&!_.animated){if(_===w)return E(!1);if(_&&n===e.target&&(i=_),i&&(s=nt(i)),je(Q,n,w,o,i,s,e,!!i)!==!1)return S(),n.appendChild(w),ot=n,C(),E(!0)}else if(i.parentNode===n){s=nt(i);var I=0,H,P=w.parentNode!==n,O=!vo(w.animated&&w.toRect||o,i.animated&&i.toRect||s,p),T=p?"top":"left",A=Sn(i,"top","top")||Sn(w,"top","top"),N=A?A.scrollTop:void 0;jt!==i&&(H=s[T],de=!1,be=!O&&a.invertSwap||P),I=Co(e,i,s,p,O?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,be,jt===i);var $;if(I!==0){var st=et(w);do st-=I,$=ot.children[st];while($&&(x($,"display")==="none"||$===D))}if(I===0||$===i)return E(!1);jt=i,ue=I;var at=i.nextElementSibling,J=!1;J=I===1;var Y=je(Q,n,w,o,i,s,e,J);if(Y!==!1)return(Y===1||Y===-1)&&(J=Y===1),on=!0,setTimeout(wo,30),S(),J&&!at?n.appendChild(w):i.parentNode.insertBefore(w,J?at:i),A&&Un(A,0,N-A.scrollTop),ot=w.parentNode,H!==void 0&&!be&&(xe=Math.abs(H-nt(i)[T])),C(),E(!0)}if(n.contains(w))return E(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){F(document,"mousemove",this._onTouchMove),F(document,"touchmove",this._onTouchMove),F(document,"pointermove",this._onTouchMove),F(document,"dragover",Vt),F(document,"mousemove",Vt),F(document,"touchmove",Vt)},_offUpEvents:function(){var e=this.el.ownerDocument;F(e,"mouseup",this._onDrop),F(e,"touchend",this._onDrop),F(e,"pointerup",this._onDrop),F(e,"touchcancel",this._onDrop),F(document,"selectstart",this)},_onDrop:function(e){var n=this.el,i=this.options;if(Ct=et(w),Pt=et(w,i.draggable),_t("drop",this,{evt:e}),ot=w&&w.parentNode,Ct=et(w),Pt=et(w,i.draggable),k.eventCanceled){this._nulling();return}Zt=!1,be=!1,de=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),rn(this.cloneId),rn(this._dragStartId),this.nativeDraggable&&(F(document,"drop",this),F(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),nn&&x(document.body,"user-select",""),x(w,"transform",""),e&&(oe&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),D&&D.parentNode&&D.parentNode.removeChild(D),(Q===ot||dt&&dt.lastPutMode!=="clone")&&tt&&tt.parentNode&&tt.parentNode.removeChild(tt),w&&(this.nativeDraggable&&F(w,"dragend",this),We(w),w.style["will-change"]="",oe&&!Zt&&K(w,dt?dt.options.ghostClass:this.options.ghostClass,!1),K(w,this.options.chosenClass,!1),bt({sortable:this,name:"unchoose",toEl:ot,newIndex:null,newDraggableIndex:null,originalEvent:e}),Q!==ot?(Ct>=0&&(bt({rootEl:ot,name:"add",toEl:ot,fromEl:Q,originalEvent:e}),bt({sortable:this,name:"remove",toEl:ot,originalEvent:e}),bt({rootEl:ot,name:"sort",toEl:ot,fromEl:Q,originalEvent:e}),bt({sortable:this,name:"sort",toEl:ot,originalEvent:e})),dt&&dt.save()):Ct!==Gt&&Ct>=0&&(bt({sortable:this,name:"update",toEl:ot,originalEvent:e}),bt({sortable:this,name:"sort",toEl:ot,originalEvent:e})),k.active&&((Ct==null||Ct===-1)&&(Ct=Gt,Pt=ce),bt({sortable:this,name:"end",toEl:ot,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){_t("nulling",this),Q=w=ot=D=$t=tt=Ce=Ot=Rt=kt=oe=Ct=Pt=Gt=ce=jt=ue=dt=ve=k.dragged=k.ghost=k.clone=k.active=null,Me.forEach(function(e){e.checked=!0}),Me.length=qe=Ye=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":w&&(this._onDragOver(e),_o(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,i=this.el.children,o=0,s=i.length,r=this.options;o<s;o++)n=i[o],Nt(n,r.draggable,this.el,!1)&&e.push(n.getAttribute(r.dataIdAttr)||Eo(n));return e},sort:function(e){var n={},i=this.el;this.toArray().forEach(function(o,s){var r=i.children[s];Nt(r,this.options.draggable,i,!1)&&(n[o]=r)},this),e.forEach(function(o){n[o]&&(i.removeChild(n[o]),i.appendChild(n[o]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Nt(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var i=this.options;if(n===void 0)return i[e];var o=me.modifyOption(this,e,n);typeof o<"u"?i[e]=o:i[e]=n,e==="group"&&Xn(i)},destroy:function(){_t("destroy",this);var e=this.el;e[gt]=null,F(e,"mousedown",this._onTapStart),F(e,"touchstart",this._onTapStart),F(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(F(e,"dragover",this),F(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Le.splice(Le.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ot){if(_t("hideClone",this),k.eventCanceled)return;x(tt,"display","none"),this.options.removeCloneOnHide&&tt.parentNode&&tt.parentNode.removeChild(tt),Ot=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ot){if(_t("showClone",this),k.eventCanceled)return;Q.contains(w)&&!this.options.group.revertClone?Q.insertBefore(tt,w):$t?Q.insertBefore(tt,$t):Q.appendChild(tt),this.options.group.revertClone&&this.animate(w,tt),x(tt,"display",""),Ot=!1}}};function _o(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function je(e,n,i,o,s,r,a,l){var c,d=e[gt],u=d.options.onMove,h;return window.CustomEvent&&!Dt&&!pe?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=n,c.from=e,c.dragged=i,c.draggedRect=o,c.related=s||n,c.relatedRect=r||nt(n),c.willInsertAfter=l,c.originalEvent=a,e.dispatchEvent(c),u&&(h=u.call(d,c,a)),h}function We(e){e.draggable=!1}function wo(){on=!1}function So(e,n,i){var o=nt(mn(i.el,i.options.draggable)),s=10;return n?e.clientX>o.right+s||e.clientX<=o.right&&e.clientY>o.bottom&&e.clientX>=o.left:e.clientX>o.right&&e.clientY>o.top||e.clientX<=o.right&&e.clientY>o.bottom+s}function Co(e,n,i,o,s,r,a,l){var c=o?e.clientY:e.clientX,d=o?i.height:i.width,u=o?i.top:i.left,h=o?i.bottom:i.right,p=!1;if(!a){if(l&&xe<d*s){if(!de&&(ue===1?c>u+d*r/2:c<h-d*r/2)&&(de=!0),de)p=!0;else if(ue===1?c<u+xe:c>h-xe)return-ue}else if(c>u+d*(1-s)/2&&c<h-d*(1-s)/2)return xo(n)}return p=p||a,p&&(c<u+d*r/2||c>h-d*r/2)?c>u+d/2?1:-1:0}function xo(e){return et(w)<et(e)?1:-1}function Eo(e){for(var n=e.tagName+e.className+e.src+e.href+e.textContent,i=n.length,o=0;i--;)o+=n.charCodeAt(i);return o.toString(36)}function Ao(e){Me.length=0;for(var n=e.getElementsByTagName("input"),i=n.length;i--;){var o=n[i];o.checked&&Me.push(o)}}function Ee(e){return setTimeout(e,0)}function rn(e){return clearTimeout(e)}Re&&V(document,"touchmove",function(e){(k.active||Zt)&&e.cancelable&&e.preventDefault()}),k.utils={on:V,off:F,css:x,find:qn,is:function(e,n){return!!Nt(e,n,e,!1)},extend:uo,throttle:Yn,closest:Nt,toggleClass:K,clone:gn,index:et,nextTick:Ee,cancelNextTick:rn,detectDirection:Wn,getChild:Te},k.get=function(e){return e[gt]},k.mount=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n[0].constructor===Array&&(n=n[0]),n.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(k.utils=Ht({},k.utils,o.utils)),me.mount(o)})},k.create=function(e,n){return new k(e,n)},k.version=so;var rt=[],re,sn,an=!1,Xe,Ze,Ie,se;function ko(){function e(){this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this))}return e.prototype={dragStarted:function(n){var i=n.originalEvent;this.sortable.nativeDraggable?V(document,"dragover",this._handleAutoScroll):this.options.supportPointer?V(document,"pointermove",this._handleFallbackAutoScroll):i.touches?V(document,"touchmove",this._handleFallbackAutoScroll):V(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var i=n.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?F(document,"dragover",this._handleAutoScroll):(F(document,"pointermove",this._handleFallbackAutoScroll),F(document,"touchmove",this._handleFallbackAutoScroll),F(document,"mousemove",this._handleFallbackAutoScroll)),Tn(),Ae(),ho()},nulling:function(){Ie=sn=re=an=se=Xe=Ze=null,rt.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,i){var o=this,s=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,r);if(Ie=n,i||pe||Dt||nn){Ge(n,this.options,a,i);var l=Ft(a,!0);an&&(!se||s!==Xe||r!==Ze)&&(se&&Tn(),se=setInterval(function(){var c=Ft(document.elementFromPoint(s,r),!0);c!==l&&(l=c,Ae()),Ge(n,o.options,c,i)},10),Xe=s,Ze=r)}else{if(!this.options.bubbleScroll||Ft(a,!0)===Mt()){Ae();return}Ge(n,this.options,Ft(a,!1),!1)}}},Et(e,{pluginName:"scroll",initializeByDefault:!0})}function Ae(){rt.forEach(function(e){clearInterval(e.pid)}),rt=[]}function Tn(){clearInterval(se)}var Ge=Yn(function(e,n,i,o){if(n.scroll){var s=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,a=n.scrollSensitivity,l=n.scrollSpeed,c=Mt(),d=!1,u;sn!==i&&(sn=i,Ae(),re=n.scroll,u=n.scrollFn,re===!0&&(re=Ft(i,!0)));var h=0,p=re;do{var g=p,b=nt(g),m=b.top,S=b.bottom,E=b.left,C=b.right,_=b.width,I=b.height,H=void 0,P=void 0,O=g.scrollWidth,T=g.scrollHeight,A=x(g),N=g.scrollLeft,$=g.scrollTop;g===c?(H=_<O&&(A.overflowX==="auto"||A.overflowX==="scroll"||A.overflowX==="visible"),P=I<T&&(A.overflowY==="auto"||A.overflowY==="scroll"||A.overflowY==="visible")):(H=_<O&&(A.overflowX==="auto"||A.overflowX==="scroll"),P=I<T&&(A.overflowY==="auto"||A.overflowY==="scroll"));var st=H&&(Math.abs(C-s)<=a&&N+_<O)-(Math.abs(E-s)<=a&&!!N),at=P&&(Math.abs(S-r)<=a&&$+I<T)-(Math.abs(m-r)<=a&&!!$);if(!rt[h])for(var J=0;J<=h;J++)rt[J]||(rt[J]={});(rt[h].vx!=st||rt[h].vy!=at||rt[h].el!==g)&&(rt[h].el=g,rt[h].vx=st,rt[h].vy=at,clearInterval(rt[h].pid),(st!=0||at!=0)&&(d=!0,rt[h].pid=setInterval((function(){o&&this.layer===0&&k.active._onTouchMove(Ie);var Y=rt[this.layer].vy?rt[this.layer].vy*l:0,z=rt[this.layer].vx?rt[this.layer].vx*l:0;typeof u=="function"&&u.call(k.dragged.parentNode[gt],z,Y,e,Ie,rt[this.layer].el)!=="continue"||Un(rt[this.layer].el,z,Y)}).bind({layer:h}),24))),h++}while(n.bubbleScroll&&p!==c&&(p=Ft(p,!1)));an=d}},30),Qn=function(e){var n=e.originalEvent,i=e.putSortable,o=e.dragEl,s=e.activeSortable,r=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=i||s;a();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,u=document.elementFromPoint(d.clientX,d.clientY);l(),c&&!c.el.contains(u)&&(r("spill"),this.onSpill({dragEl:o,putSortable:i}))}};function ln(){}ln.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var o=Te(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(n,o):this.sortable.el.appendChild(n),this.sortable.animateAll(),i&&i.animateAll()},drop:Qn},Et(ln,{pluginName:"revertOnSpill"});function cn(){}cn.prototype={onSpill:function(e){var n=e.dragEl,i=e.putSortable,o=i||this.sortable;o.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),o.animateAll()},drop:Qn},Et(cn,{pluginName:"removeOnSpill"});var xt;function To(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(n){var i=n.dragEl;xt=i},dragOverValid:function(n){var i=n.completed,o=n.target,s=n.onMove,r=n.activeSortable,a=n.changed,l=n.cancel;if(r.options.swap){var c=this.sortable.el,d=this.options;if(o&&o!==c){var u=xt;s(o)!==!1?(K(o,d.swapClass,!0),xt=o):xt=null,u&&u!==xt&&K(u,d.swapClass,!1)}a(),i(!0),l()}},drop:function(n){var i=n.activeSortable,o=n.putSortable,s=n.dragEl,r=o||this.sortable,a=this.options;xt&&K(xt,a.swapClass,!1),xt&&(a.swap||o&&o.options.swap)&&s!==xt&&(r.captureAnimationState(),r!==i&&i.captureAnimationState(),No(s,xt),r.animateAll(),r!==i&&i.animateAll())},nulling:function(){xt=null}},Et(e,{pluginName:"swap",eventProperties:function(){return{swapItem:xt}}})}function No(e,n){var i=e.parentNode,o=n.parentNode,s,r;!i||!o||i.isEqualNode(n)||o.isEqualNode(e)||(s=et(e),r=et(n),i.isEqualNode(o)&&s<r&&r++,i.insertBefore(n,i.children[s]),o.insertBefore(e,o.children[r]))}var M=[],St=[],te,Tt,ee=!1,wt=!1,Wt=!1,X,ne,_e;function Lo(){function e(n){for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));n.options.supportPointer?V(document,"pointerup",this._deselectMultiDrag):(V(document,"mouseup",this._deselectMultiDrag),V(document,"touchend",this._deselectMultiDrag)),V(document,"keydown",this._checkKeyDown),V(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(o,s){var r="";M.length&&Tt===n?M.forEach(function(a,l){r+=(l?", ":"")+a.textContent}):r=s.textContent,o.setData("Text",r)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var i=n.dragEl;X=i},delayEnded:function(){this.isMultiDrag=~M.indexOf(X)},setupClone:function(n){var i=n.sortable,o=n.cancel;if(this.isMultiDrag){for(var s=0;s<M.length;s++)St.push(gn(M[s])),St[s].sortableIndex=M[s].sortableIndex,St[s].draggable=!1,St[s].style["will-change"]="",K(St[s],this.options.selectedClass,!1),M[s]===X&&K(St[s],this.options.chosenClass,!1);i._hideClone(),o()}},clone:function(n){var i=n.sortable,o=n.rootEl,s=n.dispatchSortableEvent,r=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||M.length&&Tt===i&&(Nn(!0,o),s("clone"),r()))},showClone:function(n){var i=n.cloneNowShown,o=n.rootEl,s=n.cancel;this.isMultiDrag&&(Nn(!1,o),St.forEach(function(r){x(r,"display","")}),i(),_e=!1,s())},hideClone:function(n){var i=this;n.sortable;var o=n.cloneNowHidden,s=n.cancel;this.isMultiDrag&&(St.forEach(function(r){x(r,"display","none"),i.options.removeCloneOnHide&&r.parentNode&&r.parentNode.removeChild(r)}),o(),_e=!0,s())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&Tt&&Tt.multiDrag._deselectMultiDrag(),M.forEach(function(i){i.sortableIndex=et(i)}),M=M.sort(function(i,o){return i.sortableIndex-o.sortableIndex}),Wt=!0},dragStarted:function(n){var i=this,o=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(o.captureAnimationState(),this.options.animation)){M.forEach(function(r){r!==X&&x(r,"position","absolute")});var s=nt(X,!1,!0,!0);M.forEach(function(r){r!==X&&xn(r,s)}),wt=!0,ee=!0}o.animateAll(function(){wt=!1,ee=!1,i.options.animation&&M.forEach(function(r){Be(r)}),i.options.sort&&we()})}},dragOver:function(n){var i=n.target,o=n.completed,s=n.cancel;wt&&~M.indexOf(i)&&(o(!1),s())},revert:function(n){var i=n.fromSortable,o=n.rootEl,s=n.sortable,r=n.dragRect;M.length>1&&(M.forEach(function(a){s.addAnimationState({target:a,rect:wt?nt(a):r}),Be(a),a.fromRect=r,i.removeAnimationState(a)}),wt=!1,Mo(!this.options.removeCloneOnHide,o))},dragOverCompleted:function(n){var i=n.sortable,o=n.isOwner,s=n.insertion,r=n.activeSortable,a=n.parentEl,l=n.putSortable,c=this.options;if(s){if(o&&r._hideClone(),ee=!1,c.animation&&M.length>1&&(wt||!o&&!r.options.sort&&!l)){var d=nt(X,!1,!0,!0);M.forEach(function(h){h!==X&&(xn(h,d),a.appendChild(h))}),wt=!0}if(!o)if(wt||we(),M.length>1){var u=_e;r._showClone(i),r.options.animation&&!_e&&u&&St.forEach(function(h){r.addAnimationState({target:h,rect:ne}),h.fromRect=ne,h.thisAnimationDuration=null})}else r._showClone(i)}},dragOverAnimationCapture:function(n){var i=n.dragRect,o=n.isOwner,s=n.activeSortable;if(M.forEach(function(a){a.thisAnimationDuration=null}),s.options.animation&&!o&&s.multiDrag.isMultiDrag){ne=Et({},i);var r=qt(X,!0);ne.top-=r.f,ne.left-=r.e}},dragOverAnimationComplete:function(){wt&&(wt=!1,we())},drop:function(n){var i=n.originalEvent,o=n.rootEl,s=n.parentEl,r=n.sortable,a=n.dispatchSortableEvent,l=n.oldIndex,c=n.putSortable,d=c||this.sortable;if(i){var u=this.options,h=s.children;if(!Wt)if(u.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),K(X,u.selectedClass,!~M.indexOf(X)),~M.indexOf(X))M.splice(M.indexOf(X),1),te=null,ie({sortable:r,rootEl:o,name:"deselect",targetEl:X,originalEvt:i});else{if(M.push(X),ie({sortable:r,rootEl:o,name:"select",targetEl:X,originalEvt:i}),i.shiftKey&&te&&r.el.contains(te)){var p=et(te),g=et(X);if(~p&&~g&&p!==g){var b,m;for(g>p?(m=p,b=g):(m=g,b=p+1);m<b;m++)~M.indexOf(h[m])||(K(h[m],u.selectedClass,!0),M.push(h[m]),ie({sortable:r,rootEl:o,name:"select",targetEl:h[m],originalEvt:i}))}}else te=X;Tt=d}if(Wt&&this.isMultiDrag){if((s[gt].options.sort||s!==o)&&M.length>1){var S=nt(X),E=et(X,":not(."+this.options.selectedClass+")");if(!ee&&u.animation&&(X.thisAnimationDuration=null),d.captureAnimationState(),!ee&&(u.animation&&(X.fromRect=S,M.forEach(function(_){if(_.thisAnimationDuration=null,_!==X){var I=wt?nt(_):S;_.fromRect=I,d.addAnimationState({target:_,rect:I})}})),we(),M.forEach(function(_){h[E]?s.insertBefore(_,h[E]):s.appendChild(_),E++}),l===et(X))){var C=!1;M.forEach(function(_){if(_.sortableIndex!==et(_)){C=!0;return}}),C&&a("update")}M.forEach(function(_){Be(_)}),d.animateAll()}Tt=d}(o===s||c&&c.lastPutMode!=="clone")&&St.forEach(function(_){_.parentNode&&_.parentNode.removeChild(_)})}},nullingGlobal:function(){this.isMultiDrag=Wt=!1,St.length=0},destroyGlobal:function(){this._deselectMultiDrag(),F(document,"pointerup",this._deselectMultiDrag),F(document,"mouseup",this._deselectMultiDrag),F(document,"touchend",this._deselectMultiDrag),F(document,"keydown",this._checkKeyDown),F(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Wt<"u"&&Wt)&&Tt===this.sortable&&!(n&&Nt(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;M.length;){var i=M[0];K(i,this.options.selectedClass,!1),M.shift(),ie({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:i,originalEvt:n})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Et(e,{pluginName:"multiDrag",utils:{select:function(n){var i=n.parentNode[gt];!i||!i.options.multiDrag||~M.indexOf(n)||(Tt&&Tt!==i&&(Tt.multiDrag._deselectMultiDrag(),Tt=i),K(n,i.options.selectedClass,!0),M.push(n))},deselect:function(n){var i=n.parentNode[gt],o=M.indexOf(n);!i||!i.options.multiDrag||!~o||(K(n,i.options.selectedClass,!1),M.splice(o,1))}},eventProperties:function(){var n=this,i=[],o=[];return M.forEach(function(s){i.push({multiDragElement:s,index:s.sortableIndex});var r;wt&&s!==X?r=-1:wt?r=et(s,":not(."+n.options.selectedClass+")"):r=et(s),o.push({multiDragElement:s,index:r})}),{items:no(M),clones:[].concat(St),oldIndicies:i,newIndicies:o}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function Mo(e,n){M.forEach(function(i,o){var s=n.children[i.sortableIndex+(e?Number(o):0)];s?n.insertBefore(i,s):n.appendChild(i)})}function Nn(e,n){St.forEach(function(i,o){var s=n.children[i.sortableIndex+(e?Number(o):0)];s?n.insertBefore(i,s):n.appendChild(i)})}function we(){M.forEach(function(e){e!==X&&e.parentNode&&e.parentNode.removeChild(e)})}k.mount(new ko),k.mount(cn,ln);const Io=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:Lo,Sortable:k,Swap:To,default:k},Symbol.toStringTag,{value:"Module"})),Do=ci(Io);(function(e,n){(function(i,o){e.exports=o(Do)})(typeof self<"u"?self:Dn,function(i){return function(o){var s={};function r(a){if(s[a])return s[a].exports;var l=s[a]={i:a,l:!1,exports:{}};return o[a].call(l.exports,l,l.exports,r),l.l=!0,l.exports}return r.m=o,r.c=s,r.d=function(a,l,c){r.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:c})},r.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},r.t=function(a,l){if(l&1&&(a=r(a)),l&8||l&4&&typeof a=="object"&&a&&a.__esModule)return a;var c=Object.create(null);if(r.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),l&2&&typeof a!="string")for(var d in a)r.d(c,d,(function(u){return a[u]}).bind(null,d));return c},r.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return r.d(l,"a",l),l},r.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},r.p="",r(r.s="fb15")}({"01f9":function(o,s,r){var a=r("2d00"),l=r("5ca1"),c=r("2aba"),d=r("32e9"),u=r("84f2"),h=r("41a0"),p=r("7f20"),g=r("38fd"),b=r("2b4c")("iterator"),m=!([].keys&&"next"in[].keys()),S="@@iterator",E="keys",C="values",_=function(){return this};o.exports=function(I,H,P,O,T,A,N){h(P,H,O);var $=function(y){if(!m&&y in Y)return Y[y];switch(y){case E:return function(){return new P(this,y)};case C:return function(){return new P(this,y)}}return function(){return new P(this,y)}},st=H+" Iterator",at=T==C,J=!1,Y=I.prototype,z=Y[b]||Y[S]||T&&Y[T],it=z||$(T),yt=T?at?$("entries"):it:void 0,ut=H=="Array"&&Y.entries||z,ft,f,v;if(ut&&(v=g(ut.call(new I)),v!==Object.prototype&&v.next&&(p(v,st,!0),!a&&typeof v[b]!="function"&&d(v,b,_))),at&&z&&z.name!==C&&(J=!0,it=function(){return z.call(this)}),(!a||N)&&(m||J||!Y[b])&&d(Y,b,it),u[H]=it,u[st]=_,T)if(ft={values:at?it:$(C),keys:A?it:$(E),entries:yt},N)for(f in ft)f in Y||c(Y,f,ft[f]);else l(l.P+l.F*(m||J),H,ft);return ft}},"02f4":function(o,s,r){var a=r("4588"),l=r("be13");o.exports=function(c){return function(d,u){var h=String(l(d)),p=a(u),g=h.length,b,m;return p<0||p>=g?c?"":void 0:(b=h.charCodeAt(p),b<55296||b>56319||p+1===g||(m=h.charCodeAt(p+1))<56320||m>57343?c?h.charAt(p):b:c?h.slice(p,p+2):(b-55296<<10)+(m-56320)+65536)}}},"0390":function(o,s,r){var a=r("02f4")(!0);o.exports=function(l,c,d){return c+(d?a(l,c).length:1)}},"0bfb":function(o,s,r){var a=r("cb7c");o.exports=function(){var l=a(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},"0d58":function(o,s,r){var a=r("ce10"),l=r("e11e");o.exports=Object.keys||function(c){return a(c,l)}},1495:function(o,s,r){var a=r("86cc"),l=r("cb7c"),c=r("0d58");o.exports=r("9e1e")?Object.defineProperties:function(d,u){l(d);for(var h=c(u),p=h.length,g=0,b;p>g;)a.f(d,b=h[g++],u[b]);return d}},"214f":function(o,s,r){r("b0c5");var a=r("2aba"),l=r("32e9"),c=r("79e5"),d=r("be13"),u=r("2b4c"),h=r("520a"),p=u("species"),g=!c(function(){var m=/./;return m.exec=function(){var S=[];return S.groups={a:"7"},S},"".replace(m,"$<a>")!=="7"}),b=function(){var m=/(?:)/,S=m.exec;m.exec=function(){return S.apply(this,arguments)};var E="ab".split(m);return E.length===2&&E[0]==="a"&&E[1]==="b"}();o.exports=function(m,S,E){var C=u(m),_=!c(function(){var A={};return A[C]=function(){return 7},""[m](A)!=7}),I=_?!c(function(){var A=!1,N=/a/;return N.exec=function(){return A=!0,null},m==="split"&&(N.constructor={},N.constructor[p]=function(){return N}),N[C](""),!A}):void 0;if(!_||!I||m==="replace"&&!g||m==="split"&&!b){var H=/./[C],P=E(d,C,""[m],function(A,N,$,st,at){return N.exec===h?_&&!at?{done:!0,value:H.call(N,$,st)}:{done:!0,value:A.call($,N,st)}:{done:!1}}),O=P[0],T=P[1];a(String.prototype,m,O),l(RegExp.prototype,C,S==2?function(A,N){return T.call(A,this,N)}:function(A){return T.call(A,this)})}}},"230e":function(o,s,r){var a=r("d3f4"),l=r("7726").document,c=a(l)&&a(l.createElement);o.exports=function(d){return c?l.createElement(d):{}}},"23c6":function(o,s,r){var a=r("2d95"),l=r("2b4c")("toStringTag"),c=a(function(){return arguments}())=="Arguments",d=function(u,h){try{return u[h]}catch{}};o.exports=function(u){var h,p,g;return u===void 0?"Undefined":u===null?"Null":typeof(p=d(h=Object(u),l))=="string"?p:c?a(h):(g=a(h))=="Object"&&typeof h.callee=="function"?"Arguments":g}},2621:function(o,s){s.f=Object.getOwnPropertySymbols},"2aba":function(o,s,r){var a=r("7726"),l=r("32e9"),c=r("69a8"),d=r("ca5a")("src"),u=r("fa5b"),h="toString",p=(""+u).split(h);r("8378").inspectSource=function(g){return u.call(g)},(o.exports=function(g,b,m,S){var E=typeof m=="function";E&&(c(m,"name")||l(m,"name",b)),g[b]!==m&&(E&&(c(m,d)||l(m,d,g[b]?""+g[b]:p.join(String(b)))),g===a?g[b]=m:S?g[b]?g[b]=m:l(g,b,m):(delete g[b],l(g,b,m)))})(Function.prototype,h,function(){return typeof this=="function"&&this[d]||u.call(this)})},"2aeb":function(o,s,r){var a=r("cb7c"),l=r("1495"),c=r("e11e"),d=r("613b")("IE_PROTO"),u=function(){},h="prototype",p=function(){var g=r("230e")("iframe"),b=c.length,m="<",S=">",E;for(g.style.display="none",r("fab2").appendChild(g),g.src="javascript:",E=g.contentWindow.document,E.open(),E.write(m+"script"+S+"document.F=Object"+m+"/script"+S),E.close(),p=E.F;b--;)delete p[h][c[b]];return p()};o.exports=Object.create||function(g,b){var m;return g!==null?(u[h]=a(g),m=new u,u[h]=null,m[d]=g):m=p(),b===void 0?m:l(m,b)}},"2b4c":function(o,s,r){var a=r("5537")("wks"),l=r("ca5a"),c=r("7726").Symbol,d=typeof c=="function",u=o.exports=function(h){return a[h]||(a[h]=d&&c[h]||(d?c:l)("Symbol."+h))};u.store=a},"2d00":function(o,s){o.exports=!1},"2d95":function(o,s){var r={}.toString;o.exports=function(a){return r.call(a).slice(8,-1)}},"2fdb":function(o,s,r){var a=r("5ca1"),l=r("d2c8"),c="includes";a(a.P+a.F*r("5147")(c),"String",{includes:function(d){return!!~l(this,d,c).indexOf(d,arguments.length>1?arguments[1]:void 0)}})},"32e9":function(o,s,r){var a=r("86cc"),l=r("4630");o.exports=r("9e1e")?function(c,d,u){return a.f(c,d,l(1,u))}:function(c,d,u){return c[d]=u,c}},"38fd":function(o,s,r){var a=r("69a8"),l=r("4bf8"),c=r("613b")("IE_PROTO"),d=Object.prototype;o.exports=Object.getPrototypeOf||function(u){return u=l(u),a(u,c)?u[c]:typeof u.constructor=="function"&&u instanceof u.constructor?u.constructor.prototype:u instanceof Object?d:null}},"41a0":function(o,s,r){var a=r("2aeb"),l=r("4630"),c=r("7f20"),d={};r("32e9")(d,r("2b4c")("iterator"),function(){return this}),o.exports=function(u,h,p){u.prototype=a(d,{next:l(1,p)}),c(u,h+" Iterator")}},"456d":function(o,s,r){var a=r("4bf8"),l=r("0d58");r("5eda")("keys",function(){return function(c){return l(a(c))}})},4588:function(o,s){var r=Math.ceil,a=Math.floor;o.exports=function(l){return isNaN(l=+l)?0:(l>0?a:r)(l)}},4630:function(o,s){o.exports=function(r,a){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:a}}},"4bf8":function(o,s,r){var a=r("be13");o.exports=function(l){return Object(a(l))}},5147:function(o,s,r){var a=r("2b4c")("match");o.exports=function(l){var c=/./;try{"/./"[l](c)}catch{try{return c[a]=!1,!"/./"[l](c)}catch{}}return!0}},"520a":function(o,s,r){var a=r("0bfb"),l=RegExp.prototype.exec,c=String.prototype.replace,d=l,u="lastIndex",h=function(){var b=/a/,m=/b*/g;return l.call(b,"a"),l.call(m,"a"),b[u]!==0||m[u]!==0}(),p=/()??/.exec("")[1]!==void 0,g=h||p;g&&(d=function(b){var m=this,S,E,C,_;return p&&(E=new RegExp("^"+m.source+"$(?!\\s)",a.call(m))),h&&(S=m[u]),C=l.call(m,b),h&&C&&(m[u]=m.global?C.index+C[0].length:S),p&&C&&C.length>1&&c.call(C[0],E,function(){for(_=1;_<arguments.length-2;_++)arguments[_]===void 0&&(C[_]=void 0)}),C}),o.exports=d},"52a7":function(o,s){s.f={}.propertyIsEnumerable},5537:function(o,s,r){var a=r("8378"),l=r("7726"),c="__core-js_shared__",d=l[c]||(l[c]={});(o.exports=function(u,h){return d[u]||(d[u]=h!==void 0?h:{})})("versions",[]).push({version:a.version,mode:r("2d00")?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},"5ca1":function(o,s,r){var a=r("7726"),l=r("8378"),c=r("32e9"),d=r("2aba"),u=r("9b43"),h="prototype",p=function(g,b,m){var S=g&p.F,E=g&p.G,C=g&p.S,_=g&p.P,I=g&p.B,H=E?a:C?a[b]||(a[b]={}):(a[b]||{})[h],P=E?l:l[b]||(l[b]={}),O=P[h]||(P[h]={}),T,A,N,$;E&&(m=b);for(T in m)A=!S&&H&&H[T]!==void 0,N=(A?H:m)[T],$=I&&A?u(N,a):_&&typeof N=="function"?u(Function.call,N):N,H&&d(H,T,N,g&p.U),P[T]!=N&&c(P,T,$),_&&O[T]!=N&&(O[T]=N)};a.core=l,p.F=1,p.G=2,p.S=4,p.P=8,p.B=16,p.W=32,p.U=64,p.R=128,o.exports=p},"5eda":function(o,s,r){var a=r("5ca1"),l=r("8378"),c=r("79e5");o.exports=function(d,u){var h=(l.Object||{})[d]||Object[d],p={};p[d]=u(h),a(a.S+a.F*c(function(){h(1)}),"Object",p)}},"5f1b":function(o,s,r){var a=r("23c6"),l=RegExp.prototype.exec;o.exports=function(c,d){var u=c.exec;if(typeof u=="function"){var h=u.call(c,d);if(typeof h!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return h}if(a(c)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return l.call(c,d)}},"613b":function(o,s,r){var a=r("5537")("keys"),l=r("ca5a");o.exports=function(c){return a[c]||(a[c]=l(c))}},"626a":function(o,s,r){var a=r("2d95");o.exports=Object("z").propertyIsEnumerable(0)?Object:function(l){return a(l)=="String"?l.split(""):Object(l)}},6762:function(o,s,r){var a=r("5ca1"),l=r("c366")(!0);a(a.P,"Array",{includes:function(c){return l(this,c,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")("includes")},6821:function(o,s,r){var a=r("626a"),l=r("be13");o.exports=function(c){return a(l(c))}},"69a8":function(o,s){var r={}.hasOwnProperty;o.exports=function(a,l){return r.call(a,l)}},"6a99":function(o,s,r){var a=r("d3f4");o.exports=function(l,c){if(!a(l))return l;var d,u;if(c&&typeof(d=l.toString)=="function"&&!a(u=d.call(l))||typeof(d=l.valueOf)=="function"&&!a(u=d.call(l))||!c&&typeof(d=l.toString)=="function"&&!a(u=d.call(l)))return u;throw TypeError("Can't convert object to primitive value")}},7333:function(o,s,r){var a=r("0d58"),l=r("2621"),c=r("52a7"),d=r("4bf8"),u=r("626a"),h=Object.assign;o.exports=!h||r("79e5")(function(){var p={},g={},b=Symbol(),m="abcdefghijklmnopqrst";return p[b]=7,m.split("").forEach(function(S){g[S]=S}),h({},p)[b]!=7||Object.keys(h({},g)).join("")!=m})?function(p,g){for(var b=d(p),m=arguments.length,S=1,E=l.f,C=c.f;m>S;)for(var _=u(arguments[S++]),I=E?a(_).concat(E(_)):a(_),H=I.length,P=0,O;H>P;)C.call(_,O=I[P++])&&(b[O]=_[O]);return b}:h},7726:function(o,s){var r=o.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=r)},"77f1":function(o,s,r){var a=r("4588"),l=Math.max,c=Math.min;o.exports=function(d,u){return d=a(d),d<0?l(d+u,0):c(d,u)}},"79e5":function(o,s){o.exports=function(r){try{return!!r()}catch{return!0}}},"7f20":function(o,s,r){var a=r("86cc").f,l=r("69a8"),c=r("2b4c")("toStringTag");o.exports=function(d,u,h){d&&!l(d=h?d:d.prototype,c)&&a(d,c,{configurable:!0,value:u})}},8378:function(o,s){var r=o.exports={version:"2.6.5"};typeof __e=="number"&&(__e=r)},"84f2":function(o,s){o.exports={}},"86cc":function(o,s,r){var a=r("cb7c"),l=r("c69a"),c=r("6a99"),d=Object.defineProperty;s.f=r("9e1e")?Object.defineProperty:function(u,h,p){if(a(u),h=c(h,!0),a(p),l)try{return d(u,h,p)}catch{}if("get"in p||"set"in p)throw TypeError("Accessors not supported!");return"value"in p&&(u[h]=p.value),u}},"9b43":function(o,s,r){var a=r("d8e8");o.exports=function(l,c,d){if(a(l),c===void 0)return l;switch(d){case 1:return function(u){return l.call(c,u)};case 2:return function(u,h){return l.call(c,u,h)};case 3:return function(u,h,p){return l.call(c,u,h,p)}}return function(){return l.apply(c,arguments)}}},"9c6c":function(o,s,r){var a=r("2b4c")("unscopables"),l=Array.prototype;l[a]==null&&r("32e9")(l,a,{}),o.exports=function(c){l[a][c]=!0}},"9def":function(o,s,r){var a=r("4588"),l=Math.min;o.exports=function(c){return c>0?l(a(c),9007199254740991):0}},"9e1e":function(o,s,r){o.exports=!r("79e5")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},a352:function(o,s){o.exports=i},a481:function(o,s,r){var a=r("cb7c"),l=r("4bf8"),c=r("9def"),d=r("4588"),u=r("0390"),h=r("5f1b"),p=Math.max,g=Math.min,b=Math.floor,m=/\$([$&`']|\d\d?|<[^>]*>)/g,S=/\$([$&`']|\d\d?)/g,E=function(C){return C===void 0?C:String(C)};r("214f")("replace",2,function(C,_,I,H){return[function(O,T){var A=C(this),N=O==null?void 0:O[_];return N!==void 0?N.call(O,A,T):I.call(String(A),O,T)},function(O,T){var A=H(I,O,this,T);if(A.done)return A.value;var N=a(O),$=String(this),st=typeof T=="function";st||(T=String(T));var at=N.global;if(at){var J=N.unicode;N.lastIndex=0}for(var Y=[];;){var z=h(N,$);if(z===null||(Y.push(z),!at))break;var it=String(z[0]);it===""&&(N.lastIndex=u($,c(N.lastIndex),J))}for(var yt="",ut=0,ft=0;ft<Y.length;ft++){z=Y[ft];for(var f=String(z[0]),v=p(g(d(z.index),$.length),0),y=[],L=1;L<z.length;L++)y.push(E(z[L]));var R=z.groups;if(st){var U=[f].concat(y,v,$);R!==void 0&&U.push(R);var G=String(T.apply(void 0,U))}else G=P(f,$,v,y,R,T);v>=ut&&(yt+=$.slice(ut,v)+G,ut=v+f.length)}return yt+$.slice(ut)}];function P(O,T,A,N,$,st){var at=A+O.length,J=N.length,Y=S;return $!==void 0&&($=l($),Y=m),I.call(st,Y,function(z,it){var yt;switch(it.charAt(0)){case"$":return"$";case"&":return O;case"`":return T.slice(0,A);case"'":return T.slice(at);case"<":yt=$[it.slice(1,-1)];break;default:var ut=+it;if(ut===0)return z;if(ut>J){var ft=b(ut/10);return ft===0?z:ft<=J?N[ft-1]===void 0?it.charAt(1):N[ft-1]+it.charAt(1):z}yt=N[ut-1]}return yt===void 0?"":yt})}})},aae3:function(o,s,r){var a=r("d3f4"),l=r("2d95"),c=r("2b4c")("match");o.exports=function(d){var u;return a(d)&&((u=d[c])!==void 0?!!u:l(d)=="RegExp")}},ac6a:function(o,s,r){for(var a=r("cadf"),l=r("0d58"),c=r("2aba"),d=r("7726"),u=r("32e9"),h=r("84f2"),p=r("2b4c"),g=p("iterator"),b=p("toStringTag"),m=h.Array,S={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},E=l(S),C=0;C<E.length;C++){var _=E[C],I=S[_],H=d[_],P=H&&H.prototype,O;if(P&&(P[g]||u(P,g,m),P[b]||u(P,b,_),h[_]=m,I))for(O in a)P[O]||c(P,O,a[O],!0)}},b0c5:function(o,s,r){var a=r("520a");r("5ca1")({target:"RegExp",proto:!0,forced:a!==/./.exec},{exec:a})},be13:function(o,s){o.exports=function(r){if(r==null)throw TypeError("Can't call method on  "+r);return r}},c366:function(o,s,r){var a=r("6821"),l=r("9def"),c=r("77f1");o.exports=function(d){return function(u,h,p){var g=a(u),b=l(g.length),m=c(p,b),S;if(d&&h!=h){for(;b>m;)if(S=g[m++],S!=S)return!0}else for(;b>m;m++)if((d||m in g)&&g[m]===h)return d||m||0;return!d&&-1}}},c649:function(o,s,r){(function(a){r.d(s,"c",function(){return g}),r.d(s,"a",function(){return h}),r.d(s,"b",function(){return c}),r.d(s,"d",function(){return p}),r("a481");function l(){return typeof window<"u"?window.console:a.console}var c=l();function d(b){var m=Object.create(null);return function(S){var E=m[S];return E||(m[S]=b(S))}}var u=/-(\w)/g,h=d(function(b){return b.replace(u,function(m,S){return S?S.toUpperCase():""})});function p(b){b.parentElement!==null&&b.parentElement.removeChild(b)}function g(b,m,S){var E=S===0?b.children[0]:b.children[S-1].nextSibling;b.insertBefore(m,E)}}).call(this,r("c8ba"))},c69a:function(o,s,r){o.exports=!r("9e1e")&&!r("79e5")(function(){return Object.defineProperty(r("230e")("div"),"a",{get:function(){return 7}}).a!=7})},c8ba:function(o,s){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}o.exports=r},ca5a:function(o,s){var r=0,a=Math.random();o.exports=function(l){return"Symbol(".concat(l===void 0?"":l,")_",(++r+a).toString(36))}},cadf:function(o,s,r){var a=r("9c6c"),l=r("d53b"),c=r("84f2"),d=r("6821");o.exports=r("01f9")(Array,"Array",function(u,h){this._t=d(u),this._i=0,this._k=h},function(){var u=this._t,h=this._k,p=this._i++;return!u||p>=u.length?(this._t=void 0,l(1)):h=="keys"?l(0,p):h=="values"?l(0,u[p]):l(0,[p,u[p]])},"values"),c.Arguments=c.Array,a("keys"),a("values"),a("entries")},cb7c:function(o,s,r){var a=r("d3f4");o.exports=function(l){if(!a(l))throw TypeError(l+" is not an object!");return l}},ce10:function(o,s,r){var a=r("69a8"),l=r("6821"),c=r("c366")(!1),d=r("613b")("IE_PROTO");o.exports=function(u,h){var p=l(u),g=0,b=[],m;for(m in p)m!=d&&a(p,m)&&b.push(m);for(;h.length>g;)a(p,m=h[g++])&&(~c(b,m)||b.push(m));return b}},d2c8:function(o,s,r){var a=r("aae3"),l=r("be13");o.exports=function(c,d,u){if(a(d))throw TypeError("String#"+u+" doesn't accept regex!");return String(l(c))}},d3f4:function(o,s){o.exports=function(r){return typeof r=="object"?r!==null:typeof r=="function"}},d53b:function(o,s){o.exports=function(r,a){return{value:a,done:!!r}}},d8e8:function(o,s){o.exports=function(r){if(typeof r!="function")throw TypeError(r+" is not a function!");return r}},e11e:function(o,s){o.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},f559:function(o,s,r){var a=r("5ca1"),l=r("9def"),c=r("d2c8"),d="startsWith",u=""[d];a(a.P+a.F*r("5147")(d),"String",{startsWith:function(h){var p=c(this,h,d),g=l(Math.min(arguments.length>1?arguments[1]:void 0,p.length)),b=String(h);return u?u.call(p,b,g):p.slice(g,g+b.length)===b}})},f6fd:function(o,s){(function(r){var a="currentScript",l=r.getElementsByTagName("script");a in r||Object.defineProperty(r,a,{get:function(){try{throw new Error}catch(u){var c,d=(/.*at [^\(]*\((.*):.+:.+\)$/ig.exec(u.stack)||[!1])[1];for(c in l)if(l[c].src==d||l[c].readyState=="interactive")return l[c];return null}}})})(document)},f751:function(o,s,r){var a=r("5ca1");a(a.S+a.F,"Object",{assign:r("7333")})},fa5b:function(o,s,r){o.exports=r("5537")("native-function-to-string",Function.toString)},fab2:function(o,s,r){var a=r("7726").document;o.exports=a&&a.documentElement},fb15:function(o,s,r){if(r.r(s),typeof window<"u"){r("f6fd");var a;(a=window.document.currentScript)&&(a=a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(r.p=a[1])}r("f751"),r("f559"),r("ac6a"),r("cadf"),r("456d");function l(f){if(Array.isArray(f))return f}function c(f,v){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(f)))){var y=[],L=!0,R=!1,U=void 0;try{for(var G=f[Symbol.iterator](),Lt;!(L=(Lt=G.next()).done)&&(y.push(Lt.value),!(v&&y.length===v));L=!0);}catch(At){R=!0,U=At}finally{try{!L&&G.return!=null&&G.return()}finally{if(R)throw U}}return y}}function d(f,v){(v==null||v>f.length)&&(v=f.length);for(var y=0,L=new Array(v);y<v;y++)L[y]=f[y];return L}function u(f,v){if(f){if(typeof f=="string")return d(f,v);var y=Object.prototype.toString.call(f).slice(8,-1);if(y==="Object"&&f.constructor&&(y=f.constructor.name),y==="Map"||y==="Set")return Array.from(f);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return d(f,v)}}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(f,v){return l(f)||c(f,v)||u(f,v)||h()}r("6762"),r("2fdb");function g(f){if(Array.isArray(f))return d(f)}function b(f){if(typeof Symbol<"u"&&Symbol.iterator in Object(f))return Array.from(f)}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(f){return g(f)||b(f)||u(f)||m()}var E=r("a352"),C=r.n(E),_=r("c649");function I(f,v,y){return y===void 0||(f=f||{},f[v]=y),f}function H(f,v){return f.map(function(y){return y.elm}).indexOf(v)}function P(f,v,y,L){if(!f)return[];var R=f.map(function(Lt){return Lt.elm}),U=v.length-L,G=S(v).map(function(Lt,At){return At>=U?R.length:R.indexOf(Lt)});return y?G.filter(function(Lt){return Lt!==-1}):G}function O(f,v){var y=this;this.$nextTick(function(){return y.$emit(f.toLowerCase(),v)})}function T(f){var v=this;return function(y){v.realList!==null&&v["onDrag"+f](y),O.call(v,f,y)}}function A(f){return["transition-group","TransitionGroup"].includes(f)}function N(f){if(!f||f.length!==1)return!1;var v=p(f,1),y=v[0].componentOptions;return y?A(y.tag):!1}function $(f,v,y){return f[y]||(v[y]?v[y]():void 0)}function st(f,v,y){var L=0,R=0,U=$(v,y,"header");U&&(L=U.length,f=f?[].concat(S(U),S(f)):S(U));var G=$(v,y,"footer");return G&&(R=G.length,f=f?[].concat(S(f),S(G)):S(G)),{children:f,headerOffset:L,footerOffset:R}}function at(f,v){var y=null,L=function(At,ge){y=I(y,At,ge)},R=Object.keys(f).filter(function(At){return At==="id"||At.startsWith("data-")}).reduce(function(At,ge){return At[ge]=f[ge],At},{});if(L("attrs",R),!v)return y;var U=v.on,G=v.props,Lt=v.attrs;return L("on",U),L("props",G),Object.assign(y.attrs,Lt),y}var J=["Start","Add","Remove","Update","End"],Y=["Choose","Unchoose","Sort","Filter","Clone"],z=["Move"].concat(J,Y).map(function(f){return"on"+f}),it=null,yt={options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(f){return f}},element:{type:String,default:"div"},tag:{type:String,default:null},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},ut={name:"draggable",inheritAttrs:!1,props:yt,data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1}},render:function(f){var v=this.$slots.default;this.transitionMode=N(v);var y=st(v,this.$slots,this.$scopedSlots),L=y.children,R=y.headerOffset,U=y.footerOffset;this.headerOffset=R,this.footerOffset=U;var G=at(this.$attrs,this.componentData);return f(this.getTag(),G,L)},created:function(){this.list!==null&&this.value!==null&&_.b.error("Value and list props are mutually exclusive! Please set one or another."),this.element!=="div"&&_.b.warn("Element props is deprecated please use tag props instead. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#element-props"),this.options!==void 0&&_.b.warn("Options props is deprecated, add sortable options directly as vue.draggable item, or use v-bind. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#options-props")},mounted:function(){var f=this;if(this.noneFunctionalComponentMode=this.getTag().toLowerCase()!==this.$el.nodeName.toLowerCase()&&!this.getIsFunctional(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter tag value or remove transition-group. Current tag value: ".concat(this.getTag()));var v={};J.forEach(function(R){v["on"+R]=T.call(f,R)}),Y.forEach(function(R){v["on"+R]=O.bind(f,R)});var y=Object.keys(this.$attrs).reduce(function(R,U){return R[Object(_.a)(U)]=f.$attrs[U],R},{}),L=Object.assign({},this.options,y,v,{onMove:function(R,U){return f.onDragMove(R,U)}});!("draggable"in L)&&(L.draggable=">*"),this._sortable=new C.a(this.rootContainer,L),this.computeIndexes()},beforeDestroy:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(f){this.updateOptions(f)},deep:!0},$attrs:{handler:function(f){this.updateOptions(f)},deep:!0},realList:function(){this.computeIndexes()}},methods:{getIsFunctional:function(){var f=this._vnode.fnOptions;return f&&f.functional},getTag:function(){return this.tag||this.element},updateOptions:function(f){for(var v in f){var y=Object(_.a)(v);z.indexOf(y)===-1&&this._sortable.option(y,f[v])}},getChildrenNodes:function(){if(this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var f=this.$slots.default;return this.transitionMode?f[0].child.$slots.default:f},computeIndexes:function(){var f=this;this.$nextTick(function(){f.visibleIndexes=P(f.getChildrenNodes(),f.rootContainer.children,f.transitionMode,f.footerOffset)})},getUnderlyingVm:function(f){var v=H(this.getChildrenNodes()||[],f);if(v===-1)return null;var y=this.realList[v];return{index:v,element:y}},getUnderlyingPotencialDraggableComponent:function(f){var v=f.__vue__;return!v||!v.$options||!A(v.$options._componentTag)?!("realList"in v)&&v.$children.length===1&&"realList"in v.$children[0]?v.$children[0]:v:v.$parent},emitChanges:function(f){var v=this;this.$nextTick(function(){v.$emit("change",f)})},alterList:function(f){if(this.list){f(this.list);return}var v=S(this.value);f(v),this.$emit("input",v)},spliceList:function(){var f=arguments,v=function(y){return y.splice.apply(y,S(f))};this.alterList(v)},updatePosition:function(f,v){var y=function(L){return L.splice(v,0,L.splice(f,1)[0])};this.alterList(y)},getRelatedContextFromMoveEvent:function(f){var v=f.to,y=f.related,L=this.getUnderlyingPotencialDraggableComponent(v);if(!L)return{component:L};var R=L.realList,U={list:R,component:L};if(v!==y&&R&&L.getUnderlyingVm){var G=L.getUnderlyingVm(y);if(G)return Object.assign(G,U)}return U},getVmIndex:function(f){var v=this.visibleIndexes,y=v.length;return f>y-1?y:v[f]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(f){if(!(!this.noTransitionOnDrag||!this.transitionMode)){var v=this.getChildrenNodes();v[f].data=null;var y=this.getComponent();y.children=[],y.kept=void 0}},onDragStart:function(f){this.context=this.getUnderlyingVm(f.item),f.item._underlying_vm_=this.clone(this.context.element),it=f.item},onDragAdd:function(f){var v=f.item._underlying_vm_;if(v!==void 0){Object(_.d)(f.item);var y=this.getVmIndex(f.newIndex);this.spliceList(y,0,v),this.computeIndexes();var L={element:v,newIndex:y};this.emitChanges({added:L})}},onDragRemove:function(f){if(Object(_.c)(this.rootContainer,f.item,f.oldIndex),f.pullMode==="clone"){Object(_.d)(f.clone);return}var v=this.context.index;this.spliceList(v,1);var y={element:this.context.element,oldIndex:v};this.resetTransitionData(v),this.emitChanges({removed:y})},onDragUpdate:function(f){Object(_.d)(f.item),Object(_.c)(f.from,f.item,f.oldIndex);var v=this.context.index,y=this.getVmIndex(f.newIndex);this.updatePosition(v,y);var L={element:this.context.element,oldIndex:v,newIndex:y};this.emitChanges({moved:L})},updateProperty:function(f,v){f.hasOwnProperty(v)&&(f[v]+=this.headerOffset)},computeFutureIndex:function(f,v){if(!f.element)return 0;var y=S(v.to.children).filter(function(G){return G.style.display!=="none"}),L=y.indexOf(v.related),R=f.component.getVmIndex(L),U=y.indexOf(it)!==-1;return U||!v.willInsertAfter?R:R+1},onDragMove:function(f,v){var y=this.move;if(!y||!this.realList)return!0;var L=this.getRelatedContextFromMoveEvent(f),R=this.context,U=this.computeFutureIndex(L,f);Object.assign(R,{futureIndex:U});var G=Object.assign({},f,{relatedContext:L,draggedContext:R});return y(G,v)},onDragEnd:function(){this.computeIndexes(),it=null}}};typeof window<"u"&&"Vue"in window&&window.Vue.component("draggable",ut);var ft=ut;s.default=ft}}).default})})($n);var Po=$n.exports;const Oo=ui(Po),Fo={name:"LockIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Ho=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon lock-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},Ro=[],Vo=B(Fo,Ho,Ro,!1,null,null,null,null);const $o=Vo.exports,Bo={name:"PlusIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var zo=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon plus-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},qo=[],Yo=B(Bo,zo,qo,!1,null,null,null,null);const vn=Yo.exports,Uo={name:"NcActionCaption",inject:{isInSemanticMenu:{from:"NcActions:isSemanticMenu",default:!1}},props:{name:{type:String,required:!0}}};var jo=function(){var e=this,n=e._self._c;return n("li",{staticClass:"app-navigation-caption",attrs:{role:e.isInSemanticMenu&&"presentation"}},[e._v(" "+e._s(e.name)+" ")])},Wo=[],Xo=Yt(Uo,jo,Wo,!1,null,"7c8f7463",null,null);const Zo=Xo.exports,Go={name:"NcActionSeparator"};var Qo=function(){var e=this,n=e._self._c;return n("li",{staticClass:"action action-separator action--disabled",attrs:{role:"separator"}})},Ko=[],Jo=Yt(Go,Qo,Ko,!1,null,"82b7f2ae",null,null);const bn=Jo.exports,tr={name:"NcAppNavigationList"};var er=function(){var e=this,n=e._self._c;return n("ul",{staticClass:"app-navigation-list"},[e._t("default")],2)},nr=[],ir=Yt(tr,er,nr,!1,null,"ac3baea0",null,null);const or=ir.exports,rr={name:"NcAppNavigation",components:{NcAppNavigationList:or,NcAppNavigationToggle:Ei},inject:{setHasAppNavigation:{default:()=>()=>Bt.util.warn("NcAppNavigation is not mounted inside NcContent, this is probably an error."),from:"NcContent:setHasAppNavigation"}},props:{ariaLabel:{type:String,default:""},ariaLabelledby:{type:String,default:""}},setup(){return{isMobile:Pn()}},data(){return{open:!this.isMobile,focusTrap:null}},watch:{isMobile(){this.open=!this.isMobile,this.toggleFocusTrap()},open(){this.toggleFocusTrap()}},mounted(){this.setHasAppNavigation(!0),Ke("toggle-navigation",this.toggleNavigationByEventBus),vt("navigation-toggled",{open:this.open}),this.focusTrap=bi(this.$refs.appNavigationContainer,{allowOutsideClick:!0,fallbackFocus:this.$refs.appNavigationContainer,trapStack:yi(),escapeDeactivates:!1}),this.toggleFocusTrap()},unmounted(){this.setHasAppNavigation(!1),Je("toggle-navigation",this.toggleNavigationByEventBus),this.focusTrap.deactivate()},methods:{toggleNavigation(e){if(this.open===e){vt("navigation-toggled",{open:this.open});return}this.open=typeof e>"u"?!this.open:e;const n=getComputedStyle(document.body),i=parseInt(n.getPropertyValue("--animation-quick"))||100;setTimeout(()=>{vt("navigation-toggled",{open:this.open})},1.5*i)},toggleNavigationByEventBus({open:e}){this.toggleNavigation(e)},toggleFocusTrap(){this.isMobile&&this.open?this.focusTrap.activate():this.focusTrap.deactivate()},handleEsc(){this.isMobile&&this.toggleNavigation(!1)}}};var sr=function(){var e=this,n=e._self._c;return n("div",{ref:"appNavigationContainer",staticClass:"app-navigation",class:{"app-navigation--close":!e.open}},[n("nav",{staticClass:"app-navigation__content",attrs:{id:"app-navigation-vue","aria-hidden":e.open?"false":"true","aria-label":e.ariaLabel||void 0,"aria-labelledby":e.ariaLabelledby||void 0,inert:!e.open||void 0},on:{keydown:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"esc",27,i.key,["Esc","Escape"])?null:e.handleEsc.apply(null,arguments)}}},[n("div",{staticClass:"app-navigation__body",class:{"app-navigation__body--no-list":!e.$scopedSlots.list}},[e._t("default")],2),e.$scopedSlots.list?n("NcAppNavigationList",{staticClass:"app-navigation__list"},[e._t("list")],2):e._e(),e._t("footer")],2),n("NcAppNavigationToggle",{attrs:{open:e.open},on:{"update:open":e.toggleNavigation}})],1)},ar=[],lr=Yt(rr,sr,ar,!1,null,"42389274",null,null);const cr=lr.exports,ur={name:"NcAppNavigationCaption",components:{NcActions:Qt},inheritAttrs:!1,props:{name:{type:String,required:!0},isHeading:{type:Boolean,default:!1}," ":{}},computed:{wrapperTag(){return this.isHeading?"div":"li"},captionTag(){return this.isHeading?"h2":"span"},hasActions(){return!!this.$slots.actions}}};var dr=function(){var e=this,n=e._self._c;return n(e.wrapperTag,{tag:"component",staticClass:"app-navigation-caption",class:{"app-navigation-caption--heading":e.isHeading}},[n(e.captionTag,{tag:"component",staticClass:"app-navigation-caption__name"},[e._v(" "+e._s(e.name)+" ")]),e.hasActions?n("div",{staticClass:"app-navigation-caption__actions"},[n("NcActions",e._g(e._b({scopedSlots:e._u([{key:"icon",fn:function(){return[e._t("actionsTriggerIcon")]},proxy:!0}],null,!0)},"NcActions",e.$attrs,!1),e.$listeners),[e._t("actions")],2)],1):e._e()],1)},hr=[],fr=Yt(ur,dr,hr,!1,null,"213c8156",null,null);const pr=fr.exports,mr={components:{NcButton:De},props:{buttonId:{type:String,required:!1,default:""},disabled:{type:Boolean,required:!1,default:!1},text:{type:String,required:!0},type:{type:String,default:"primary",validator(e){return["primary","secondary","tertiary"].indexOf(e)!==-1}}},emits:["click"]};var gr=function(){var e=this,n=e._self._c;return n("div",{staticClass:"app-navigation-new"},[n("NcButton",{attrs:{id:e.buttonId,disabled:e.disabled,type:e.type},on:{click:function(i){return e.$emit("click")}},scopedSlots:e._u([{key:"icon",fn:function(){return[e._t("icon")]},proxy:!0}],null,!0)},[e._v(" "+e._s(e.text)+" ")])],1)},vr=[],br=Yt(mr,gr,vr,!1,null,"c47dc611",null,null);const yr=br.exports,_r={name:"NcAppSidebarTab",inject:["registerTab","unregisterTab","getActiveTab","isTablistShown"],props:{id:{type:String,required:!0},name:{type:String,required:!0},icon:{type:String,default:""},order:{type:Number,default:0}},emits:["bottom-reached","scroll"],expose:["id","name","icon","order","renderIcon"],computed:{isActive(){return this.getActiveTab()===this.id}},created(){this.registerTab(this)},beforeDestroy(){this.unregisterTab(this.id)},methods:{onScroll(e){this.$el.scrollHeight-this.$el.scrollTop===this.$el.clientHeight&&this.$emit("bottom-reached",e),this.$emit("scroll",e)},renderIcon(){var e,n;return(n=(e=this.$scopedSlots).icon)==null?void 0:n.call(e)}}};var wr=function(){var e=this,n=e._self._c;return n("section",{staticClass:"app-sidebar__tab",class:{"app-sidebar__tab--active":e.isActive},attrs:{id:"tab-".concat(e.id),"aria-hidden":!e.isActive,"aria-label":e.isTablistShown()?void 0:e.name,"aria-labelledby":e.isTablistShown()?"tab-button-".concat(e.id):void 0,tabindex:e.isTablistShown()?0:-1,role:e.isTablistShown()?"tabpanel":void 0},on:{scroll:e.onScroll}},[n("h3",{staticClass:"hidden-visually"},[e._v(" "+e._s(e.name)+" ")]),e._t("default")],2)},Sr=[],Cr=Yt(_r,wr,Sr,!1,null,"ef10d14f",null,null);const xr=Cr.exports;window.axios=W;const Er={name:"Create",components:{Draggable:Oo,IconLock:$o,IconPlus:vn,NcActionButton:Kt,NcActions:Qt,NcAppContent:hn,NcEmptyContent:fn,NcLoadingIcon:Oe,Question:Ai,QuestionLong:ki,QuestionShort:Ti,QuestionMultiple:Ni,TopBar:Vn},mixins:[un],data(){return{answerTypes:he,isLoadingQuestions:!1,isDragging:!1,maxStringLengths:Pe("forms","maxStringLengths"),questionMenuOpened:!1}},computed:{hasQuestions(){return this.form.questions&&this.form.questions.length===0},isRequiredUsed(){return this.form.questions.reduce((e,n)=>e||n.isRequired,!1)},isExpired(){return this.form.expires&&mt().unix()>this.form.expires},isFormArchived(){return this.form.state===ht.FormArchived},infoMessage(){let e="";return this.form.isAnonymous&&(e+=t("forms","Responses are anonymous.")),this.form.isAnonymous||(e+=t("forms","Responses are connected to your account.")),this.isRequiredUsed&&(e+=" "+t("forms","An asterisk (*) indicates mandatory questions.")),e},expirationMessage(){const e=mt(this.form.expires,"X").fromNow();return this.isExpired?t("forms","Expired {relativeDate}.",{relativeDate:e}):t("forms","Expires {relativeDate}.",{relativeDate:e})},answerTypesFilter(){const{datetime:e,...n}=he;return n}},watch:{hash(){this.fetchFullForm(this.form.id)},"form.title"(){tn(this.formTitle)},isLoadingForm(e){e||(this.resizeTitle(),this.resizeDescription())}},mounted(){this.fetchFullForm(this.form.id),tn(this.formTitle)},methods:{onMoveUp(e){e>0&&([this.form.questions[e-1],this.form.questions[e]]=[this.form.questions[e],this.form.questions[e-1]],this.onQuestionOrderChange())},onMoveDown(e){e<this.form.questions.length-1&&this.onMoveUp(e+1)},onTitleChange(){this.resizeTitle(),this.saveTitle()},resizeTitle(){this.$nextTick(()=>{const e=this.$refs.title;e.style.cssText="height: 0",e.style.cssText="height: ".concat(e.scrollHeight+4,"px")})},resizeDescription(){this.$nextTick(()=>{const e=this.$refs.description;e.style.cssText="height: 0",e.style.cssText="height: ".concat(e.scrollHeight+4,"px")})},updateDescription({target:e}){this.form.description=e.value,this.resizeDescription(),this.saveDescription()},saveTitle:en(async function(){this.saveFormProperty("title")},200),saveDescription:en(async function(){this.saveFormProperty("description")},200),async addQuestion(e){const n="";this.isLoadingQuestions=!0;try{const i=await W.post(j("apps/forms/api/v2.4/question"),{formId:this.form.id,type:e,text:n}),o=ct(i);this.form.questions.push(Object.assign({text:n,type:e,answers:[]},o)),this.$nextTick(()=>{this.$refs.questions[this.$refs.questions.length-1].focus()}),vt("forms:last-updated:set",this.form.id)}catch(i){q.error("Error while adding new question",{error:i}),Z(t("forms","There was an error while adding the new question"))}finally{this.isLoadingQuestions=!1}},async deleteQuestion({id:e}){this.isLoadingQuestions=!0;try{await W.delete(j("apps/forms/api/v2.4/question/{id}",{id:e}));const n=this.form.questions.findIndex(i=>i.id===e);this.form.questions.splice(n,1),vt("forms:last-updated:set",this.form.id)}catch(n){q.error("Error while removing question ".concat(e),{error:n}),Z(t("forms","There was an error while removing the question"))}finally{this.isLoadingQuestions=!1}},async cloneQuestion({id:e}){this.isLoadingQuestions=!0;try{const n=await W.post(j("apps/forms/api/v2.4/question/clone/{id}",{id:e})),i=ct(n);this.form.questions.push(Object.assign({answers:[]},i)),this.$nextTick(()=>{this.$refs.questions[this.$refs.questions.length-1].focus()})}catch(n){q.error("Error while duplicating question ".concat(e),{error:n}),Z("There was an error while duplicating the question")}finally{this.isLoadingQuestions=!1}},async onQuestionOrderChange(){this.isLoadingQuestions=!0;const e=this.form.questions.map(n=>n.id);try{await W.put(j("apps/forms/api/v2.4/question/reorder"),{formId:this.form.id,newOrder:e}),vt("forms:last-updated:set",this.form.id)}catch(n){q.error("Error while saving form",{error:n}),Z(t("forms","Error while saving form"))}finally{this.isLoadingQuestions=!1}}}};var Ar=function(){var i;var e=this,n=e._self._c;return n("NcAppContent",[n("TopBar",{attrs:{archived:e.isFormArchived,permissions:(i=e.form)==null?void 0:i.permissions,"sidebar-opened":e.sidebarOpened},on:{"update:sidebarOpened":e.onSidebarChange,"share-form":e.onShareForm}}),e.isLoadingForm?n("NcEmptyContent",{staticClass:"emtpycontent",attrs:{name:e.t("forms","Loading {title} ",{title:e.form.title})},scopedSlots:e._u([{key:"icon",fn:function(){return[n("NcLoadingIcon",{attrs:{size:64}})]},proxy:!0}],null,!1,826850984)}):e.isFormArchived?n("NcEmptyContent",{staticClass:"emtpycontent",attrs:{name:e.t("forms","Form is archived"),description:e.t("forms","Form '{title}' is archived and can not be modified.",{title:e.form.title})},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconLock",{attrs:{size:64}})]},proxy:!0}])}):[n("header",[n("h2",[n("label",{staticClass:"hidden-visually",attrs:{for:"form-title"}},[e._v(e._s(e.t("forms","Form title")))]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.title,expression:"form.title"}],ref:"title",staticClass:"form-title",attrs:{id:"form-title",rows:"1",dir:"auto",maxlength:e.maxStringLengths.formTitle,placeholder:e.t("forms","Form title"),required:!0,autofocus:""},domProps:{value:e.form.title},on:{input:[function(o){o.target.composing||e.$set(e.form,"title",o.target.value)},e.onTitleChange]}})]),n("label",{staticClass:"hidden-visually",attrs:{for:"form-desc"}},[e._v(" "+e._s(e.t("forms","Description"))+" ")]),n("textarea",{ref:"description",staticClass:"form-desc",attrs:{id:"form-desc",rows:"1",dir:"auto",placeholder:e.t("forms","Description (formatting using Markdown is supported)"),maxlength:e.maxStringLengths.formDescription},domProps:{value:e.form.description},on:{input:e.updateDescription}}),e._v(" "),e.form.expires&&e.form.showExpiration?n("p",{staticClass:"info-message"},[e._v(" "+e._s(e.expirationMessage)+" ")]):e._e(),e.infoMessage?n("p",{staticClass:"info-message"},[e._v(" "+e._s(e.infoMessage)+" ")]):e._e()]),n("section",[n("Draggable",{attrs:{animation:200,tag:"ul",handle:".question__drag-handle"},on:{change:e.onQuestionOrderChange,start:function(o){e.isDragging=!0},end:function(o){e.isDragging=!1}},model:{value:e.form.questions,callback:function(o){e.$set(e.form,"questions",o)},expression:"form.questions"}},[n("transition-group",{attrs:{name:e.isDragging?"no-external-transition-on-drag":"question-list"}},e._l(e.form.questions,function(o,s){return n(e.answerTypes[o.type].component,e._b({key:o.id,ref:"questions",refInFor:!0,tag:"component",attrs:{"can-move-down":s<e.form.questions.length-1,"can-move-up":s>0,"answer-type":e.answerTypes[o.type],index:s+1,"max-string-lengths":e.maxStringLengths},on:{clone:function(r){return e.cloneQuestion(o)},delete:function(r){return e.deleteQuestion(o)},"move-down":function(r){return e.onMoveDown(s)},"move-up":function(r){return e.onMoveUp(s)}}},"component",e.form.questions[s],!1,!0))}),1)],1),n("div",{staticClass:"question-menu"},[n("NcActions",{ref:"questionMenu",attrs:{open:e.questionMenuOpened,"menu-name":e.t("forms","Add a question"),"aria-label":e.t("forms","Add a question"),primary:!0},on:{"update:open":function(o){e.questionMenuOpened=o}},scopedSlots:e._u([{key:"icon",fn:function(){return[e.isLoadingQuestions?n("NcLoadingIcon",{attrs:{size:20}}):n("IconPlus",{attrs:{size:20}})]},proxy:!0}])},e._l(e.answerTypesFilter,function(o,s){return n("NcActionButton",{key:o.label,staticClass:"question-menu__question",attrs:{"close-after-click":!0,disabled:e.isLoadingQuestions},on:{click:function(r){return e.addQuestion(s)}},scopedSlots:e._u([{key:"icon",fn:function(){return[n(o.icon,{tag:"Icon",attrs:{size:20}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(o.label)+" ")])}),1)],1)],1)]],2)},kr=[],Tr=B(Er,Ar,kr,!1,null,"36a5254b",null,null);const Nr=Tr.exports,Lr={name:"ChevronLeftIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Mr=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon chevron-left-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},Ir=[],Dr=B(Lr,Mr,Ir,!1,null,null,null,null);const Pr=Dr.exports,Kn='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-delete" viewBox="0 0 24 24"><path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',Or={name:"DownloadIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Fr=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon download-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},Hr=[],Rr=B(Or,Fr,Hr,!1,null,null,null,null);const Vr=Rr.exports,$r={name:"FileDelimitedIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Br=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon file-delimited-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2M15 16L13 20H10L12 16H9V11H15V16M13 9V3.5L18.5 9H13Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},zr=[],qr=B($r,Br,zr,!1,null,null,null,null);const Yr=qr.exports,Jn='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-file-delimited" viewBox="0 0 24 24"><path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2M15 16L13 20H10L12 16H9V11H15V16M13 9V3.5L18.5 9H13Z" /></svg>',Ur={name:"FileExcelIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var jr=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon file-excel-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M15.8,20H14L12,16.6L10,20H8.2L11.1,15.5L8.2,11H10L12,14.4L14,11H15.8L12.9,15.5L15.8,20M13,9V3.5L18.5,9H13Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},Wr=[],Xr=B(Ur,jr,Wr,!1,null,null,null,null);const Zr=Xr.exports,ti='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-file-excel" viewBox="0 0 24 24"><path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M15.8,20H14L12,16.6L10,20H8.2L11.1,15.5L8.2,11H10L12,14.4L14,11H15.8L12.9,15.5L15.8,20M13,9V3.5L18.5,9H13Z" /></svg>',Gr={name:"FolderIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Qr=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon folder-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},Kr=[],Jr=B(Gr,Qr,Kr,!1,null,null,null,null);const ts=Jr.exports,es={name:"LinkIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var ns=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon link-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},is=[],os=B(es,ns,is,!1,null,null,null,null);const rs=os.exports,ss='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-link" viewBox="0 0 24 24"><path d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" /></svg>',as={name:"LinkVariantOffIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var ls=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon link-variant-off-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M2,5.27L3.28,4L20,20.72L18.73,22L13.9,17.17L11.29,19.78C9.34,21.73 6.17,21.73 4.22,19.78C2.27,17.83 2.27,14.66 4.22,12.71L5.71,11.22C5.7,12.04 5.83,12.86 6.11,13.65L5.64,14.12C4.46,15.29 4.46,17.19 5.64,18.36C6.81,19.54 8.71,19.54 9.88,18.36L12.5,15.76L10.88,14.15C10.87,14.39 10.77,14.64 10.59,14.83C10.2,15.22 9.56,15.22 9.17,14.83C8.12,13.77 7.63,12.37 7.72,11L2,5.27M12.71,4.22C14.66,2.27 17.83,2.27 19.78,4.22C21.73,6.17 21.73,9.34 19.78,11.29L18.29,12.78C18.3,11.96 18.17,11.14 17.89,10.36L18.36,9.88C19.54,8.71 19.54,6.81 18.36,5.64C17.19,4.46 15.29,4.46 14.12,5.64L10.79,8.97L9.38,7.55L12.71,4.22M13.41,9.17C13.8,8.78 14.44,8.78 14.83,9.17C16.2,10.54 16.61,12.5 16.06,14.23L14.28,12.46C14.23,11.78 13.94,11.11 13.41,10.59C13,10.2 13,9.56 13.41,9.17Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},cs=[],us=B(as,ls,cs,!1,null,null,null,null);const ds=us.exports,hs='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-link-variant-off" viewBox="0 0 24 24"><path d="M2,5.27L3.28,4L20,20.72L18.73,22L13.9,17.17L11.29,19.78C9.34,21.73 6.17,21.73 4.22,19.78C2.27,17.83 2.27,14.66 4.22,12.71L5.71,11.22C5.7,12.04 5.83,12.86 6.11,13.65L5.64,14.12C4.46,15.29 4.46,17.19 5.64,18.36C6.81,19.54 8.71,19.54 9.88,18.36L12.5,15.76L10.88,14.15C10.87,14.39 10.77,14.64 10.59,14.83C10.2,15.22 9.56,15.22 9.17,14.83C8.12,13.77 7.63,12.37 7.72,11L2,5.27M12.71,4.22C14.66,2.27 17.83,2.27 19.78,4.22C21.73,6.17 21.73,9.34 19.78,11.29L18.29,12.78C18.3,11.96 18.17,11.14 17.89,10.36L18.36,9.88C19.54,8.71 19.54,6.81 18.36,5.64C17.19,4.46 15.29,4.46 14.12,5.64L10.79,8.97L9.38,7.55L12.71,4.22M13.41,9.17C13.8,8.78 14.44,8.78 14.83,9.17C16.2,10.54 16.61,12.5 16.06,14.23L14.28,12.46C14.23,11.78 13.94,11.11 13.41,10.59C13,10.2 13,9.56 13.41,9.17Z" /></svg>',fs={name:"PollIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var ps=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon poll-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M3,22V8H7V22H3M10,22V2H14V22H10M17,22V14H21V22H17Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},ms=[],gs=B(fs,ps,ms,!1,null,null,null,null);const ei=gs.exports,vs={name:"RefreshIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var bs=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon refresh-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},ys=[],_s=B(vs,bs,ys,!1,null,null,null,null);const ws=_s.exports,Ss={name:"TableIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Cs=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon table-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M5,4H19A2,2 0 0,1 21,6V18A2,2 0 0,1 19,20H5A2,2 0 0,1 3,18V6A2,2 0 0,1 5,4M5,8V12H11V8H5M13,8V12H19V8H13M5,14V18H11V14H5M13,14V18H19V14H13Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},xs=[],Es=B(Ss,Cs,xs,!1,null,null,null,null);const As=Es.exports,ni='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-table" viewBox="0 0 24 24"><path d="M5,4H19A2,2 0 0,1 21,6V18A2,2 0 0,1 19,20H5A2,2 0 0,1 3,18V6A2,2 0 0,1 5,4M5,8V12H11V8H5M13,8V12H19V8H13M5,14V18H11V14H5M13,14V18H19V14H13Z" /></svg>',ks={name:"ResultsSummary",props:{submissions:{type:Array,required:!0},question:{type:Object,required:!0}},data(){return{answerTypes:he}},computed:{questionOptions(){var n;const e=this.question.options.map(i=>({...i,count:0,percentage:0}));return(n=this.question.extraSettings)!=null&&n.allowOtherAnswer&&e.unshift({text:t("forms","Other"),count:0,percentage:0}),e.unshift({text:t("forms","No response"),count:0,percentage:0}),this.submissions.forEach(i=>{const o=i.answers.filter(s=>s.questionId===this.question.id);o.length||e[0].count++,o.forEach(s=>{var a;const r=e.findIndex(l=>l.text===s.text);r<0?(a=this.question.extraSettings)!=null&&a.allowOtherAnswer?e[1].count++:e.push({text:s.text,count:1,percentage:0}):e[r].count++})}),e.sort((i,o)=>o.count-i.count),e.forEach(i=>{i.percentage=Math.round(100*i.count/this.submissions.length),i.best=i.count===e[0].count}),e},textAnswers(){const e=[];let n=0;this.submissions.forEach(o=>{const s=o.answers.filter(r=>r.questionId===this.question.id);s.length||n++,s.forEach(r=>{e.push(r.text)})});const i=Math.round(100*n/this.submissions.length);return e.unshift(n+" ("+i+"%): "+t("forms","No response")),e}}};var Ts=function(){var e=this,n=e._self._c;return n("div",{staticClass:"section question-summary"},[n("h3",{attrs:{dir:"auto"}},[e._v(" "+e._s(e.question.text)+" ")]),n("p",{staticClass:"question-summary__detail"},[e._v(" "+e._s(e.answerTypes[e.question.type].label)+" ")]),e.answerTypes[e.question.type].predefined?n("ol",{staticClass:"question-summary__statistic"},e._l(e.questionOptions,function(i){return n("li",{key:i.id},[n("label",{attrs:{for:"option-".concat(i.questionId,"-").concat(i.id)}},[e._v(" "+e._s(i.count)+" "),n("span",{staticClass:"question-summary__statistic-percentage"},[e._v(" ("+e._s(i.percentage)+"%): ")]),n("span",{class:{"question-summary__statistic-text--best":i.best}},[e._v(" "+e._s(i.text)+" ")])]),n("meter",{attrs:{id:"option-".concat(i.questionId,"-").concat(i.id),min:"0",max:e.submissions.length,value:i.count}})])}),0):n("ul",{staticClass:"question-summary__text"},e._l(e.textAnswers,function(i){return n("li",{key:i.id,attrs:{dir:"auto"}},[e._v(e._s(i))])}),0)])},Ns=[],Ls=B(ks,Ts,Ns,!1,null,"0285a655",null,null);const Ms=Ls.exports,Is={name:"Answer",props:{answerText:{type:String,required:!0},questionText:{type:String,required:!0}}};var Ds=function(){var e=this,n=e._self._c;return n("div",{staticClass:"answer"},[n("h4",{staticClass:"answer__question-text",attrs:{dir:"auto"}},[e._v(" "+e._s(e.questionText)+" ")]),n("p",{staticClass:"answer__text",attrs:{dir:"auto"}},[e._v(e._s(e.answerText))])])},Ps=[],Os=B(Is,Ds,Ps,!1,null,"4c6b7dd8",null,null);const Fs=Os.exports,Hs={name:"Submission",components:{Answer:Fs,IconDelete:Fe,NcActions:Qt,NcActionButton:Kt},props:{submission:{type:Object,required:!0},questions:{type:Array,required:!0},canDeleteSubmission:{type:Boolean,required:!0}},computed:{submissionDateTime(){return mt(this.submission.timestamp,"X").format("LLLL")},answeredQuestions(){const e=[];return this.questions.forEach(n=>{const i=this.submission.answers.filter(s=>s.questionId===n.id);if(!i.length)return;const o=i.map(s=>s.text).join("; ");e.push({id:n.id,text:n.text,squashedAnswers:o})}),e}},methods:{onDelete(){this.$emit("delete")}}};var Rs=function(){var e=this,n=e._self._c;return n("div",{staticClass:"section submission"},[n("div",{staticClass:"submission-head"},[n("h3",{attrs:{dir:"auto"}},[e._v(" "+e._s(e.submission.userDisplayName)+" ")]),n("NcActions",{staticClass:"submission-menu",attrs:{"force-menu":!0}},[e.canDeleteSubmission?n("NcActionButton",{on:{click:e.onDelete},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconDelete",{attrs:{size:20}})]},proxy:!0}],null,!1,881161434)},[e._v(" "+e._s(e.t("forms","Delete this response"))+" ")]):e._e()],1)],1),n("p",{staticClass:"submission-date"},[e._v(" "+e._s(e.submissionDateTime)+" ")]),e._l(e.answeredQuestions,function(i){return n("Answer",{key:i.id,attrs:{"answer-text":i.squashedAnswers,"question-text":i.text}})})],2)},Vs=[],$s=B(Hs,Rs,Vs,!1,null,"e510eeeb",null,null);const Bs=$s.exports,Ln={ods:ni,csv:Jn,xlsx:ti};let Xt="csv";const Mn=[{title:t("forms","Summary"),id:"summary"},{title:t("forms","Responses"),id:"responses"}],zs={name:"Results",components:{IconChevronLeft:Pr,IconDelete:Fe,IconDownload:Vr,IconFileDelimited:Yr,IconFileExcel:Zr,IconFolder:ts,IconLink:rs,IconLinkVariantOff:ds,IconPoll:ei,IconRefresh:ws,IconShareVariant:dn,IconTable:As,NcActionButton:Kt,NcActionSeparator:bn,NcActions:Qt,NcAppContent:hn,NcButton:De,NcDialog:He,NcEmptyContent:fn,NcLoadingIcon:Oe,PillMenu:Li,ResultsSummary:Ms,Submission:Bs,TopBar:Vn},mixins:[fe,un],setup(){return{isMobile:di(),responseViews:Mn}},data(){return{activeResponseView:Mn[0],isDownloadActionOpened:!1,loadingResults:!0,picker:null,showConfirmDeleteDialog:!1,showLinkedFileNotAvailableDialog:!1,linkedFileNotAvailableButtons:[{label:t("forms","Unlink spreadsheet"),icon:hs,type:"error",callback:()=>{this.onUnlinkFile()}},{label:t("forms","Create spreadsheet"),icon:ss,type:"primary",callback:()=>{this.onLinkFile()}}],confirmDeleteButtons:[{label:t("forms","Cancel"),icon:Mi,type:"tertiary",callback:()=>{this.showConfirmDeleteDialog=!1}},{label:t("forms","Delete submissions"),icon:Kn,type:"error",callback:()=>{this.deleteAllSubmissionsConfirmed()}}]}},computed:{isFormArchived(){return this.form.state===ht.FormArchived},canDeleteSubmissions(){return this.form.permissions.includes(this.PERMISSION_TYPES.PERMISSION_RESULTS_DELETE)&&!this.isFormArchived},canEditForm(){return this.form.permissions.includes(this.PERMISSION_TYPES.PERMISSION_EDIT)},noSubmissions(){var e;return((e=this.form.submissions)==null?void 0:e.length)===0},fileUrl(){return this.form.fileId?ae("/f/{fileId}",{fileId:this.form.fileId}):window.location.href}},watch:{async hash(){this.loadFormResults(),await this.fetchLinkedFileInfo()}},async beforeMount(){this.loadFormResults(),await this.fetchLinkedFileInfo(),tn(this.formTitle)},methods:{async onUnlinkFile(){await W.post(j("apps/forms/api/v2.4/form/unlink"),{hash:this.form.hash}),this.form.fileFormat=null,this.form.fileId=null,this.form.filePath=null,vt("forms:last-updated:set",this.form.id)},async loadFormResults(){this.loadingResults=!0,q.debug("Loading results for form ".concat(this.form.hash));try{const e=await W.get(j("apps/forms/api/v2.4/submissions/{hash}",{hash:this.form.hash}));let n=ct(e).submissions;const i=ct(e).questions;n=this.formatDateAnswers(n,i),this.$set(this.form,"submissions",n),this.$set(this.form,"questions",i)}catch(e){q.error("Error while loading results",{error:e}),Z(t("forms","There was an error while loading the results"))}finally{this.loadingResults=!1}},async onDownloadFile(e){const n=j("apps/forms/api/v2.4/submissions/export/{hash}",{hash:this.form.hash})+"?requesttoken="+encodeURIComponent(_i())+"&fileFormat="+e;window.open(n,"_self")},async onLinkFile(){try{await this.getPicker().pick().then(async e=>{try{const n=await W.post(j("apps/forms/api/v2.4/form/link/{fileFormat}",{fileFormat:Xt}),{hash:this.form.hash,path:e}),i=ct(n);this.form.fileFormat=i.fileFormat,this.form.fileId=i.fileId,this.form.filePath=i.filePath,zt(t("forms","File {file} successfully linked",{file:i.fileName})),vt("forms:last-updated:set",this.form.id)}catch(n){q.error("Error while exporting to Files and linking",{error:n}),Z(t("forms","There was an error while linking the file"))}})}catch(e){q.debug("No file selected",{error:e})}},async onStoreToFiles(){try{await this.getPicker().pick().then(async e=>{try{const n=await W.post(j("apps/forms/api/v2.4/submissions/export"),{hash:this.form.hash,path:e,fileFormat:Xt});zt(t("forms","Export successful to {file}",{file:ct(n)}))}catch(n){q.error("Error while exporting to Files",{error:n}),Z(t("forms","There was an error while exporting to Files"))}})}catch(e){q.debug("No file selected",{error:e})}},async fetchLinkedFileInfo(){const e=await W.get(j("apps/forms/api/v2.4/form/{id}",{id:this.form.id})),n=ct(e);this.$set(this.form,"fileFormat",n.fileFormat),this.$set(this.form,"fileId",n.fileId),this.$set(this.form,"filePath",n.filePath),this.showLinkedFileNotAvailableDialog=this.canEditForm&&n.fileId&&!n.filePath},async onReExport(){if(!this.form.fileId){Z(t("forms","File is not linked"));return}try{const e=await W.post(j("apps/forms/api/v2.4/submissions/export"),{hash:this.form.hash,path:this.form.filePath,fileFormat:this.form.fileFormat});zt(t("forms","Export successful to {file}",{file:ct(e)}))}catch(e){q.error("Error while exporting to Files",{error:e}),Z(t("forms","There was an error, while exporting to Files"))}},async deleteSubmission(e){this.loadingResults=!0;try{await W.delete(j("apps/forms/api/v2.4/submission/{id}",{id:e})),zt(t("forms","Submission deleted"));const n=this.form.submissions.findIndex(i=>i.id===e);this.form.submissions.splice(n,1),vt("forms:last-updated:set",this.form.id)}catch(n){q.error("Error while removing response ".concat(e),{error:n}),Z(t("forms","There was an error while removing this response"))}finally{this.loadingResults=!1}},deleteAllSubmissions(){this.showConfirmDeleteDialog=!0},async deleteAllSubmissionsConfirmed(){this.showConfirmDeleteDialog=!1,this.loadingResults=!0;try{await W.delete(j("apps/forms/api/v2.4/submissions/{formId}",{formId:this.form.id})),this.form.submissions=[],vt("forms:last-updated:set",this.form.id)}catch(e){q.error("Error while removing responses",{error:e}),Z(t("forms","There was an error while removing responses"))}finally{this.loadingResults=!1}},formatDateAnswers(e,n){const i=Object.fromEntries(n.filter(o=>o.type==="date"|o.type==="datetime"|o.type==="time").map(o=>[o.id,o.type]));return e.forEach(o=>{o.answers.filter(s=>s.questionId in i).forEach(s=>{const r=mt(s.text,he[i[s.questionId]].storageFormat);r.isValid()&&(s.text=r.format(he[i[s.questionId]].momentFormat))})}),e},getPicker(){return this.picker!==null?this.picker:(this.picker=Ki(t("forms","Choose spreadsheet location")).setMultiSelect(!1).allowDirectories().setButtonFactory((e,n,i)=>{if(e.length===1){const o=e[0].extension.slice(1).toLowerCase();return Ln[o]?[{label:t("forms","Select {file}",{file:e[0].basename}),icon:Ln[o],callback(){Xt=o},type:"primary"}]:[]}return[{label:t("forms","Create XLSX"),icon:ti,callback(){Xt="xlsx"},type:"secondary"},{label:t("forms","Create CSV"),icon:Jn,callback(){Xt="csv"},type:"secondary"},{label:t("forms","Create ODS"),icon:ni,callback(){Xt="ods"},type:"primary"}]}).build(),this.picker)}}};var qs=function(){var i;var e=this,n=e._self._c;return n("NcAppContent",[n("NcDialog",{attrs:{open:e.showLinkedFileNotAvailableDialog,name:e.t("forms","Linked file not available"),message:e.t("forms","Linked file is not available, would you like to link a new file?"),buttons:e.linkedFileNotAvailableButtons,size:"normal","can-close":!1},on:{"update:open":function(o){e.showLinkedFileNotAvailableDialog=o}}}),n("TopBar",{attrs:{archived:e.isFormArchived,permissions:(i=e.form)==null?void 0:i.permissions,"sidebar-opened":e.sidebarOpened},on:{"update:sidebarOpened":e.onSidebarChange,"share-form":e.onShareForm}}),e.loadingResults?n("NcEmptyContent",{staticClass:"forms-emptycontent",attrs:{name:e.t("forms","Loading responses ")},scopedSlots:e._u([{key:"icon",fn:function(){return[n("NcLoadingIcon",{attrs:{size:64}})]},proxy:!0}],null,!1,826850984)}):e.noSubmissions?n("NcEmptyContent",{staticClass:"forms-emptycontent",attrs:{name:e.t("forms","No responses yet"),description:e.t("forms","Results of submitted forms will show up here")},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconPoll",{attrs:{size:64}})]},proxy:!0},{key:"action",fn:function(){return[n("div",{staticClass:"response-actions"},[n("NcButton",{attrs:{type:"primary"},on:{click:e.onShareForm},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconShareVariant",{attrs:{size:20,decorative:""}})]},proxy:!0}])},[e._v(" "+e._s(e.t("forms","Share form"))+" ")]),e.canEditForm&&!e.form.fileId?n("NcButton",{attrs:{type:"tertiary-no-background"},on:{click:e.onLinkFile},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconLink",{attrs:{size:20}})]},proxy:!0}],null,!1,3963853667)},[e._v(" "+e._s(e.t("forms","Create spreadsheet"))+" ")]):e._e(),e.form.fileId?n("NcButton",{attrs:{href:e.fileUrl,type:"tertiary-no-background"},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconTable",{attrs:{size:20}})]},proxy:!0}],null,!1,294719581)},[e._v(" "+e._s(e.t("forms","Open spreadsheet"))+" ")]):e._e()],1)]},proxy:!0}])}):[n("header",[n("h2",{attrs:{dir:"auto"}},[e._v(" "+e._s(e.formTitle)+" ")]),n("p",[e._v(e._s(e.t("forms","{amount} responses",{amount:e.form.submissions.length})))]),n("div",{staticClass:"response-actions"},[n("PillMenu",{staticClass:"response-actions__toggle",attrs:{options:e.responseViews,active:e.activeResponseView},on:{"update:active":function(o){e.activeResponseView=o}}}),n("NcActions",{attrs:{"aria-label":e.t("forms","Options"),"force-name":"",inline:e.isMobile?0:1},on:{blur:function(o){e.isDownloadActionOpened=!1}}},[e.isDownloadActionOpened?[n("NcActionButton",{on:{click:function(o){e.isDownloadActionOpened=!1}},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconChevronLeft",{attrs:{size:20}})]},proxy:!0}])},[e._v(" "+e._s(e.t("forms","Download"))+" ")]),n("NcActionSeparator"),n("NcActionButton",{attrs:{"close-after-click":""},on:{click:function(o){return e.onDownloadFile("csv")}},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconFileDelimited",{attrs:{size:20}})]},proxy:!0}])},[e._v(" CSV ")]),n("NcActionButton",{attrs:{"close-after-click":""},on:{click:function(o){return e.onDownloadFile("ods")}},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconTable",{attrs:{size:20}})]},proxy:!0}])},[e._v(" ODS ")]),n("NcActionButton",{attrs:{"close-after-click":""},on:{click:function(o){return e.onDownloadFile("xlsx")}},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconFileExcel",{attrs:{size:20}})]},proxy:!0}])},[e._v(" XSLX ")])]:[e.canEditForm&&e.form.fileId?[n("NcActionButton",{attrs:{href:e.fileUrl,type:"tertiary-no-background"},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconTable",{attrs:{size:20}})]},proxy:!0}],null,!1,294719581)},[e._v(" "+e._s(e.t("forms","Open spreadsheet"))+" ")]),n("NcActionButton",{attrs:{"close-after-click":""},on:{click:e.onReExport},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconRefresh",{attrs:{size:20}})]},proxy:!0}],null,!1,3240524606)},[e._v(" "+e._s(e.t("forms","Re-export spreadsheet"))+" ")]),n("NcActionButton",{attrs:{"close-after-click":""},on:{click:e.onUnlinkFile},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconLinkVariantOff",{attrs:{size:20}})]},proxy:!0}],null,!1,97002203)},[e._v(" "+e._s(e.t("forms","Unlink spreadsheet"))+" ")]),n("NcActionSeparator")]:e.canEditForm?n("NcActionButton",{on:{click:e.onLinkFile},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconLink",{attrs:{size:20}})]},proxy:!0}],null,!1,3963853667)},[e._v(" "+e._s(e.t("forms","Create spreadsheet"))+" ")]):e._e(),n("NcActionButton",{attrs:{"close-after-click":""},on:{click:e.onStoreToFiles},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconFolder",{attrs:{size:20}})]},proxy:!0}],null,!1,2686820117)},[e._v(" "+e._s(e.t("forms","Save copy to Files"))+" ")]),n("NcActionButton",{attrs:{"close-after-click":!1,"is-menu":!0},on:{click:function(o){e.isDownloadActionOpened=!0}},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconDownload",{attrs:{size:20}})]},proxy:!0}],null,!1,2487097783)},[e._v(" "+e._s(e.t("forms","Download"))+" ")]),e.canDeleteSubmissions?n("NcActionButton",{attrs:{"close-after-click":""},on:{click:e.deleteAllSubmissions},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconDelete",{attrs:{size:20}})]},proxy:!0}],null,!1,881161434)},[e._v(" "+e._s(e.t("forms","Delete all responses"))+" ")]):e._e()]],2)],1)]),e.activeResponseView.id==="summary"?n("section",e._l(e.form.questions,function(o){return n("ResultsSummary",{key:o.id,attrs:{question:o,submissions:e.form.submissions}})}),1):n("section",e._l(e.form.submissions,function(o){return n("Submission",{key:o.id,attrs:{submission:o,questions:e.form.questions,"can-delete-submission":e.canDeleteSubmissions},on:{delete:function(s){return e.deleteSubmission(o.id)}}})}),1)],n("NcDialog",{attrs:{open:e.showConfirmDeleteDialog,name:e.t("forms","Delete submissions"),message:e.t("forms","Are you sure you want to delete all responses of {title}?",{title:e.formTitle}),buttons:e.confirmDeleteButtons},on:{"update:open":function(o){e.showConfirmDeleteDialog=o}}})],2)},Ys=[],Us=B(zs,qs,Ys,!1,null,"1b80a8e4",null,null);const js=Us.exports,Ws={name:"CogIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Xs=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon cog-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},Zs=[],Gs=B(Ws,Xs,Zs,!1,null,null,null,null);const Qs=Gs.exports,Ks={name:"AccountMultipleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Js=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon account-multiple-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M16 17V19H2V17S2 13 9 13 16 17 16 17M12.5 7.5A3.5 3.5 0 1 0 9 11A3.5 3.5 0 0 0 12.5 7.5M15.94 13A5.32 5.32 0 0 1 18 17V19H22V17S22 13.37 15.94 13M15 4A3.39 3.39 0 0 0 13.07 4.59A5 5 0 0 1 13.07 10.41A3.39 3.39 0 0 0 15 11A3.5 3.5 0 0 0 15 4Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},ta=[],ea=B(Ks,Js,ta,!1,null,null,null,null);const na=ea.exports,ia={name:"CodeBracketsIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var oa=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon code-brackets-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M15,4V6H18V18H15V20H20V4M4,4V20H9V18H6V6H9V4H4Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},ra=[],sa=B(ia,oa,ra,!1,null,null,null,null);const aa=sa.exports,la={name:"LinkBoxVariantOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var ca=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon link-box-variant-outline-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M19,19H5V5H19V19M13.94,10.06C14.57,10.7 14.92,11.54 14.92,12.44C14.92,13.34 14.57,14.18 13.94,14.81L11.73,17C11.08,17.67 10.22,18 9.36,18C8.5,18 7.64,17.67 7,17C5.67,15.71 5.67,13.58 7,12.26L8.35,10.9L8.34,11.5C8.33,12 8.41,12.5 8.57,12.94L8.62,13.09L8.22,13.5C7.91,13.8 7.74,14.21 7.74,14.64C7.74,15.07 7.91,15.47 8.22,15.78C8.83,16.4 9.89,16.4 10.5,15.78L12.7,13.59C13,13.28 13.18,12.87 13.18,12.44C13.18,12 13,11.61 12.7,11.3C12.53,11.14 12.44,10.92 12.44,10.68C12.44,10.45 12.53,10.23 12.7,10.06C13.03,9.73 13.61,9.74 13.94,10.06M18,9.36C18,10.26 17.65,11.1 17,11.74L15.66,13.1V12.5C15.67,12 15.59,11.5 15.43,11.06L15.38,10.92L15.78,10.5C16.09,10.2 16.26,9.79 16.26,9.36C16.26,8.93 16.09,8.53 15.78,8.22C15.17,7.6 14.1,7.61 13.5,8.22L11.3,10.42C11,10.72 10.82,11.13 10.82,11.56C10.82,12 11,12.39 11.3,12.7C11.47,12.86 11.56,13.08 11.56,13.32C11.56,13.56 11.47,13.78 11.3,13.94C11.13,14.11 10.91,14.19 10.68,14.19C10.46,14.19 10.23,14.11 10.06,13.94C8.75,12.63 8.75,10.5 10.06,9.19L12.27,7C13.58,5.67 15.71,5.68 17,7C17.65,7.62 18,8.46 18,9.36Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},ua=[],da=B(la,ca,ua,!1,null,null,null,null);const ha=da.exports,fa={name:"LinkVariantIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var pa=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon link-variant-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M10.59,13.41C11,13.8 11,14.44 10.59,14.83C10.2,15.22 9.56,15.22 9.17,14.83C7.22,12.88 7.22,9.71 9.17,7.76V7.76L12.71,4.22C14.66,2.27 17.83,2.27 19.78,4.22C21.73,6.17 21.73,9.34 19.78,11.29L18.29,12.78C18.3,11.96 18.17,11.14 17.89,10.36L18.36,9.88C19.54,8.71 19.54,6.81 18.36,5.64C17.19,4.46 15.29,4.46 14.12,5.64L10.59,9.17C9.41,10.34 9.41,12.24 10.59,13.41M13.41,9.17C13.8,8.78 14.44,8.78 14.83,9.17C16.78,11.12 16.78,14.29 14.83,16.24V16.24L11.29,19.78C9.34,21.73 6.17,21.73 4.22,19.78C2.27,17.83 2.27,14.66 4.22,12.71L5.71,11.22C5.7,12.04 5.83,12.86 6.11,13.65L5.64,14.12C4.46,15.29 4.46,17.19 5.64,18.36C6.81,19.54 8.71,19.54 9.88,18.36L13.41,14.83C14.59,13.66 14.59,11.76 13.41,10.59C13,10.2 13,9.56 13.41,9.17Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},ma=[],ga=B(fa,pa,ma,!1,null,null,null,null);const va=ga.exports,ba={name:"IconCopyAll",props:{title:{type:String,default:""},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:20}}};var ya=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon copy-all-icon",attrs:{"aria-hidden":!e.title,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,height:e.size,width:e.size,viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M 13.5 0 h -8 C 4.67 0 4 0.67 4 1.5 v 10 C 4 12.33 4.67 13 5.5 13 h 8 c 0.83 0 1.5 -0.67 1.5 -1.5 v -10 C 15 0.67 14.33 0 13.5 0 z M 13.5 11.5 h -8 v -10 h 8 V 11.5 z M 1 10 v -1.5 h 1.5 V 10 H 1 z M 1 13 v -1.5 h 1.5 V 13 H 1 z M 7 14.5 h 1.5 V 16 H 7 V 14.5 z M 1 5.5 h 1.5 V 7 H 1 V 5.5 z M 5.5 16 H 4 v -1.5 h 1.5 V 16 z M 2.5 16 C 1.67 16 1 15.33 1 14.5 h 1.5 V 16 z M 2.5 4 H 1 c 0 -0.83 0.67 -1.5 1.5 -1.5 V 4 z M 11.49 14.5 c 0 0.83 -0.67 1.5 -1.5 1.5 h 0 v -1.5 L 11.49 14.5 L 11.49 14.5 z"}}),e.title?n("title",[e._v(e._s(e.title))]):e._e()])])},_a=[],wa=B(ba,ya,_a,!1,null,null,null,null);const Sa=wa.exports,Ca='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-account" viewBox="0 0 24 24"><path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z" /></svg>',xa='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-account-group" viewBox="0 0 24 24"><path d="M12,5.5A3.5,3.5 0 0,1 15.5,9A3.5,3.5 0 0,1 12,12.5A3.5,3.5 0 0,1 8.5,9A3.5,3.5 0 0,1 12,5.5M5,8C5.56,8 6.08,8.15 6.53,8.42C6.38,9.85 6.8,11.27 7.66,12.38C7.16,13.34 6.16,14 5,14A3,3 0 0,1 2,11A3,3 0 0,1 5,8M19,8A3,3 0 0,1 22,11A3,3 0 0,1 19,14C17.84,14 16.84,13.34 16.34,12.38C17.2,11.27 17.62,9.85 17.47,8.42C17.92,8.15 18.44,8 19,8M5.5,18.25C5.5,16.18 8.41,14.5 12,14.5C15.59,14.5 18.5,16.18 18.5,18.25V20H5.5V18.25M0,20V18.5C0,17.11 1.89,15.94 4.45,15.6C3.86,16.28 3.5,17.22 3.5,18.25V20H0M24,20H20.5V18.25C20.5,17.22 20.14,16.28 19.55,15.6C22.11,15.94 24,17.11 24,18.5V20Z" /></svg>',Ea='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-email" viewBox="0 0 24 24"><path d="M20,8L12,13L4,8V6L12,11L20,6M20,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6C22,4.89 21.1,4 20,4Z" /></svg>',Aa='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-chat" viewBox="0 0 24 24"><path d="M12,3C17.5,3 22,6.58 22,11C22,15.42 17.5,19 12,19C10.76,19 9.57,18.82 8.47,18.5C5.55,21 2,21 2,21C4.33,18.67 4.7,17.1 4.75,16.5C3.05,15.07 2,13.13 2,11C2,6.58 6.5,3 12,3Z" /></svg>',ka='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-circle-outline" viewBox="0 0 24 24"><path d="M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" /></svg>',Ve={data(){return{SHARE_TYPES:{SHARE_TYPE_USER:OC.Share.SHARE_TYPE_USER,SHARE_TYPE_GROUP:OC.Share.SHARE_TYPE_GROUP,SHARE_TYPE_LINK:OC.Share.SHARE_TYPE_LINK,SHARE_TYPE_EMAIL:OC.Share.SHARE_TYPE_EMAIL,SHARE_TYPE_REMOTE:OC.Share.SHARE_TYPE_REMOTE,SHARE_TYPE_CIRCLE:OC.Share.SHARE_TYPE_CIRCLE,SHARE_TYPE_GUEST:OC.Share.SHARE_TYPE_GUEST,SHARE_TYPE_REMOTE_GROUP:OC.Share.SHARE_TYPE_REMOTE_GROUP,SHARE_TYPE_ROOM:OC.Share.SHARE_TYPE_ROOM},SHARE_TYPES_USED:[OC.Share.SHARE_TYPE_USER,OC.Share.SHARE_TYPE_GROUP,OC.Share.SHARE_TYPE_LINK,OC.Share.SHARE_TYPE_CIRCLE]}},methods:{shareTypeToIcon(e){switch(e){case this.SHARE_TYPES.SHARE_TYPE_GUEST:return Ca;case this.SHARE_TYPES.SHARE_TYPE_REMOTE_GROUP:case this.SHARE_TYPES.SHARE_TYPE_GROUP:return xa;case this.SHARE_TYPES.SHARE_TYPE_EMAIL:return Ea;case this.SHARE_TYPES.SHARE_TYPE_CIRCLE:return ka;case this.SHARE_TYPES.SHARE_TYPE_ROOM:return Aa;default:return""}}}},ii={mixins:[Ve],data(){return{loading:!1,query:"",maxAutocompleteResults:parseInt(OC.config["sharing.maxAutocompleteResults"],10)||200,minSearchStringLength:parseInt(OC.config["sharing.minSearchStringLength"],10)||0,recommendations:[],suggestions:[]}},computed:{isValidQuery(){return this.query&&this.query.trim()!==""&&this.query.length>this.minSearchStringLength},noResultText(){return this.query?t("forms","No elements found."):t("forms","No recommendations. Start typing.")}},methods:{async asyncSearch(e){this.query=e.trim(),this.isValidQuery&&(this.loading=!0,await this.debounceGetSuggestions(e))},debounceGetSuggestions:en(function(...e){this.getSuggestions(...e)},300),async getSuggestions(e){this.loading=!0;const n=this.SHARE_TYPES_USED.filter(i=>i!==this.SHARE_TYPES.SHARE_TYPE_LINK);try{const i=await W.get(j("apps/files_sharing/api/v1/sharees"),{params:{format:"json",itemType:"file",perPage:this.maxAutocompleteResults,search:e,shareType:n}}),o=ct(i),s=o.exact;delete o.exact;const r=this.formatSearchResults(s),a=this.formatSearchResults(o);this.suggestions=r.concat(a)}catch(i){q.error("Loading Suggestions failed.",{error:i})}finally{this.loading=!1}},async getRecommendations(){this.loading=!0;try{const e=await W.get(j("apps/files_sharing/api/v1/sharees_recommended"),{params:{format:"json",itemType:"file"}});this.recommendations=this.formatSearchResults(ct(e).exact)}catch(e){q.error("Fetching recommendations failed.",{error:e})}finally{this.loading=!1}},formatSearchResults(e){const n=Object.values(e).flat();return this.filterUnwantedShares(n).map(i=>this.formatForMultiselect(i)).sort((i,o)=>i.shareType-o.shareType)},filterUnwantedShares(e){return e.filter(n=>{if(typeof n!="object")return!1;try{return!(n.value.shareType===this.SHARE_TYPES.SHARE_TYPE_USER&&n.value.shareWith===wi().uid)}catch{return!1}})},formatForMultiselect(e){return{shareWith:e.value.shareWith,shareType:e.value.shareType,user:e.value.shareWith,isNoUser:e.value.shareType!==this.SHARE_TYPES.SHARE_TYPE_USER,id:e.value.shareWith,displayName:e.label,subname:e.shareWithDisplayNameUnique,iconSvg:this.shareTypeToIcon(e.value.shareType),key:e.value.shareWith+"-"+e.value.shareType}}}},Ta={components:{NcSelect:Hn},mixins:[ii],props:{currentShares:{type:Array,default:()=>[]},showLoading:{type:Boolean,default:!1}},computed:{options(){return this.isValidQuery?this.suggestions.filter(e=>!this.currentShares.find(n=>n.shareWith===e.shareWith&&n.shareType===e.shareType)):this.recommendations.filter(e=>!this.currentShares.find(n=>n.shareWith===e.shareWith&&n.shareType===e.shareType))},showLoadingCircle(){return this.showLoading||this.loading}},mounted(){this.getRecommendations()},methods:{addShare(e){const n={shareWith:e.shareWith,displayName:e.displayName,shareType:e.shareType};this.$emit("add-share",n)}}};var Na=function(){var e=this,n=e._self._c;return n("div",[n("NcSelect",{attrs:{"clear-search-on-select":!1,"close-on-select":!1,loading:e.showLoadingCircle,"get-option-key":i=>i.key,options:e.options,placeholder:e.t("forms","Search for user, group or team "),"user-select":!0,"filter-by":()=>!0,label:"displayName"},on:{search:e.asyncSearch,input:e.addShare},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v(" "+e._s(e.noResultText)+" ")]},proxy:!0}])})],1)},La=[],Ma=B(Ta,Na,La,!1,null,"2d825a32",null,null);const Ia=Ma.exports,Da={components:{IconClose:Ii,NcActions:Qt,NcActionButton:Kt,NcActionCaption:Zo,NcActionCheckbox:Di,NcActionSeparator:bn,NcAvatar:Si},mixins:[fe,Ve],props:{share:{type:Object,required:!0}},computed:{canAccessResults(){return this.share.permissions.includes(this.PERMISSION_TYPES.PERMISSION_RESULTS)},canDeleteResults(){return this.share.permissions.includes(this.PERMISSION_TYPES.PERMISSION_RESULTS_DELETE)},isNoUser(){return this.share.shareType!==this.SHARE_TYPES.SHARE_TYPE_USER},displayName(){return this.share.displayName?this.share.displayName:this.share.shareWith},displayNameAppendix(){switch(this.share.shareType){case this.SHARE_TYPES.SHARE_TYPE_GROUP:return"(".concat(t("forms","Group"),")");case this.SHARE_TYPES.SHARE_TYPE_CIRCLE:return"(".concat(t("forms","Team"),")");default:return""}}},methods:{removeShare(){this.$emit("remove-share",this.share)},updatePermissionResults(e){return e===!1&&this.updatePermission(this.PERMISSION_TYPES.PERMISSION_RESULTS_DELETE,!1),this.updatePermission(this.PERMISSION_TYPES.PERMISSION_RESULTS,e)},updatePermissionDeleteResults(e){return this.updatePermission(this.PERMISSION_TYPES.PERMISSION_RESULTS_DELETE,e)},updatePermission(e,n){const i={...this.share};n?i.permissions=[...new Set([...i.permissions,e])]:i.permissions=i.permissions.filter(o=>o!==e),this.$emit("update:share",i)}}};var Pa=function(){var e=this,n=e._self._c;return n("li",{staticClass:"share-div"},[n("NcAvatar",{attrs:{user:e.share.shareWith,"disable-menu":!0,"display-name":e.displayName,"is-no-user":e.isNoUser}}),n("div",{staticClass:"share-div__desc"},[n("span",[e._v(e._s(e.displayName))]),n("span",[e._v(e._s(e.displayNameAppendix))])]),n("NcActions",{staticClass:"share-div__actions"},[n("NcActionCaption",{attrs:{name:e.t("forms","Permissions")}}),n("NcActionCheckbox",{attrs:{checked:e.canAccessResults},on:{"update:checked":e.updatePermissionResults}},[e._v(" "+e._s(e.t("forms","View responses"))+" ")]),n("NcActionCheckbox",{attrs:{checked:e.canDeleteResults,disabled:!e.canAccessResults},on:{"update:checked":e.updatePermissionDeleteResults}},[e._v(" "+e._s(e.t("forms","Delete responses"))+" ")]),n("NcActionSeparator"),n("NcActionButton",{on:{click:e.removeShare},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconClose",{attrs:{size:20}})]},proxy:!0}])},[e._v(" "+e._s(e.t("forms","Delete"))+" ")])],1)],1)},Oa=[],Fa=B(Da,Pa,Oa,!1,null,"c86e901c",null,null);const Ha=Fa.exports,Ra={methods:{getInternalShareLink(e){return window.location.protocol+"//"+window.location.host+ae("/apps/forms/".concat(this.form.hash))},getPublicShareLink(e){let n;return this.isEmbeddingAllowed(e)?n=ae("/apps/forms/embed/".concat(e.shareWith)):n=ae("/apps/forms/s/".concat(e.shareWith)),new URL(n,window.location).href},isEmbeddingAllowed(e){var n;return e.shareType===this.SHARE_TYPES.SHARE_TYPE_LINK&&((n=e.permissions)==null?void 0:n.includes(this.PERMISSION_TYPES.PERMISSION_EMBED))},async copyLink(e,n){try{await navigator.clipboard.writeText(n),zt(t("forms","Form link copied"))}catch(i){Z(t("forms","Cannot copy, please copy the link manually")),q.error("Copy link failed",{error:i})}e.target.focus()},async copyEmbeddingCode(e){const n='<iframe src="'.concat(this.getPublicShareLink(e),'" width="750" height="900"></iframe>');try{await navigator.clipboard.writeText(n),zt(t("forms","Embedding code copied"))}catch(i){Z(t("forms","Cannot copy the code")),q.error("Copy embedding code failed",{error:i})}event.target.focus()}}},Va={components:{FormsIcon:pn,IconAccountMultiple:na,IconAlertCircleOutline:Pi,IconCodeBrackets:aa,IconCopyAll:Sa,IconDelete:Fe,IconLinkBoxVariantOutline:ha,IconLinkVariant:va,IconPlus:vn,NcActions:Qt,NcActionButton:Kt,NcActionLink:Ci,NcCheckboxRadioSwitch:Rn,SharingSearchDiv:Ia,SharingShareDiv:Ha},mixins:[Ve,Ra,fe],props:{form:{type:Object,required:!0}},data(){return{isLoading:!1,appConfig:Pe(In,"appConfig")}},computed:{sortedShares(){return this.form.shares.filter(e=>e.shareType!==this.SHARE_TYPES.SHARE_TYPE_LINK).sort(this.sortByTypeAndDisplayname)},hasPublicLink(){return this.publicLinkShares.length!==0},publicLinkShares(){const e=this.form.shares.filter(n=>n.shareType===this.SHARE_TYPES.SHARE_TYPE_LINK);return e.sort((n,i)=>this.isEmbeddingAllowed(n)?1:this.isEmbeddingAllowed(i)?-1:0),e}},methods:{async addShare(e){this.isLoading=!0;try{const n=await W.post(j("apps/forms/api/v2.4/share"),{formId:this.form.id,shareType:e.shareType,shareWith:e.shareWith}),i=ct(n);this.$emit("add-share",i)}catch(n){q.error("Error while adding new share",{error:n,share:e}),Z(t("forms","There was an error while adding the share"))}finally{this.isLoading=!1}},async addPublicLink(){this.isLoading=!0;try{const e=await W.post(j("apps/forms/api/v2.4/share"),{formId:this.form.id,shareType:this.SHARE_TYPES.SHARE_TYPE_LINK}),n=ct(e);this.$emit("add-share",n)}catch(e){q.error("Error adding public link",{error:e}),Z(t("forms","There was an error while adding the link"))}finally{this.isLoading=!1}},makeEmbeddable(e){this.updateShare({...e,permissions:[...e.permissions,this.PERMISSION_TYPES.PERMISSION_EMBED]})},async updateShare(e){this.isLoading=!0;try{const n=await W.patch(j("apps/forms/api/v2.4/share/update"),{id:e.id,keyValuePairs:{permissions:e.permissions}}),i=Object.assign(e,{id:ct(n)});this.$emit("update-share",i)}catch(n){q.error("Error while updating share",{error:n,share:e}),Z(t("forms","There was an error while updating the share"))}finally{this.isLoading=!1}},async removeShare(e){this.isLoading=!0;try{await W.delete(j("apps/forms/api/v2.4/share/{id}",{id:e.id})),this.$emit("remove-share",e)}catch(n){q.error("Error while removing share",{error:n,share:e}),Z(t("forms","There was an error while removing the share"))}finally{this.isLoading=!1}},sortByTypeAndDisplayname(e,n){return e.shareType<n.shareType?-1:e.shareType>n.shareType?1:e.displayName.toLowerCase()<n.displayName.toLowerCase()?-1:e.displayName.toLowerCase()>n.displayName.toLowerCase()?1:0},onPermitAllUsersChange(e){const n={...this.form.access};n.permitAllUsers=e,this.$emit("update:formProp","access",n)},onShowToAllUsersChange(e){const n={...this.form.access};n.showToAllUsers=e,this.$emit("update:formProp","access",n)},removeLegacyLink(){const e={...this.form.access};delete e.legacyLink,this.$emit("update:formProp","access",e)}}};var $a=function(){var e=this,n=e._self._c;return n("div",{staticClass:"sidebar-tabs__content"},[n("SharingSearchDiv",{attrs:{"current-shares":e.form.shares,"show-loading":e.isLoading},on:{"add-share":e.addShare}}),!e.hasPublicLink&&e.appConfig.allowPublicLink?n("div",{staticClass:"share-div share-div--link"},[n("div",{staticClass:"share-div__avatar"},[n("IconLinkVariant",{attrs:{size:20}})],1),n("span",{staticClass:"share-div__desc"},[e._v(e._s(e.t("forms","Share link")))]),n("NcActions",[n("NcActionButton",{on:{click:e.addPublicLink},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconPlus",{attrs:{size:20}})]},proxy:!0}],null,!1,1991456921)},[e._v(" "+e._s(e.t("forms","Add link"))+" ")])],1)],1):n("TransitionGroup",{attrs:{tag:"div"}},e._l(e.publicLinkShares,function(i){return n("div",{key:"share-"+i.shareType+"-"+i.shareWith,staticClass:"share-div share-div--link",class:{"share-div--embeddable":e.isEmbeddingAllowed(i)},attrs:{set:void(e.isEmbeddable=e.isEmbeddingAllowed(i))}},[n("div",{staticClass:"share-div__avatar"},[e.isEmbeddable?n("IconLinkBoxVariantOutline",{attrs:{size:20}}):n("IconLinkVariant",{attrs:{size:20}})],1),n("span",{staticClass:"share-div__desc"},[e._v(e._s(e.isEmbeddable?e.t("forms","Embeddable link"):e.t("forms","Share link")))]),n("NcActions",{attrs:{inline:1}},[n("NcActionLink",{attrs:{href:e.getPublicShareLink(i)},on:{click:function(o){o.preventDefault(),e.copyLink(o,e.getPublicShareLink(i))}},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconCopyAll",{attrs:{size:20}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(e.t("forms","Copy to clipboard"))+" ")]),e.isEmbeddable?n("NcActionButton",{on:{click:function(o){return e.copyEmbeddingCode(i)}},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconCodeBrackets",{attrs:{size:20}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(e.t("forms","Copy embedding code"))+" ")]):n("NcActionButton",{on:{click:function(o){return e.makeEmbeddable(i)}},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconLinkBoxVariantOutline",{attrs:{size:20}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(e.t("forms","Convert to embeddable link"))+" ")]),n("NcActionButton",{on:{click:function(o){return e.removeShare(i)}},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconDelete",{attrs:{size:20}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(e.t("forms","Remove link"))+" ")]),e.appConfig.allowPublicLink?n("NcActionButton",{attrs:{"close-after-click":!0},on:{click:e.addPublicLink},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconPlus",{attrs:{size:20}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(e.t("forms","Add link"))+" ")]):e._e()],1)],1)}),0),e.form.access.legacyLink?n("div",{staticClass:"share-div"},[n("div",{staticClass:"share-div__avatar"},[n("IconLinkVariant",{attrs:{size:20}})],1),n("div",{staticClass:"share-div__desc share-div__desc--twoline"},[n("span",[e._v(e._s(e.t("forms","Legacy Link")))]),n("span",[e._v(e._s(e.t("forms","Form still supports old sharing-link.")))])]),n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.t("forms","For compatibility with the old Sharing, the internal link is still usable as Share link. We recommend replacing the link with a new Share link."),expression:"t('forms', 'For compatibility with the old Sharing, the internal link is still usable as Share link. We recommend replacing the link with a new Share link.')"}],staticClass:"share-div__legacy-warning"},[n("IconAlertCircleOutline",{attrs:{size:20}})],1),n("NcActions",[n("NcActionButton",{on:{click:e.removeLegacyLink},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconDelete",{attrs:{size:20}})]},proxy:!0}],null,!1,881161434)},[e._v(" "+e._s(e.t("forms","Remove Legacy Link"))+" ")])],1)],1):e._e(),n("div",{staticClass:"share-div"},[n("div",{staticClass:"share-div__avatar"},[n("IconLinkVariant",{attrs:{size:20}})],1),n("div",{staticClass:"share-div__desc share-div__desc--twoline"},[n("span",[e._v(e._s(e.t("forms","Internal link")))]),n("span",[e._v(e._s(e.t("forms","Only works for logged in accounts with access rights")))])]),n("NcActions",[n("NcActionLink",{attrs:{href:e.getInternalShareLink(e.form.hash)},on:{click:function(i){i.preventDefault(),e.copyLink(i,e.getInternalShareLink(e.form.hash))}},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconCopyAll",{attrs:{size:20}})]},proxy:!0}])},[e._v(" "+e._s(e.t("forms","Copy to clipboard"))+" ")])],1)],1),e.appConfig.allowPermitAll?n("div",[n("div",{staticClass:"share-div"},[n("div",{staticClass:"share-div__avatar"},[n("IconAccountMultiple",{attrs:{size:20}})],1),n("label",{staticClass:"share-div__desc",attrs:{for:"share-switch__permit-all"}},[e._v(" "+e._s(e.t("forms","Permit access to all logged in accounts"))+" ")]),n("NcCheckboxRadioSwitch",{attrs:{id:"share-switch__permit-all",checked:e.form.access.permitAllUsers,type:"switch"},on:{"update:checked":e.onPermitAllUsersChange}})],1),e.form.access.permitAllUsers?n("div",{staticClass:"share-div share-div--indent"},[n("div",{staticClass:"share-div__avatar"},[n("FormsIcon",{attrs:{size:16}})],1),n("label",{staticClass:"share-div__desc",attrs:{for:"share-switch__show-to-all"}},[e._v(" "+e._s(e.t("forms","Show to all accounts on sidebar"))+" ")]),n("NcCheckboxRadioSwitch",{attrs:{id:"share-switch__show-to-all",checked:e.form.access.showToAllUsers,type:"switch"},on:{"update:checked":e.onShowToAllUsersChange}})],1):e._e()]):e._e(),n("TransitionGroup",{attrs:{tag:"ul"}},e._l(e.sortedShares,function(i){return n("SharingShareDiv",{key:"share-"+i.shareType+"-"+i.shareWith,attrs:{share:i},on:{"remove-share":e.removeShare,"update:share":e.updateShare}})}),1)],1)},Ba=[],za=B(Va,$a,Ba,!1,null,"9a4fb4d7",null,null);const qa=za.exports,Ya={components:{NcButton:De,NcDialog:He,NcTextField:Oi,NcSelect:Hn},mixins:[ii],props:{form:{type:Object,required:!0}},data(){return{selected:null,showModal:!1,confirmationInput:"",loading:!1}},computed:{canTransfer(){return this.confirmationInput===this.confirmationString&&!!this.selected},confirmationString(){return"".concat(this.form.ownerId,"/").concat(this.form.title)},options(){return this.isValidQuery?this.suggestions:this.recommendations}},methods:{clearText(){this.confirmationInput=""},closeModal(){this.showModal=!1},openModal(){this.showModal=!0},async onOwnershipTransfer(){if(this.showModal=!1,this.form.id&&this.selected.shareWith)try{vt("forms:last-updated:set",this.form.id),await W.post(j("apps/forms/api/v2.4/form/transfer"),{formId:this.form.id,uid:this.selected.shareWith}),zt("".concat(t("forms","This form is now owned by")," ").concat(this.selected.displayName)),vt("forms:ownership-transfered",this.form.id)}catch(e){q.error("Error while transfering form ownership",{error:e}),Z(t("forms","An error occurred while transfering ownership"))}else q.error("Null parameters while transfering form ownership",{selectedUser:this.selected}),Z(t("forms","An error occurred while transfering ownership"))},clearSelected(){this.selected=null}}};var Ua=function(){var e=this,n=e._self._c;return n("div",[n("NcButton",{staticClass:"transfer-button",attrs:{alignment:"start",type:"tertiary",wide:!0},on:{click:e.openModal}},[n("span",{staticClass:"transfer-button__text"},[e._v(e._s(e.t("forms","Transfer ownership")))])]),n("NcDialog",{attrs:{open:e.showModal,"content-classes":"modal-content",name:e.t("forms","Transfer ownership"),"out-transition":!0},on:{"update:open":function(i){e.showModal=i},close:e.closeModal},scopedSlots:e._u([{key:"default",fn:function(){return[n("p",{domProps:{innerHTML:e._s(e.t("forms","You're going to transfer the ownership of {name} to another account. Please select the account to which you want to transfer ownership.",{name:"<strong>".concat(e.form.title,"</strong>")},void 0,{escape:!1}))}}),n("NcSelect",{staticClass:"modal-content__select",attrs:{"reset-focus-on-options-change":!1,"clear-search-on-select":!0,"close-on-select":!0,loading:e.loading,"get-option-key":i=>i.key,options:e.options,placeholder:e.t("forms","Search for a user"),"user-select":!0,label:"displayName"},on:{search:i=>e.asyncSearch(i,!0)},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v(" "+e._s(e.noResultText)+" ")]},proxy:!0}]),model:{value:e.selected,callback:function(i){e.selected=i},expression:"selected"}}),n("br"),n("p",{domProps:{innerHTML:e._s(e.t("forms","Type {text} to confirm.",{text:"<strong>".concat(e.confirmationString,"</strong>")},void 0,{escape:!1}))}}),n("NcTextField",{attrs:{label:e.t("forms","Confirmation text"),value:e.confirmationInput,success:e.confirmationInput===e.confirmationString},on:{"update:value":function(i){e.confirmationInput=i}}}),n("br"),n("p",[n("strong",[e._v(e._s(e.t("forms","This can not be undone.")))])])]},proxy:!0},{key:"actions",fn:function(){return[n("NcButton",{attrs:{disabled:!e.canTransfer,type:"error"},on:{click:e.onOwnershipTransfer}},[e._v(" "+e._s(e.t("forms","I understand, transfer this form"))+" ")])]},proxy:!0}])})],1)},ja=[],Wa=B(Ya,Ua,ja,!1,null,"20063a6a",null,null);const Xa=Wa.exports;var oi={exports:{}};(function(e,n){(function(i,o){e.exports=o()})(Dn,function(){var i="__v-click-outside",o=typeof window<"u",s=typeof navigator<"u",r=o&&("ontouchstart"in window||s&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"];function a(u){var h=u.event,p=u.handler;(0,u.middleware)(h)&&p(h)}function l(u,h){var p=function(C){var _=typeof C=="function";if(!_&&typeof C!="object")throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:_?C:C.handler,middleware:C.middleware||function(I){return I},events:C.events||r,isActive:C.isActive!==!1,detectIframe:C.detectIframe!==!1,capture:!!C.capture}}(h.value),g=p.handler,b=p.middleware,m=p.detectIframe,S=p.capture;if(p.isActive){if(u[i]=p.events.map(function(C){return{event:C,srcTarget:document.documentElement,handler:function(_){return function(I){var H=I.el,P=I.event,O=I.handler,T=I.middleware,A=P.composedPath&&P.composedPath()||P.path;(A?A.indexOf(H)<0:!H.contains(P.target))&&a({event:P,handler:O,middleware:T})}({el:u,event:_,handler:g,middleware:b})},capture:S}}),m){var E={event:"blur",srcTarget:window,handler:function(C){return function(_){var I=_.el,H=_.event,P=_.handler,O=_.middleware;setTimeout(function(){var T=document.activeElement;T&&T.tagName==="IFRAME"&&!I.contains(T)&&a({event:H,handler:P,middleware:O})},0)}({el:u,event:C,handler:g,middleware:b})},capture:S};u[i]=[].concat(u[i],[E])}u[i].forEach(function(C){var _=C.event,I=C.srcTarget,H=C.handler;return setTimeout(function(){u[i]&&I.addEventListener(_,H,S)},0)})}}function c(u){(u[i]||[]).forEach(function(h){return h.srcTarget.removeEventListener(h.event,h.handler,h.capture)}),delete u[i]}var d=o?{bind:l,update:function(u,h){var p=h.value,g=h.oldValue;JSON.stringify(p)!==JSON.stringify(g)&&(c(u),l(u,{value:p}))},unbind:c}:{};return{install:function(u){u.directive("click-outside",d)},directive:d}})})(oi);var Za=oi.exports;const Ga={components:{NcCheckboxRadioSwitch:Rn,NcDateTimePicker:Fi,TransferOwnership:Xa},directives:{ClickOutside:Za.directive},mixins:[Ve],inject:["$markdownit"],props:{form:{type:Object,required:!0}},data(){return{formatter:{stringify:this.stringifyDate,parse:this.parseTimestampToDate},maxStringLengths:Pe("forms","maxStringLengths"),editMessage:!1}},computed:{hasCustomSubmissionMessage(){var e,n;return((e=this.form)==null?void 0:e.submissionMessage)!==void 0&&((n=this.form)==null?void 0:n.submissionMessage)!==null},disableSubmitMultiple(){return this.hasPublicLink||this.form.access.legacyLink||this.form.isAnonymous},disableSubmitMultipleExplanation(){return this.disableSubmitMultiple?t("forms","This can not be controlled, if the form has a public link or stores responses anonymously."):""},hasPublicLink(){return this.form.shares.filter(e=>e.shareType===this.SHARE_TYPES.SHARE_TYPE_LINK).length!==0},submitMultiple(){return this.disableSubmitMultiple||this.form.submitMultiple},formExpires(){return this.form.expires!==0},formArchived(){return this.form.state===ht.FormArchived},formClosed(){return this.form.state!==ht.FormActive},isExpired(){return this.form.expires&&mt().unix()>this.form.expires},expirationDate(){return mt(this.form.expires,"X").toDate()},submissionMessageHTML(){return this.$markdownit.render(this.form.submissionMessage||"")}},methods:{onAnonChange(e){this.$emit("update:formProp","isAnonymous",e)},onSubmitMultipleChange(e){this.$emit("update:formProp","submitMultiple",e)},onFormExpiresChange(e){e?this.$emit("update:formProp","expires",mt().add(1,"hour").unix()):this.$emit("update:formProp","expires",0)},onShowExpirationChange(e){this.$emit("update:formProp","showExpiration",e)},onExpirationDateChange(e){this.$emit("update:formProp","expires",parseInt(mt(e).format("X")))},onFormClosedChange(e){this.$emit("update:formProp","state",e?ht.FormClosed:ht.FormActive)},onFormArchivedChange(e){this.$emit("update:formProp","state",e?ht.FormArchived:ht.FormClosed)},onSubmissionMessageChange({target:e}){this.$emit("update:formProp","submissionMessage",e.value)},onUpdateHasCustomSubmissionMessage(){this.hasCustomSubmissionMessage?this.$emit("update:formProp","submissionMessage",null):this.$emit("update:formProp","submissionMessage","")},stringifyDate(e){const n=mt(e).format("LLL");return this.isExpired?t("forms","Expired on {date}",{date:n}):t("forms","Expires on {date}",{date:n})},parseTimestampToDate(e){return mt(e,"X").toDate()},notBeforeToday(e){return e<mt().add(-1,"day").toDate()},notBeforeNow(e){return e<mt().toDate()}}};var Qa=function(){var e=this,n=e._self._c;return n("div",{staticClass:"sidebar-tabs__content"},[n("NcCheckboxRadioSwitch",{attrs:{checked:e.form.isAnonymous,disabled:e.formArchived,type:"switch"},on:{"update:checked":e.onAnonChange}},[e._v(" "+e._s(e.t("forms","Store responses anonymously"))+" ")]),n("NcCheckboxRadioSwitch",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.disableSubmitMultipleExplanation,expression:"disableSubmitMultipleExplanation"}],attrs:{checked:e.submitMultiple,disabled:e.disableSubmitMultiple||e.formArchived,type:"switch"},on:{"update:checked":e.onSubmitMultipleChange}},[e._v(" "+e._s(e.t("forms","Allow multiple responses per person"))+" ")]),n("NcCheckboxRadioSwitch",{attrs:{checked:e.formExpires,disabled:e.formArchived,type:"switch"},on:{"update:checked":e.onFormExpiresChange}},[e._v(" "+e._s(e.t("forms","Set expiration date"))+" ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.formExpires&&!e.formArchived,expression:"formExpires && !formArchived"}],staticClass:"settings-div--indent"},[n("NcDateTimePicker",{attrs:{id:"expiresDatetimePicker",clearable:!1,"disabled-date":e.notBeforeToday,"disabled-time":e.notBeforeNow,editable:!1,formatter:e.formatter,"minute-step":5,"show-second":!1,value:e.expirationDate,type:"datetime"},on:{change:e.onExpirationDateChange}}),n("NcCheckboxRadioSwitch",{attrs:{checked:e.form.showExpiration,type:"switch"},on:{"update:checked":e.onShowExpirationChange}},[e._v(" "+e._s(e.t("forms","Show expiration date on form"))+" ")])],1),n("NcCheckboxRadioSwitch",{attrs:{checked:e.formClosed,disabled:e.formArchived,"aria-describedby":"forms-settings__close-form",type:"switch"},on:{"update:checked":e.onFormClosedChange}},[e._v(" "+e._s(e.t("forms","Close form"))+" ")]),n("p",{staticClass:"settings-hint",attrs:{id:"forms-settings__close-form"}},[e._v(" "+e._s(e.t("forms","Closed forms do not accept new submissions."))+" ")]),n("NcCheckboxRadioSwitch",{attrs:{checked:e.formArchived,"aria-describedby":"forms-settings__archive-form",type:"switch"},on:{"update:checked":e.onFormArchivedChange}},[e._v(" "+e._s(e.t("forms","Archive form"))+" ")]),n("p",{staticClass:"settings-hint",attrs:{id:"forms-settings__archive-form"}},[e._v(" "+e._s(e.t("forms","Archived forms do not accept new submissions and can not be modified."))+" ")]),n("NcCheckboxRadioSwitch",{attrs:{checked:e.hasCustomSubmissionMessage,disabled:e.formArchived,type:"switch"},on:{"update:checked":e.onUpdateHasCustomSubmissionMessage}},[e._v(" "+e._s(e.t("forms","Custom submission message"))+" ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.hasCustomSubmissionMessage,expression:"hasCustomSubmissionMessage"}],staticClass:"settings-div--indent submission-message",attrs:{tabindex:e.editMessage?void 0:"0"},on:{focus:function(i){e.editMessage=!0}}},[!e.formArchived&&(e.editMessage||!e.form.submissionMessage)?n("textarea",{directives:[{name:"click-outside",rawName:"v-click-outside",value:()=>{e.editMessage=!1},expression:"() => { editMessage = false }"}],staticClass:"submission-message__input",attrs:{"aria-describedby":"forms-submission-message-description","aria-label":e.t("forms","Custom submission message"),maxlength:e.maxStringLengths.submissionMessage,placeholder:e.t("forms","Message to show after a user submitted the form (formatting using Markdown is supported)")},domProps:{value:e.form.submissionMessage},on:{blur:function(i){e.editMessage=!1},change:e.onSubmissionMessageChange}}):n("div",{staticClass:"submission-message__output",attrs:{"aria-label":e.t("forms","Custom submission message")},domProps:{innerHTML:e._s(e.submissionMessageHTML)}}),n("div",{staticClass:"submission-message__description",attrs:{id:"forms-submission-message-description"}},[e._v(" "+e._s(e.t("forms","Message to show after a user submitted the form. Please note that the message will not be translated!"))+" ")])]),n("TransferOwnership",{attrs:{form:e.form}})],1)},Ka=[],Ja=B(Ga,Qa,Ka,!1,null,"4e47d584",null,null);const tl=Ja.exports,el={name:"Sidebar",components:{IconSettings:Qs,IconShareVariant:dn,NcAppSidebar:Hi,NcAppSidebarTab:xr,SharingSidebarTab:qa,SettingsSidebarTab:tl},mixins:[un],props:{active:{type:String,default:"forms-sharing"}},methods:{onClose(){this.$emit("update:sidebarOpened",!1)},onToggle(){this.$emit("update:sidebarOpened",!this.sidebarOpened)},onUpdateActive(e){this.$emit("update:active",e)},onPropertyChange(e,n){this.$set(this.form,e,n),this.saveFormProperty(e)},onAddShare(e){this.form.shares.push(e),vt("forms:last-updated:set",this.form.id)},onRemoveShare(e){const n=this.form.shares.findIndex(i=>i.id===e.id);this.form.shares.splice(n,1),vt("forms:last-updated:set",this.form.id)},onUpdateShare(e){const n=this.form.shares.findIndex(i=>i.id===e.id);this.form.shares.splice(n,1,e),vt("forms:last-updated:set",this.form.id)}}};var nl=function(){var e=this,n=e._self._c;return n("NcAppSidebar",{directives:[{name:"show",rawName:"v-show",value:e.sidebarOpened,expression:"sidebarOpened"}],attrs:{active:e.active,name:e.t("forms","Form settings")},on:{close:e.onClose,"update:active":e.onUpdateActive}},[n("NcAppSidebarTab",{attrs:{id:"forms-sharing",order:0,name:e.t("forms","Sharing")},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconShareVariant",{attrs:{size:20}})]},proxy:!0}])},[n("SharingSidebarTab",{attrs:{form:e.form},on:{"update:formProp":e.onPropertyChange,"add-share":e.onAddShare,"remove-share":e.onRemoveShare,"update-share":e.onUpdateShare}})],1),n("NcAppSidebarTab",{attrs:{id:"forms-settings",order:1,name:e.t("forms","Settings")},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconSettings",{attrs:{size:20}})]},proxy:!0}])},[n("SettingsSidebarTab",{attrs:{form:e.form},on:{"update:formProp":e.onPropertyChange}})],1)],1)},il=[],ol=B(el,nl,il,!1,null,"31e98bc3",null,null);const Qe=ol.exports;Bt.use(Fn);const rl=new Fn({mode:"history",base:ae("/apps/forms",""),linkActiveClass:"active",routes:[{path:"/",name:"root"},{path:"/:hash",redirect:{name:"submit"},name:"formRoot",props:!0},{path:"/:hash/edit",components:{default:Nr,sidebar:Qe},name:"edit",props:{default:!0}},{path:"/:hash/results",components:{default:js,sidebar:Qe},name:"results",props:{default:!0}},{path:"/:hash/submit",components:{default:Ri,sidebar:Qe},name:"submit",props:{default:!0}}]}),sl={name:"ArchiveIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var al=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon archive-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M3,3H21V7H3V3M4,8H20V21H4V8M9.5,11A0.5,0.5 0 0,0 9,11.5V13H15V11.5A0.5,0.5 0 0,0 14.5,11H9.5Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},ll=[],cl=B(sl,al,ll,!1,null,null,null,null);const ri=cl.exports,ul={name:"ArchiveOffIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var dl=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon archive-off-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M10.2 7L6.2 3H21V7H10.2M20 8H11.2L20 16.8V8M20 19.35V19.34L8.66 8H8.66L7.66 7H7.66L2.39 1.73L1.11 3L3 4.89V7H5.11L6.11 8H4V21H19.11L20.84 22.73L22.11 21.46L20 19.35Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},hl=[],fl=B(ul,dl,hl,!1,null,null,null,null);const pl=fl.exports,ml={name:"PencilIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var gl=function(){var e=this,n=e._self._c;return n("span",e._b({staticClass:"material-design-icon pencil-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[n("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"}},[e.title?n("title",[e._v(e._s(e.title))]):e._e()])])])},vl=[],bl=B(ml,gl,vl,!1,null,null,null,null);const yl=bl.exports,_l={name:"AppNavigationForm",components:{FormsIcon:pn,IconArchive:ri,IconArchiveOff:pl,IconCheck:zi,IconContentCopy:Vi,IconDelete:Fe,IconPencil:yl,IconPoll:ei,IconShareVariant:dn,NcActionButton:Kt,NcActionRouter:xi,NcActionSeparator:bn,NcDialog:He,NcListItem:$i,NcLoadingIcon:Oe},mixins:[fe],props:{form:{type:Object,required:!0},forceDisplayActions:{type:Boolean,default:!1,required:!1},readOnly:{type:Boolean,default:!0}},data(){return{loading:!1,showDeleteDialog:!1,buttons:[{label:t("forms","Delete form"),icon:Kn,type:"error",callback:()=>{this.onDeleteForm()}}]}},computed:{canEdit(){return this.form.permissions.includes(this.PERMISSION_TYPES.PERMISSION_EDIT)},isActive(){return this.form.hash===this.$route.params.hash},isArchived(){return this.form.state===ht.FormArchived},isExpired(){return this.form.expires&&mt().unix()>this.form.expires},formTitle(){return this.form.title?this.form.title:t("forms","New form")},formSubtitle(){if(this.form.state===ht.FormClosed)return t("forms","Form closed");if(this.form.expires){const e=mt(this.form.expires,"X").fromNow();return this.isExpired?t("forms","Expired {relativeDate}",{relativeDate:e}):t("forms","Expires {relativeDate}",{relativeDate:e})}return""},hasSubtitle(){return this.formSubtitle!==""},routerTarget(){return this.readOnly?"submit":"formRoot"}},methods:{mobileCloseNavigation(){this.$emit("mobile-close-navigation")},onShareForm(){this.$emit("open-sharing",this.form.hash)},onCloneForm(){this.$emit("clone",this.form.id)},async onToggleArchive(){try{await W.patch(j("apps/forms/api/v2.4/form/update"),{id:this.form.id,keyValuePairs:{state:this.isArchived?ht.FormClosed:ht.FormArchived}}),this.$set(this.form,"state",this.isArchived?ht.FormClosed:ht.FormArchived)}catch(e){q.error("Error changing archived state of form",{error:e}),Z(t("forms","Error changing archived state of form"))}},async onDeleteForm(){this.loading=!0;try{await W.delete(j("apps/forms/api/v2.4/form/{id}",{id:this.form.id})),this.$emit("delete",this.form.id)}catch(e){q.error("Error while deleting ".concat(this.formTitle),{error:e.response}),Z(t("forms","Error while deleting {title}",{title:this.formTitle}))}finally{this.loading=!1}}}};var wl=function(){var e=this,n=e._self._c;return n("NcListItem",{ref:"navigationItem",attrs:{active:e.isActive,"actions-aria-label":e.t("forms","Form actions"),"counter-number":e.form.submissionCount,compact:!0,"force-display-actions":e.forceDisplayActions,name:e.formTitle,to:{name:e.routerTarget,params:{hash:e.form.hash}}},on:{click:e.mobileCloseNavigation},scopedSlots:e._u([{key:"icon",fn:function(){return[e.loading?n("NcLoadingIcon",{attrs:{size:16}}):e.isExpired?n("IconCheck",{attrs:{size:16}}):n("FormsIcon",{attrs:{size:16}})]},proxy:!0},e.hasSubtitle?{key:"subname",fn:function(){return[e._v(" "+e._s(e.formSubtitle)+" ")]},proxy:!0}:null,!e.loading&&!e.readOnly?{key:"actions",fn:function(){return[e.isArchived?e._e():n("NcActionRouter",{attrs:{"close-after-click":!0,exact:!0,to:{name:"edit",params:{hash:e.form.hash}}},on:{click:e.mobileCloseNavigation},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconPencil",{attrs:{size:20}})]},proxy:!0}],null,!1,291764094)},[e._v(" "+e._s(e.t("forms","Edit form"))+" ")]),e.isArchived?e._e():n("NcActionButton",{attrs:{"close-after-click":!0},on:{click:e.onShareForm},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconShareVariant",{attrs:{size:20}})]},proxy:!0}],null,!1,2701055865)},[e._v(" "+e._s(e.t("forms","Share form"))+" ")]),n("NcActionRouter",{attrs:{"close-after-click":!0,exact:!0,to:{name:"results",params:{hash:e.form.hash}}},on:{click:e.mobileCloseNavigation},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconPoll",{attrs:{size:20}})]},proxy:!0}],null,!1,1519423900)},[e._v(" "+e._s(e.t("forms","Results"))+" ")]),e.canEdit&&!e.isArchived?n("NcActionButton",{attrs:{"close-after-click":!0},on:{click:e.onCloneForm},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconContentCopy",{attrs:{size:20}})]},proxy:!0}],null,!1,3598792143)},[e._v(" "+e._s(e.t("forms","Copy form"))+" ")]):e._e(),e.canEdit?n("NcActionSeparator"):e._e(),e.canEdit?n("NcActionButton",{attrs:{"close-after-click":!0},on:{click:e.onToggleArchive},scopedSlots:e._u([{key:"icon",fn:function(){return[e.isArchived?n("IconArchiveOff",{attrs:{size:20}}):n("IconArchive",{attrs:{size:20}})]},proxy:!0}],null,!1,2091663753)},[e._v(" "+e._s(e.isArchived?e.t("forms","Unarchive form"):e.t("forms","Archive form"))+" ")]):e._e(),e.canEdit?n("NcActionButton",{attrs:{"close-after-click":!0},on:{click:function(i){e.showDeleteDialog=!0}},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconDelete",{attrs:{size:20}})]},proxy:!0}],null,!1,881161434)},[e._v(" "+e._s(e.t("forms","Delete form"))+" ")]):e._e(),n("NcDialog",{attrs:{open:e.showDeleteDialog,name:e.t("forms","Delete form"),message:e.t("forms","Are you sure you want to delete {title}?",{title:e.formTitle}),buttons:e.buttons},on:{"update:open":function(i){e.showDeleteDialog=i}}})]},proxy:!0}:null],null,!0)})},Sl=[],Cl=B(_l,wl,Sl,!1,null,null,null,null);const si=Cl.exports,xl=mi({name:"ArchivedFormsModal",components:{AppNavigationForm:si,NcDialog:He},props:{open:{type:Boolean,required:!0},forms:{type:Array,required:!0}},emits:["update:open"],data(){return{shownForms:[]}},watch:{forms:{immediate:!0,handler(){this.shownForms=[...this.forms]}}},methods:{t:On,onDelete(e){this.shownForms=this.shownForms.filter(({id:n})=>n!==e.id)}}});var El=function(){var e=this,n=e._self._c;return e._self._setupProxy,n("NcDialog",{attrs:{"content-classes":"archived-forms",name:e.t("forms","Archived forms"),open:e.open,size:"normal"},on:{"update:open":function(i){return e.$emit("update:open",i)}}},[n("ul",{attrs:{"aria-label":e.t("forms","Archived forms")}},e._l(e.shownForms,function(i,o){return n("AppNavigationForm",{key:o,attrs:{form:i,"read-only":!1,"force-display-actions":""},on:{delete:function(s){return e.onDelete(i)},"mobile-close-navigation":function(s){return e.$emit("update:open",!1)}}})}),1)])},Al=[],kl=B(xl,El,Al,!1,null,"7440fb85",null,null);const Tl=kl.exports,Nl={name:"Forms",components:{AppNavigationForm:si,ArchivedFormsModal:Tl,FormsIcon:pn,IconArchive:ri,IconPlus:vn,NcAppContent:hn,NcAppNavigation:cr,NcAppNavigationCaption:pr,NcAppNavigationNew:yr,NcButton:De,NcContent:Bi,NcEmptyContent:fn,NcLoadingIcon:Oe},mixins:[fe],setup(){return{isMobile:Pn()}},data(){return{loading:!0,sidebarOpened:!1,sidebarActive:"forms-sharing",forms:[],allSharedForms:[],showArchivedForms:!1,canCreateForms:Pe(In,"appConfig").canCreateForms}},computed:{canEdit(){return this.selectedForm.permissions.includes(this.PERMISSION_TYPES.PERMISSION_EDIT)},hasForms(){return this.allSharedForms.length>0||this.forms.length>0},ownedForms(){return this.forms.filter(e=>e.state!==ht.FormArchived)},sharedForms(){return this.allSharedForms.filter(e=>e.state!==ht.FormArchived)},archivedForms(){return[...this.forms,...this.allSharedForms].filter(e=>e.state===ht.FormArchived)},routeHash(){return this.$route.params.hash},routeAllowed(){if(!this.routeHash)return!1;const e=[...this.forms,...this.allSharedForms].find(n=>n.hash===this.routeHash);return e===void 0?(this.fetchPartialForm(this.routeHash),!1):e==null?void 0:e.permissions.includes(this.$route.name)},selectedForm:{get(){return this.routeAllowed?this.forms.concat(this.allSharedForms).find(e=>e.hash===this.routeHash):{}},set(e){let n=this.forms.findIndex(i=>i.hash===this.routeHash);if(n>-1){this.$set(this.forms,n,e);return}n=this.allSharedForms.findIndex(i=>i.hash===this.routeHash),n>-1&&this.$set(this.allSharedForms,n,e)}}},beforeMount(){this.loadForms()},mounted(){Ke("forms:last-updated:set",e=>this.onLastUpdatedByEventBus(e)),Ke("forms:ownership-transfered",e=>this.onDeleteForm(e))},unmounted(){Je("forms:last-updated:set",e=>this.onLastUpdatedByEventBus(e)),Je("forms:ownership-transfered",e=>this.onDeleteForm(e))},methods:{mobileCloseNavigation(){this.isMobile&&vt("toggle-navigation",{open:!1})},openSharing(e){e!==this.routeHash&&this.$router.push({name:"edit",params:{hash:e}}),this.sidebarActive="forms-sharing",this.sidebarOpened=!0},async loadForms(){this.loading=!0;try{const e=await W.get(j("apps/forms/api/v2.4/forms"));this.forms=ct(e)}catch(e){q.error("Error while loading owned forms list",{error:e}),Z(t("forms","An error occurred while loading the forms list"))}try{const e=await W.get(j("apps/forms/api/v2.4/shared_forms"));this.allSharedForms=ct(e)}catch(e){q.error("Error while loading shared forms list",{error:e}),Z(t("forms","An error occurred while loading the forms list"))}this.loading=!1},async fetchPartialForm(e){if(await new Promise(n=>{const i=()=>{this.loading?window.setTimeout(i,250):n()};i()}),this.loading=!0,[...this.forms,...this.allSharedForms].find(n=>n.hash===e)===void 0)try{const n=await W.get(j("apps/forms/api/v2.4/partial_form/{hash}",{hash:e})),i=ct(n);i.permissions.includes(this.PERMISSION_TYPES.PERMISSION_SUBMIT)&&this.allSharedForms.push(i)}catch(n){q.error("Form ".concat(e," not found"),{error:n}),Z(t("forms","Form not found"))}this.loading=!1},async onNewForm(){try{const e=await W.post(j("apps/forms/api/v2.4/form")),n=ct(e);this.forms.unshift(n),this.$router.push({name:"edit",params:{hash:n.hash}}),this.mobileCloseNavigation()}catch(e){q.error("Unable to create new form",{error:e}),Z(t("forms","Unable to create a new form"))}},async onCloneForm(e){try{const n=await W.post(j("apps/forms/api/v2.4/form/clone/{id}",{id:e})),i=ct(n);this.forms.unshift(i),this.$router.push({name:"edit",params:{hash:i.hash}}),this.mobileCloseNavigation()}catch(n){q.error("Unable to copy form ".concat(e),{error:n}),Z(t("forms","Unable to copy form"))}},async onDeleteForm(e){const n=this.forms.findIndex(o=>o.id===e),i=this.forms[n].hash;this.forms.splice(n,1),i===this.routeHash&&this.$router.push({name:"root"})},onLastUpdatedByEventBus(e){const n=this.forms.findIndex(i=>i.id===e);if(n!==-1)this.forms[n].lastUpdated=mt().unix(),this.forms.sort((i,o)=>o.lastUpdated-i.lastUpdated);else{const i=this.allSharedForms.findIndex(o=>o.id===e);this.allSharedForms[i].lastUpdated=mt().unix(),this.allSharedForms.sort((o,s)=>s.lastUpdated-o.lastUpdated)}}}};var Ll=function(){var e=this,n=e._self._c;return n("NcContent",{attrs:{"app-name":"forms"}},[e.canCreateForms||e.hasForms?n("NcAppNavigation",{scopedSlots:e._u([{key:"list",fn:function(){return[e.ownedForms.length>0?n("NcAppNavigationCaption",{attrs:{name:e.t("forms","Your Forms")}}):e._e(),e._l(e.ownedForms,function(i){return n("AppNavigationForm",{key:i.id,attrs:{form:i,"read-only":!1},on:{"open-sharing":e.openSharing,"mobile-close-navigation":e.mobileCloseNavigation,clone:e.onCloneForm,delete:e.onDeleteForm}})}),e.sharedForms.length>0?n("NcAppNavigationCaption",{attrs:{name:e.t("forms","Shared with you")}}):e._e(),e._l(e.sharedForms,function(i){return n("AppNavigationForm",{key:i.id,attrs:{form:i,"read-only":!0},on:{"open-sharing":e.openSharing,"mobile-close-navigation":e.mobileCloseNavigation}})})]},proxy:!0},{key:"footer",fn:function(){return[e.archivedForms.length>0?n("div",{staticClass:"forms-navigation-footer"},[n("NcButton",{staticClass:"forms__archived-forms-toggle",attrs:{alignment:"start",type:"tertiary",wide:""},on:{click:function(i){e.showArchivedForms=!0}},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconArchive",{attrs:{size:20}})]},proxy:!0}],null,!1,1438813153)},[e._v(" "+e._s(e.t("forms","Archived forms"))+" ")])],1):e._e()]},proxy:!0}],null,!1,4013083206)},[e.canCreateForms?n("NcAppNavigationNew",{attrs:{text:e.t("forms","New form")},on:{click:e.onNewForm},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconPlus",{attrs:{size:20,decorative:""}})]},proxy:!0}],null,!1,1626299775)}):e._e()],1):e._e(),e.loading||!e.routeHash||!e.routeAllowed?n("NcAppContent",[e.loading?n("NcEmptyContent",{staticClass:"forms-emptycontent",attrs:{name:e.t("forms","Loading forms ")},scopedSlots:e._u([{key:"icon",fn:function(){return[n("NcLoadingIcon",{attrs:{size:64}})]},proxy:!0}],null,!1,826850984)}):e.hasForms?n("NcEmptyContent",{staticClass:"forms-emptycontent",attrs:{name:e.canCreateForms?e.t("forms","Select a form or create a new one"):e.t("forms","Please select a form")},scopedSlots:e._u([{key:"icon",fn:function(){return[n("FormsIcon",{attrs:{size:64}})]},proxy:!0},e.canCreateForms?{key:"action",fn:function(){return[n("NcButton",{attrs:{type:"primary"},on:{click:e.onNewForm}},[e._v(" "+e._s(e.t("forms","Create new form"))+" ")])]},proxy:!0}:null],null,!0)}):n("NcEmptyContent",{staticClass:"forms-emptycontent",attrs:{name:e.t("forms","No forms created yet")},scopedSlots:e._u([{key:"icon",fn:function(){return[n("FormsIcon",{attrs:{size:64}})]},proxy:!0},e.canCreateForms?{key:"action",fn:function(){return[n("NcButton",{attrs:{type:"primary"},on:{click:e.onNewForm}},[e._v(" "+e._s(e.t("forms","Create a form"))+" ")])]},proxy:!0}:null],null,!0)})],1):[n("router-view",{attrs:{form:e.selectedForm,"sidebar-opened":e.sidebarOpened},on:{"update:form":function(i){e.selectedForm=i},"update:sidebarOpened":function(i){e.sidebarOpened=i},"update:sidebar-opened":function(i){e.sidebarOpened=i},"open-sharing":e.openSharing}}),!e.selectedForm.partial&&e.canEdit?n("router-view",{attrs:{form:e.selectedForm,"sidebar-opened":e.sidebarOpened,active:e.sidebarActive,name:"sidebar"},on:{"update:sidebarOpened":function(i){e.sidebarOpened=i},"update:sidebar-opened":function(i){e.sidebarOpened=i},"update:active":function(i){e.sidebarActive=i}}}):e._e()],n("ArchivedFormsModal",{attrs:{open:e.showArchivedForms,forms:e.archivedForms},on:{"update:open":function(i){e.showArchivedForms=i}}})],2)},Ml=[],Il=B(Nl,Ll,Ml,!1,null,"b707c645",null,null);const Dl=Il.exports;Bt.directive("tooltip",hi),Bt.prototype.t=On,Bt.prototype.n=fi,new Bt({el:"#content",name:"FormsRoot",router:rl,render:e=>e(Dl)});export{Ui as _};
