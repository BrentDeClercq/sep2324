/*! third party licenses: js/vendor.LICENSE.txt */
import{n as g,l as r,t as f,a as h}from"./modulepreload-polyfill-CZYm9XZS.mjs";import{V as a}from"./vendor-DFuGXkIP.mjs";import{o as w,G as d,M as C,a as s,_ as l,l as c,z as p}from"./NcSettingsSection-Lgwm3w2e-Zv456Rc4.mjs";const n="forms";const u={name:"FormsSettings",components:{NcCheckboxRadioSwitch:w,NcSelect:d,NcSettingsSection:C},data(){return{appConfig:r(n,"appConfig"),availableGroups:r(n,"availableGroups")}},methods:{async onRestrictCreationChange(o){const i=this.$refs.switchRestrictCreation;i.loading=!0,await this.saveAppConfig("restrictCreation",o),i.loading=!1},async onCreationAllowedGroupsChange(o){const i=this.$refs.switchRestrictCreation;i.loading=!0,await this.saveAppConfig("creationAllowedGroups",o.map(e=>e.groupId)),i.loading=!1},async onAllowPublicLinkChange(o){const i=this.$refs.switchAllowPublicLink;i.loading=!0,await this.saveAppConfig("allowPublicLink",o),i.loading=!1},async onAllowPermitAllChange(o){const i=this.$refs.switchAllowPermitAll;i.loading=!0,await this.saveAppConfig("allowPermitAll",o),i.loading=!1},async saveAppConfig(o,i){try{await s.patch(l("apps/forms/config/update"),{configKey:o,configValue:i})}catch(e){c.error("Error while saving configuration",{error:e}),p(t("forms","Error while saving configuration")),await this.reloadAppConfig()}},async reloadAppConfig(){try{const o=await s.get(l("apps/forms/config"));this.appConfig=o.data}catch(o){c.error("Error while reloading config",{error:o}),p(t("forms","Error while reloading config"))}}}};var m=function(){var o=this,i=o._self._c;return i("div",[i("NcSettingsSection",{attrs:{name:o.t("forms","Form creation")}},[i("NcCheckboxRadioSwitch",{ref:"switchRestrictCreation",staticClass:"forms-settings__creation__switch",attrs:{checked:o.appConfig.restrictCreation,type:"switch"},on:{"update:checked":[function(e){return o.$set(o.appConfig,"restrictCreation",e)},o.onRestrictCreationChange]}},[o._v(" "+o._s(o.t("forms","Restrict form creation to selected groups"))+" ")]),i("NcSelect",{staticClass:"forms-settings__creation__multiselect",attrs:{disabled:!o.appConfig.restrictCreation,multiple:!0,options:o.availableGroups,placeholder:o.t("forms","Select groups"),label:"displayName"},on:{input:o.onCreationAllowedGroupsChange},model:{value:o.appConfig.creationAllowedGroups,callback:function(e){o.$set(o.appConfig,"creationAllowedGroups",e)},expression:"appConfig.creationAllowedGroups"}})],1),i("NcSettingsSection",{attrs:{name:o.t("forms","Form sharing")}},[i("NcCheckboxRadioSwitch",{ref:"switchAllowPublicLink",attrs:{checked:o.appConfig.allowPublicLink,type:"switch"},on:{"update:checked":[function(e){return o.$set(o.appConfig,"allowPublicLink",e)},o.onAllowPublicLinkChange]}},[o._v(" "+o._s(o.t("forms","Allow sharing by link"))+" ")]),i("NcCheckboxRadioSwitch",{ref:"switchAllowPermitAll",attrs:{checked:o.appConfig.allowPermitAll,type:"switch"},on:{"update:checked":[function(e){return o.$set(o.appConfig,"allowPermitAll",e)},o.onAllowPermitAllChange]}},[o._v(" "+o._s(o.t("forms","Allow sharing to all logged in accounts"))+" ")])],1)],1)},A=[],b=g(u,m,A,!1,null,"340b04e3",null,null);const k=b.exports;a.prototype.t=f,a.prototype.n=h,new a({el:"#forms-settings",name:"FormsSettings",render:o=>o(k)});
